<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì˜µí‹°ë§ˆì´ì €(RBO/CBO), ì¡°ì¸ ê¸°ë²• ë¹„êµ, Hash Join ì‹¬í™”</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
<style>
body{font-family:'Noto Sans KR',sans-serif}
.tab-btn{padding:0.5rem 1rem;font-size:0.85rem;font-weight:500;border-radius:0.5rem;white-space:nowrap;transition:all 0.2s}
.tab-btn.active{background:#4f46e5;color:#fff;box-shadow:0 2px 8px rgba(79,70,229,0.3)}
.tab-btn:not(.active){color:#6b7280}
.tab-btn:not(.active):hover{background:#e0e7ff;color:#4338ca}
.tab-btn.mentor-tab{color:#b45309}
.tab-btn.mentor-tab.active{background:#d97706;color:#fff;box-shadow:0 2px 8px rgba(217,119,6,0.3)}
.def-box{background:linear-gradient(135deg,#ede9fe 0%,#e0e7ff 100%);border-left:4px solid #6366f1;padding:1.5rem;border-radius:0.75rem;margin:1rem 0}
.info-card{border-radius:0.75rem;padding:1.25rem;margin-bottom:1rem;border-left:4px solid}
.info-card.indigo{background:#eef2ff;border-color:#6366f1}
.info-card.green{background:#ecfdf5;border-color:#10b981}
.info-card.purple{background:#faf5ff;border-color:#8b5cf6}
.info-card.amber{background:#fffbeb;border-color:#f59e0b}
.info-card.teal{background:#f0fdfa;border-color:#14b8a6}
.info-card.red{background:#fef2f2;border-color:#ef4444}
.tech-block{background:#fff;border:1px solid #e5e7eb;border-radius:0.75rem;margin-bottom:0.75rem;overflow:hidden;cursor:pointer}
.tech-block .header{padding:1rem 1.25rem;display:flex;justify-content:space-between;align-items:center}
.tech-block .body{padding:0 1.25rem 1.25rem;display:none}
.tech-block.open .body{display:block}
.tech-block .toggle{transition:transform 0.2s}
.tech-block.open .toggle{transform:rotate(180deg)}
.highlight{background:linear-gradient(120deg,#a78bfa 0%,#818cf8 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:700}
.chat-sidebar{position:fixed;top:0;right:-400px;width:400px;height:100%;background:#fff;box-shadow:-4px 0 20px rgba(0,0,0,0.15);z-index:1000;transition:right 0.3s;display:flex;flex-direction:column}
.chat-sidebar.open{right:0}
.chat-fab{position:fixed;bottom:24px;right:24px;width:56px;height:56px;background:#4f46e5;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:24px;cursor:pointer;box-shadow:0 4px 12px rgba(79,70,229,0.4);z-index:999;transition:transform 0.2s}
.chat-fab:hover{transform:scale(1.1)}
.typing-indicator span{display:inline-block;width:8px;height:8px;margin:0 2px;background:#6366f1;border-radius:50%;animation:typing 1s infinite}
.typing-indicator span:nth-child(2){animation-delay:0.2s}
.typing-indicator span:nth-child(3){animation-delay:0.4s}
@keyframes typing{0%,100%{opacity:0.3;transform:scale(0.8)}50%{opacity:1;transform:scale(1.2)}}
.strategy-card{background:#fff;border:1px solid #e5e7eb;border-radius:0.75rem;overflow:hidden;cursor:pointer;margin-bottom:0.75rem}
.strategy-card .s-header{padding:1rem 1.25rem;display:flex;justify-content:space-between;align-items:center}
.strategy-card .s-body{padding:0 1.25rem 1.25rem;display:none}
.strategy-card.open .s-body{display:block}
.strategy-card .s-toggle{transition:transform 0.2s}
.strategy-card.open .s-toggle{transform:rotate(180deg)}
.textbook-content h3{font-size:1.25rem;font-weight:700;color:#1e293b;margin-top:2.5rem;margin-bottom:1rem;padding-bottom:0.5rem;border-bottom:2px solid #e0e7ff}
.textbook-content h4{font-size:1.1rem;font-weight:600;color:#334155;margin-top:1.5rem;margin-bottom:0.75rem}
.textbook-content p{color:#374151;line-height:1.8;margin-bottom:0.75rem}
.textbook-content table{width:100%;border-collapse:collapse;margin:1rem 0;font-size:0.9rem}
.textbook-content th{background:#f1f5f9;padding:0.625rem;border:1px solid #d1d5db;font-weight:600;text-align:left}
.textbook-content td{padding:0.625rem;border:1px solid #d1d5db}
.textbook-content blockquote{border-left:4px solid #6366f1;padding:1rem;background:#eef2ff;border-radius:0 0.5rem 0.5rem 0;margin:1rem 0}
.textbook-content pre{background:#f8fafc;border:1px solid #e2e8f0;border-radius:0.5rem;padding:1rem;overflow-x:auto;font-size:0.85rem;margin:1rem 0}
.insight-box{background:linear-gradient(135deg,#fef3c7 0%,#fde68a 100%);border-left:4px solid #f59e0b;padding:1.25rem;border-radius:0.75rem;margin:1rem 0}
.arch-box{background:#fff;border:2px solid #6366f1;border-radius:0.75rem;padding:1.25rem;margin:1rem 0}
.arch-layer{background:#f8fafc;border:1px solid #e2e8f0;border-radius:0.5rem;padding:0.75rem;margin:0.5rem 0;text-align:center;font-size:0.85rem}
</style>
</head>
<body class="bg-gray-50">
<div class="max-w-5xl mx-auto px-4 py-6">
  <header class="bg-white rounded-2xl shadow-sm border p-6 mb-6">
    <div class="flex items-center justify-between mb-4">
      <div>
        <p class="text-sm text-indigo-600 font-medium tracking-wide mb-1">KPC ì •ë³´ê´€ë¦¬ê¸°ìˆ ì‚¬ ZIP-UP ì‹¬í™”ë°˜</p>
        <h1 class="text-2xl font-black text-gray-900">ì˜µí‹°ë§ˆì´ì €(RBO/CBO), ì¡°ì¸ ê¸°ë²• ë¹„êµ, Hash Join ì‹¬í™”</h1>
      </div>
      <div class="flex items-center gap-2">
        <span class="bg-indigo-100 text-indigo-700 text-xs font-bold px-3 py-1 rounded-full">2026</span>
        <button onclick="toggleSettings()" class="bg-gray-100 hover:bg-gray-200 text-gray-600 text-xs font-medium px-3 py-1.5 rounded-full transition-colors flex items-center gap-1">ğŸ”‘ API ì„¤ì •</button>
      </div>
    </div>
    <nav class="flex gap-2 overflow-x-auto pb-2" id="tabNav">
      <button class="tab-btn active" onclick="navTo('overview')">ê°œìš” ë° ê°œë…</button>
      <button class="tab-btn" onclick="navTo('optimizer')">ì˜µí‹°ë§ˆì´ì € RBO/CBO</button>
      <button class="tab-btn" onclick="navTo('joincompare')">3ëŒ€ ì¡°ì¸ ê¸°ë²• ë¹„êµ</button>
      <button class="tab-btn" onclick="navTo('hashjoin')">Hash Join ì‹¬í™”</button>
      <button class="tab-btn" onclick="navTo('textbook')">ì›ë¬¸ í•™ìŠµ</button>
      <button class="tab-btn mentor-tab" onclick="navTo('script')" id="scriptTabBtn" style="display:none;">ğŸ¬ ê°•ì˜ ìŠ¤í¬ë¦½íŠ¸</button>
      <button class="tab-btn" onclick="navTo('quiz')">í€´ì¦ˆ & ì•”ê¸°</button>
    </nav>
  </header>
  <main>

<div id="overview" class="space-y-6">
  <div class="def-box">
    <p class="font-bold text-indigo-900 text-lg mb-2">ğŸ“˜ í•µì‹¬ ì •ì˜</p>
    <p class="text-indigo-800 leading-relaxed"><strong>ì˜µí‹°ë§ˆì´ì €(Optimizer)</strong>ëŠ” SQL ì‹¤í–‰ ê³„íšì„ ê²°ì •í•˜ëŠ” DBMSì˜ í•µì‹¬ êµ¬ì„±ìš”ì†Œë¡œ, RBO(ê·œì¹™ ê¸°ë°˜)ì—ì„œ CBO(ë¹„ìš© ê¸°ë°˜)ë¡œ ë°œì „í•˜ì˜€ìœ¼ë©°, <strong>3ëŒ€ ì¡°ì¸ ê¸°ë²•</strong>(NL Join, Sort Merge Join, Hash Join)ì˜ ì„ íƒì€ ë°ì´í„°ëŸ‰Â·ì¡°ì¸ ì¡°ê±´Â·ì¸ë±ìŠ¤ ìœ ë¬´ì— ë”°ë¼ ê²°ì •ëœë‹¤. <strong>Hash Join</strong>ì€ Build/Probe 2ë‹¨ê³„ë¡œ ë™ì‘í•˜ë©°, ë©”ëª¨ë¦¬ ì´ˆê³¼ ì‹œ Grace Hash Joinìœ¼ë¡œ Temp Spillì„ ì²˜ë¦¬í•œë‹¤.</p>
  </div>
  <div class="bg-white rounded-xl shadow-sm border p-6">
    <h3 class="font-bold text-gray-900 text-lg mb-3">ğŸ“š ê°œë… í•´ì„¤</h3>
    <p class="text-gray-700 leading-relaxed mb-3">ë³¸ í† í”½ì€ DBMS ì¿¼ë¦¬ ìµœì í™”ì˜ í•µì‹¬ ë©”ì»¤ë‹ˆì¦˜ì„ ì´í•´í•˜ê³ , ì˜µí‹°ë§ˆì´ì €ì˜ ë°œì „ ê³¼ì •, ì¡°ì¸ ì „ëµì˜ ì²´ê³„ì  ë¹„êµ, Hash Joinì˜ ë‚´ë¶€ ë™ì‘ì„ ì‹¬í™” ë¶„ì„í•˜ëŠ” ëŠ¥ë ¥ì„ ê²€ì¦í•©ë‹ˆë‹¤.</p>
    <div class="bg-indigo-50 rounded-lg p-4 border border-indigo-100">
      <p class="text-sm text-indigo-800"><strong>ì†Œë¬¸ì œ ê°„ íë¦„:</strong> <strong>ìµœì í™” ì „ëµ</strong>(RBOâ†’CBO) â†’ <strong>ì¡°ì¸ ê¸°ë²• ë¹„êµ</strong>(NL/SM/Hash) â†’ <strong>Hash Join ì‹¬í™”</strong>(Build/Probe, Temp Spill)</p>
    </div>
  </div>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
    <div class="info-card indigo"><p class="font-bold text-indigo-800 mb-1">âš™ï¸ ì†Œë¬¸ì œ 1</p><p class="text-sm text-indigo-700 font-medium mb-1">ì˜µí‹°ë§ˆì´ì € ë°œì „ ê³¼ì •</p><p class="text-xs text-gray-600">RBOâ†’CBO + ë¹„ìš© ì‚°ì • 5ëŒ€ ìš”ì†Œ</p></div>
    <div class="info-card green"><p class="font-bold text-green-800 mb-1">ğŸ”— ì†Œë¬¸ì œ 2</p><p class="text-sm text-green-700 font-medium mb-1">3ëŒ€ ì¡°ì¸ ê¸°ë²•</p><p class="text-xs text-gray-600">NLÂ·Sort MergeÂ·Hash ì•Œê³ ë¦¬ì¦˜ ë¹„êµ</p></div>
    <div class="info-card purple"><p class="font-bold text-purple-800 mb-1">ğŸ”¬ ì†Œë¬¸ì œ 3</p><p class="text-sm text-purple-700 font-medium mb-1">Hash Join ì‹¬í™”</p><p class="text-xs text-gray-600">Build/Probe + Grace Hash Join</p></div>
  </div>
  <div class="bg-white rounded-xl shadow-sm border p-6">
    <h3 class="font-bold text-gray-900 text-lg mb-3">ğŸ“Š ì¡°ì¸ ê¸°ë²• ì„±ëŠ¥ ë¹„êµ</h3>
    <div style="max-width:500px;margin:0 auto;"><canvas id="chartJoinPerf"></canvas></div>
    <script>
    new Chart(document.getElementById('chartJoinPerf'),{type:'bar',data:{labels:['ì†ŒëŸ‰(OLTP)','ì¤‘ëŸ‰','ëŒ€ëŸ‰(DW/ë°°ì¹˜)'],datasets:[{label:'NL Join',data:[95,40,10],backgroundColor:'rgba(99,102,241,0.7)'},{label:'Sort Merge',data:[50,75,70],backgroundColor:'rgba(16,185,129,0.7)'},{label:'Hash Join',data:[30,85,95],backgroundColor:'rgba(168,85,247,0.7)'}]},options:{responsive:true,plugins:{legend:{position:'bottom'},title:{display:true,text:'ë°ì´í„°ëŸ‰ë³„ ì¡°ì¸ ê¸°ë²• ì í•©ë„ (%)'}},scales:{y:{beginAtZero:true,max:100}}}});
    </script>
  </div>
</div>

<div id="optimizer" style="display:none;" class="space-y-6">
  <h2 class="text-2xl font-bold text-gray-900 mb-6">âš™ï¸ ì˜µí‹°ë§ˆì´ì €ì˜ ë°œì „ ê³¼ì •ê³¼ CBO ë¹„ìš© ì‚°ì •</h2>
  <div class="info-card indigo"><p class="font-bold text-indigo-800 mb-2">í•µì‹¬ í¬ì¸íŠ¸</p><p class="text-sm text-indigo-700">SQLì€ ì„ ì–¸ì (Declarative) ì–¸ì–´ â†’ "ë¬´ì—‡ì„(WHAT)" ëª…ì‹œ, "ì–´ë–»ê²Œ(HOW)"ëŠ” ì˜µí‹°ë§ˆì´ì €ê°€ ê²°ì •. ë™ì¼ SQLë„ ì‹¤í–‰ ê³„íšì— ë”°ë¼ ì„±ëŠ¥ì´ <strong>ìˆ˜ë°±~ìˆ˜ì²œ ë°°</strong> ì°¨ì´.</p></div>
  <div class="tech-block">
    <div class="header"><span class="font-bold text-gray-800">ğŸ“‹ RBO â€” ê·œì¹™ ê¸°ë°˜ ì˜µí‹°ë§ˆì´ì €</span><span class="toggle text-gray-400">â–¼</span></div>
    <div class="body">
      <p class="text-sm text-gray-700 mb-3">ì‚¬ì „ ì •ì˜ëœ <strong>ìš°ì„ ìˆœìœ„ ê·œì¹™</strong>ì— ë”°ë¼ ì‹¤í–‰ ê³„íš ê²°ì •. Oracle 15ë‹¨ê³„ ì ‘ê·¼ ê²½ë¡œ ìš°ì„ ìˆœìœ„.</p>
      <div class="overflow-x-auto"><table class="w-full text-xs border-collapse"><thead><tr class="bg-gray-100"><th class="p-2 border">ìˆœìœ„</th><th class="p-2 border">ì ‘ê·¼ ê²½ë¡œ</th><th class="p-2 border">ì„¤ëª…</th></tr></thead><tbody><tr><td class="p-2 border font-bold">1</td><td class="p-2 border">Single Row by ROWID</td><td class="p-2 border">ROWID ì§ì ‘ ì ‘ê·¼</td></tr><tr class="bg-gray-50"><td class="p-2 border font-bold">4</td><td class="p-2 border">Unique Index</td><td class="p-2 border">ìœ ë‹ˆí¬ ì¸ë±ìŠ¤</td></tr><tr><td class="p-2 border font-bold">8</td><td class="p-2 border">Composite Index</td><td class="p-2 border">ë³µí•© ì¸ë±ìŠ¤</td></tr><tr class="bg-gray-50"><td class="p-2 border font-bold">12</td><td class="p-2 border">Sort Merge Join</td><td class="p-2 border">ì •ë ¬ ë³‘í•© ì¡°ì¸</td></tr><tr><td class="p-2 border font-bold">15</td><td class="p-2 border">Full Table Scan</td><td class="p-2 border">ì „ì²´ í…Œì´ë¸” ìŠ¤ìº”</td></tr></tbody></table></div>
      <div class="insight-box mt-3"><p class="text-sm text-amber-800"><strong>ğŸ’¡ RBO í•œê³„:</strong> ë°ì´í„° ë¶„í¬Â·í¬ê¸°Â·ì¹´ë””ë„ë¦¬í‹° ë¯¸ê³ ë ¤ â†’ ì¸ë±ìŠ¤ ë¬´ì¡°ê±´ ì‚¬ìš©. Oracle 10g ë¹„ê¶Œì¥, 12c ì™„ì „ íê¸°.</p></div>
    </div>
  </div>
  <div class="tech-block">
    <div class="header"><span class="font-bold text-gray-800">ğŸ“Š CBO â€” ë¹„ìš© ê¸°ë°˜ ì˜µí‹°ë§ˆì´ì €</span><span class="toggle text-gray-400">â–¼</span></div>
    <div class="body">
      <p class="text-sm text-gray-700 mb-3">í†µê³„ ì •ë³´ ê¸°ë°˜ <strong>ì˜ˆìƒ ë¹„ìš©(Cost) ì‚°ì¶œ</strong> â†’ ìµœì†Œ ë¹„ìš© ê³„íš ì„ íƒ.</p>
      <h4 class="font-bold text-sm text-gray-800 mb-2">ë¹„ìš© ì‚°ì • 5ëŒ€ ìš”ì†Œ â€” <span class="highlight">"ì¹´ì„ ì•„ì”¨ë„¤"</span></h4>
      <div class="overflow-x-auto"><table class="w-full text-xs border-collapse"><thead><tr class="bg-indigo-600 text-white"><th class="p-2">ìš”ì†Œ</th><th class="p-2">ì„¤ëª…</th><th class="p-2">í†µê³„ ì •ë³´</th></tr></thead><tbody><tr><td class="p-2 border font-bold"><span class="highlight">ì¹´</span>ë””ë„ë¦¬í‹°</td><td class="p-2 border">ì˜ˆìƒ ê²°ê³¼ í–‰ ìˆ˜</td><td class="p-2 border">í…Œì´ë¸” í–‰ ìˆ˜, NDV</td></tr><tr class="bg-indigo-50"><td class="p-2 border font-bold"><span class="highlight">ì„ </span>íƒë„</td><td class="p-2 border">ì¡°ê±´ ë§Œì¡± í–‰ ë¹„ìœ¨</td><td class="p-2 border">íˆìŠ¤í† ê·¸ë¨, NULL ë¹„ìœ¨</td></tr><tr><td class="p-2 border font-bold"><span class="highlight">ì•„</span>ì´ì˜¤(I/O)</td><td class="p-2 border">ë””ìŠ¤í¬ ì½ê¸°/ì“°ê¸°</td><td class="p-2 border">ë¸”ë¡ ìˆ˜, ì¸ë±ìŠ¤ ë†’ì´</td></tr><tr class="bg-indigo-50"><td class="p-2 border font-bold"><span class="highlight">ì”¨</span>PU</td><td class="p-2 border">ì—°ì‚° ì²˜ë¦¬ CPU ì‹œê°„</td><td class="p-2 border">í–‰ ìˆ˜, ì¡°ê±´ ë³µì¡ë„</td></tr><tr><td class="p-2 border font-bold"><span class="highlight">ë„¤</span>íŠ¸ì›Œí¬</td><td class="p-2 border">ë¶„ì‚° DB ì „ì†¡ ë¹„ìš©</td><td class="p-2 border">ëŒ€ì—­í­, ì§€ì—° ì‹œê°„</td></tr></tbody></table></div>
    </div>
  </div>
  <div class="bg-white rounded-xl shadow-sm border p-6">
    <h3 class="font-bold text-gray-900 mb-3">ğŸ“‹ RBO vs CBO ë¹„êµ</h3>
    <div class="overflow-x-auto"><table class="w-full text-xs border-collapse"><thead><tr class="bg-indigo-600 text-white"><th class="p-2">ë¹„êµ ê¸°ì¤€</th><th class="p-2">RBO</th><th class="p-2">CBO</th></tr></thead><tbody><tr><td class="p-2 border font-bold">ê²°ì • ê¸°ë°˜</td><td class="p-2 border">ìš°ì„ ìˆœìœ„ ê·œì¹™</td><td class="p-2 border">í†µê³„ ê¸°ë°˜ ë¹„ìš©</td></tr><tr class="bg-gray-50"><td class="p-2 border font-bold">ë°ì´í„° íŠ¹ì„±</td><td class="p-2 border">ë¶ˆê°€</td><td class="p-2 border">ë°˜ì˜</td></tr><tr><td class="p-2 border font-bold">ì¸ë±ìŠ¤</td><td class="p-2 border">ë¬´ì¡°ê±´ ì‚¬ìš©</td><td class="p-2 border">ì„ íƒì </td></tr><tr class="bg-gray-50"><td class="p-2 border font-bold">ì¡°ì¸ ìˆœì„œ</td><td class="p-2 border">FROMì ˆ ìˆœì„œ</td><td class="p-2 border">ë¹„ìš© ìµœì í™”</td></tr><tr><td class="p-2 border font-bold">í†µê³„ í•„ìš”</td><td class="p-2 border">ë¶ˆí•„ìš”</td><td class="p-2 border">í•„ìˆ˜</td></tr><tr class="bg-gray-50"><td class="p-2 border font-bold">ì•ˆì •ì„±</td><td class="p-2 border">í•­ìƒ ë™ì¼</td><td class="p-2 border">í†µê³„ ë³€í™”ì‹œ ë³€ë™</td></tr><tr><td class="p-2 border font-bold">íŒíŠ¸</td><td class="p-2 border">ì œí•œì </td><td class="p-2 border">ë‹¤ì–‘</td></tr><tr class="bg-gray-50"><td class="p-2 border font-bold">í˜„í™©</td><td class="p-2 border">íê¸°</td><td class="p-2 border">í˜„ëŒ€ í‘œì¤€</td></tr></tbody></table></div>
  </div>
</div>

<div id="joincompare" style="display:none;" class="space-y-6">
  <h2 class="text-2xl font-bold text-gray-900 mb-6">ğŸ”— 3ëŒ€ ì¡°ì¸ ê¸°ë²• ì•Œê³ ë¦¬ì¦˜ ë¹„êµ</h2>
  <div class="tech-block open">
    <div class="header"><span class="font-bold text-gray-800">ğŸ”„ Nested Loop Join</span><span class="toggle text-gray-400">â–¼</span></div>
    <div class="body">
      <p class="text-sm text-gray-700 mb-3">ì™¸ë¶€ í…Œì´ë¸” ê° í–‰ì— ëŒ€í•´ ë‚´ë¶€ í…Œì´ë¸” <strong>ë°˜ë³µ íƒìƒ‰</strong>. ì´ì¤‘ forë¬¸ êµ¬ì¡°.</p>
      <div class="arch-box"><p class="text-xs font-bold text-indigo-700 mb-2">NL Join ë™ì‘</p><div class="grid grid-cols-2 gap-4"><div><div class="arch-layer bg-indigo-50 border-indigo-200"><strong>Outer Table</strong></div><div class="text-xs text-center text-gray-500 py-1">ê° í–‰ë§ˆë‹¤ â†’</div></div><div><div class="arch-layer bg-green-50 border-green-200"><strong>Inner Table íƒìƒ‰</strong></div><div class="text-xs text-center text-gray-500 py-1">ì¸ë±ìŠ¤: O(logM)</div></div></div><div class="text-xs text-center mt-2 text-gray-600">O(NÃ—M) / O(NÃ—logM)</div></div>
      <div class="grid grid-cols-2 gap-3 mt-3"><div class="info-card green"><p class="text-xs"><strong>ì¥ì :</strong> ì†ŒëŸ‰ ë°ì´í„° ë¹ ë¦„, ë¶€ë¶„ ë²”ìœ„ ì²˜ë¦¬, OLTP ì í•©</p></div><div class="info-card red"><p class="text-xs"><strong>ë‹¨ì :</strong> ëŒ€ëŸ‰ ë¹„íš¨ìœ¨, Inner ì¸ë±ìŠ¤ í•„ìˆ˜, ëœë¤ I/O</p></div></div>
    </div>
  </div>
  <div class="tech-block open">
    <div class="header"><span class="font-bold text-gray-800">ğŸ“‘ Sort Merge Join</span><span class="toggle text-gray-400">â–¼</span></div>
    <div class="body">
      <p class="text-sm text-gray-700 mb-3">ì–‘ìª½ ì •ë ¬ í›„ ë³‘í•©. ë²”ìœ„ ì¡°ê±´(>, <, BETWEEN)ì—ë„ ì‚¬ìš© ê°€ëŠ¥.</p>
      <div class="arch-box"><p class="text-xs font-bold text-indigo-700 mb-2">Sort Merge ë™ì‘</p><div class="grid grid-cols-3 gap-2"><div class="arch-layer bg-blue-50 border-blue-200"><strong>Table A</strong><br><span class="text-xs">Sort â†“</span></div><div class="flex items-center justify-center"><span class="text-2xl">âŸº</span></div><div class="arch-layer bg-blue-50 border-blue-200"><strong>Table B</strong><br><span class="text-xs">Sort â†“</span></div></div><div class="text-xs text-center mt-2 text-gray-600">O(NlogN + MlogM + N + M)</div></div>
      <div class="grid grid-cols-2 gap-3 mt-3"><div class="info-card green"><p class="text-xs"><strong>ì¥ì :</strong> ë³‘í•© O(N+M), ë²”ìœ„ ì¡°ê±´ ê°€ëŠ¥, ì •ë ¬ ìƒëµ ê°€ëŠ¥</p></div><div class="info-card red"><p class="text-xs"><strong>ë‹¨ì :</strong> ì´ˆê¸° ì •ë ¬ ë¹„ìš©, ë¶€ë¶„ ë²”ìœ„ ì²˜ë¦¬ ë¶ˆê°€</p></div></div>
    </div>
  </div>
  <div class="tech-block open">
    <div class="header"><span class="font-bold text-gray-800">#ï¸âƒ£ Hash Join</span><span class="toggle text-gray-400">â–¼</span></div>
    <div class="body">
      <p class="text-sm text-gray-700 mb-3">Build Inputìœ¼ë¡œ í•´ì‹œ í…Œì´ë¸” ìƒì„± â†’ Probe Input ìˆœì°¨ ìŠ¤ìº” ë§¤ì¹­.</p>
      <div class="arch-box"><p class="text-xs font-bold text-indigo-700 mb-2">Hash Join 2ë‹¨ê³„</p><div class="grid grid-cols-2 gap-4"><div><div class="arch-layer bg-amber-50 border-amber-200"><strong>[Build]</strong></div><div class="text-xs text-center py-1">Small â†’ Hash Function</div><div class="arch-layer bg-amber-100 border-amber-300">ğŸ—‚ï¸ Hash Table</div></div><div><div class="arch-layer bg-purple-50 border-purple-200"><strong>[Probe]</strong></div><div class="text-xs text-center py-1">Large â†’ Hash Function</div><div class="arch-layer bg-purple-100 border-purple-300">ğŸ” Lookup â†’ Match</div></div></div><div class="text-xs text-center mt-2 text-gray-600">O(N+M) â€” ë“±í˜¸(=)ë§Œ ê°€ëŠ¥</div></div>
      <div class="grid grid-cols-2 gap-3 mt-3"><div class="info-card green"><p class="text-xs"><strong>ì¥ì :</strong> ëŒ€ëŸ‰ ë“±ê°€ ì¡°ì¸ ìµœê³  ì„±ëŠ¥, ì¸ë±ìŠ¤ ë¶ˆí•„ìš”, ë³‘ë ¬ ì í•©</p></div><div class="info-card red"><p class="text-xs"><strong>ë‹¨ì :</strong> ë“±í˜¸ë§Œ ê°€ëŠ¥, Temp Spill ì‹œ ì„±ëŠ¥ ê¸‰ê°</p></div></div>
    </div>
  </div>
  <div class="bg-white rounded-xl shadow-sm border p-6">
    <h3 class="font-bold text-gray-900 mb-3">ğŸ“‹ 3ëŒ€ ì¡°ì¸ ì¢…í•© ë¹„êµí‘œ</h3>
    <div class="overflow-x-auto"><table class="w-full text-xs border-collapse"><thead><tr class="bg-indigo-600 text-white"><th class="p-2">ê¸°ì¤€</th><th class="p-2">NL Join</th><th class="p-2">Sort Merge</th><th class="p-2">Hash Join</th></tr></thead><tbody><tr><td class="p-2 border font-bold">ì•Œê³ ë¦¬ì¦˜</td><td class="p-2 border">ì¤‘ì²© ë°˜ë³µ</td><td class="p-2 border">ì •ë ¬+ë³‘í•©</td><td class="p-2 border">ë¹Œë“œ+í”„ë¡œë¸Œ</td></tr><tr class="bg-gray-50"><td class="p-2 border font-bold">ë³µì¡ë„</td><td class="p-2 border">O(NÃ—M)/O(NÃ—logM)</td><td class="p-2 border">O(NlogN+MlogM)</td><td class="p-2 border">O(N+M)</td></tr><tr><td class="p-2 border font-bold">ì¡°ì¸ ì¡°ê±´</td><td class="p-2 border">ë“±í˜¸+ë²”ìœ„</td><td class="p-2 border">ë“±í˜¸+ë²”ìœ„</td><td class="p-2 border"><strong>ë“±í˜¸ë§Œ</strong></td></tr><tr class="bg-gray-50"><td class="p-2 border font-bold">ìµœì  ë°ì´í„°ëŸ‰</td><td class="p-2 border">ì†ŒëŸ‰(OLTP)</td><td class="p-2 border">ì¤‘~ëŒ€ëŸ‰</td><td class="p-2 border">ëŒ€ëŸ‰(DW)</td></tr><tr><td class="p-2 border font-bold">ì¸ë±ìŠ¤ ì˜ì¡´</td><td class="p-2 border">ë†’ìŒ</td><td class="p-2 border">ë‚®ìŒ</td><td class="p-2 border">ì—†ìŒ</td></tr><tr class="bg-gray-50"><td class="p-2 border font-bold">ë©”ëª¨ë¦¬</td><td class="p-2 border">ìµœì†Œ</td><td class="p-2 border">ì •ë ¬ ì˜ì—­</td><td class="p-2 border">í•´ì‹œ ì˜ì—­</td></tr><tr><td class="p-2 border font-bold">I/O</td><td class="p-2 border">ëœë¤</td><td class="p-2 border">ìˆœì°¨</td><td class="p-2 border">ìˆœì°¨</td></tr><tr class="bg-gray-50"><td class="p-2 border font-bold">ë¶€ë¶„ ë²”ìœ„</td><td class="p-2 border">ê°€ëŠ¥</td><td class="p-2 border">ë¶ˆê°€</td><td class="p-2 border">ë¶ˆê°€</td></tr><tr><td class="p-2 border font-bold">ë³‘ë ¬ ì²˜ë¦¬</td><td class="p-2 border">ì œí•œì </td><td class="p-2 border">ê°€ëŠ¥</td><td class="p-2 border">ë§¤ìš° ì í•©</td></tr><tr class="bg-gray-50"><td class="p-2 border font-bold">CBO ì„ í˜¸</td><td class="p-2 border">ì†ŒëŸ‰+ì¸ë±ìŠ¤</td><td class="p-2 border">ëŒ€ëŸ‰+ë²”ìœ„</td><td class="p-2 border">ëŒ€ëŸ‰+ë“±ê°€</td></tr></tbody></table></div>
  </div>
</div>

<div id="hashjoin" style="display:none;" class="space-y-6">
  <h2 class="text-2xl font-bold text-gray-900 mb-6">ğŸ”¬ Hash Join ì‹¬í™” â€” Build/Probeì™€ Temp Spill</h2>
  <div class="info-card amber"><p class="font-bold text-amber-800 mb-2">ğŸ’¡ í•µì‹¬ ì›ì¹™</p><p class="text-sm text-amber-700">"<strong>ì‘ì€ ë†ˆì´ Build, í° ë†ˆì´ Probe</strong>" â€” Build Input í•´ì‹œ í…Œì´ë¸”ì´ PGA Hash Areaì— ì ì¬ë˜ì–´ì•¼ ìµœì  ì„±ëŠ¥.</p></div>
  <div class="bg-white rounded-xl shadow-sm border p-6">
    <h3 class="font-bold text-gray-900 mb-3">ğŸ“‹ Build/Probe Input ì„ ì • ê¸°ì¤€</h3>
    <div class="overflow-x-auto"><table class="w-full text-sm border-collapse"><thead><tr class="bg-indigo-600 text-white"><th class="p-3">ê¸°ì¤€</th><th class="p-3">Build Input (ì‘ì€ ìª½)</th><th class="p-3">Probe Input (í° ìª½)</th></tr></thead><tbody><tr><td class="p-3 border font-bold">í¬ê¸°</td><td class="p-3 border">ì‘ì€ í…Œì´ë¸”</td><td class="p-3 border">í° í…Œì´ë¸”</td></tr><tr class="bg-gray-50"><td class="p-3 border font-bold">ì—­í• </td><td class="p-3 border">ë©”ëª¨ë¦¬ì— ì „ì²´ ì ì¬</td><td class="p-3 border">ìˆœì°¨ ìŠ¤ìº”ë§Œ</td></tr><tr><td class="p-3 border font-bold">ì¹´ë””ë„ë¦¬í‹°</td><td class="p-3 border">ë‚®ìŒ</td><td class="p-3 border">ë†’ìŒ</td></tr><tr class="bg-gray-50"><td class="p-3 border font-bold">ì´ìœ </td><td class="p-3 border">í•´ì‹œ í…Œì´ë¸” ì‘ì•„ì•¼ ë©”ëª¨ë¦¬ íš¨ìœ¨</td><td class="p-3 border">í•œ ë²ˆë§Œ ìŠ¤ìº”</td></tr></tbody></table></div>
  </div>
  <div class="bg-white rounded-xl shadow-sm border p-6">
    <h3 class="font-bold text-gray-900 mb-3">ğŸ”„ Grace Hash Join (Temp Spill)</h3>
    <p class="text-sm text-gray-700 mb-4">Build Inputì´ Hash Area ì´ˆê³¼ â†’ Nê°œ íŒŒí‹°ì…˜ ë¶„í•  â†’ íŒŒí‹°ì…˜ ìŒë³„ ë©”ëª¨ë¦¬ ë‚´ Hash Join</p>
    <div class="arch-box"><p class="text-xs font-bold text-indigo-700 mb-3">Grace Hash Join ë™ì‘</p><div class="grid grid-cols-2 gap-4 mb-3"><div><p class="text-xs font-bold text-center mb-1">Build Input íŒŒí‹°ì…˜</p><div class="grid grid-cols-4 gap-1"><div class="arch-layer bg-amber-50 border-amber-200 text-xs p-1">P1</div><div class="arch-layer bg-amber-50 border-amber-200 text-xs p-1">P2</div><div class="arch-layer bg-amber-50 border-amber-200 text-xs p-1">P3</div><div class="arch-layer bg-amber-50 border-amber-200 text-xs p-1">P4</div></div><p class="text-xs text-center text-gray-500 mt-1">â†’ Temp ì €ì¥</p></div><div><p class="text-xs font-bold text-center mb-1">Probe Input íŒŒí‹°ì…˜</p><div class="grid grid-cols-4 gap-1"><div class="arch-layer bg-purple-50 border-purple-200 text-xs p-1">P1'</div><div class="arch-layer bg-purple-50 border-purple-200 text-xs p-1">P2'</div><div class="arch-layer bg-purple-50 border-purple-200 text-xs p-1">P3'</div><div class="arch-layer bg-purple-50 border-purple-200 text-xs p-1">P4'</div></div><p class="text-xs text-center text-gray-500 mt-1">â†’ Temp ì €ì¥</p></div></div><div class="bg-green-50 border border-green-200 rounded-lg p-3 text-center"><p class="text-xs font-bold text-green-800">[Join] íŒŒí‹°ì…˜ ìŒë³„ ë©”ëª¨ë¦¬ ë‚´ Hash Join</p><p class="text-xs text-green-700 mt-1">P1â†”P1' | P2â†”P2' | P3â†”P3' | P4â†”P4'</p></div></div>
    <div class="insight-box mt-3"><p class="text-sm text-amber-800"><strong>ì„±ëŠ¥ ì˜í–¥:</strong> ë©”ëª¨ë¦¬ ë‚´ ëŒ€ë¹„ 2~10ë°° ì €í•˜. Temp Tablespace ë””ìŠ¤í¬ I/Oê°€ ë³‘ëª©.</p></div>
  </div>
  <div class="bg-white rounded-xl shadow-sm border p-6">
    <h3 class="font-bold text-gray-900 mb-3">ğŸš€ ìµœì í™” ì „ëµ</h3>
    <div class="overflow-x-auto"><table class="w-full text-sm border-collapse"><thead><tr class="bg-indigo-600 text-white"><th class="p-2">ì „ëµ</th><th class="p-2">ë°©ë²•</th><th class="p-2">íš¨ê³¼</th></tr></thead><tbody><tr><td class="p-2 border font-bold">Hash Area í™•ëŒ€</td><td class="p-2 border">PGA_AGGREGATE_TARGET ì¦ê°€</td><td class="p-2 border">Spill ë°©ì§€</td></tr><tr class="bg-gray-50"><td class="p-2 border font-bold">Build ìµœì†Œí™”</td><td class="p-2 border">WHERE ì‚¬ì „ í•„í„°ë§</td><td class="p-2 border">í•´ì‹œ í…Œì´ë¸” ì¶•ì†Œ</td></tr><tr><td class="p-2 border font-bold">í†µê³„ ê°±ì‹ </td><td class="p-2 border">DBMS_STATS ìˆ˜ì§‘</td><td class="p-2 border">ì •í™•í•œ ì„ ì •</td></tr><tr class="bg-gray-50"><td class="p-2 border font-bold">ë³‘ë ¬ ì²˜ë¦¬</td><td class="p-2 border">PARALLEL íŒíŠ¸</td><td class="p-2 border">ì²˜ë¦¬ ì‹œê°„ ë‹¨ì¶•</td></tr><tr><td class="p-2 border font-bold">íŒŒí‹°ì…˜ í…Œì´ë¸”</td><td class="p-2 border">ì¡°ì¸ í‚¤ íŒŒí‹°ì…˜</td><td class="p-2 border">Partition Wise Join</td></tr></tbody></table></div>
    <div class="insight-box mt-4"><p class="text-sm text-amber-800"><strong>ğŸ’¡ ì‹¤ë¬´ íŒ:</strong> CBOê°€ Build/Probe ë°˜ëŒ€ ì„ ì • ì‹œ â†’ <code>/*+ SWAP_JOIN_INPUTS(í…Œì´ë¸”ëª…) */</code> íŒíŠ¸ë¡œ ê°•ì œ ì§€ì •.</p></div>
  </div>
</div>

<div id="textbook" style="display:none;" class="space-y-6">
  <h2 class="text-2xl font-bold text-gray-900 mb-6">ğŸ“– ì›ë¬¸ í•™ìŠµ</h2>
  <div class="bg-white rounded-xl shadow-sm border p-6 textbook-content" style="font-size:0.95rem;">
    <h3>ì œ1ì¥ ì˜µí‹°ë§ˆì´ì €ì˜ ë°œì „ ê³¼ì •ê³¼ CBO ë¹„ìš© ì‚°ì •</h3>
    <h4>1.1 ì˜µí‹°ë§ˆì´ì €ì˜ ê°œìš”</h4>
    <p>ì˜µí‹°ë§ˆì´ì €(Optimizer)ë€, SQL ì§ˆì˜ê°€ ì…ë ¥ë˜ì—ˆì„ ë•Œ <strong>ê°€ì¥ íš¨ìœ¨ì ì¸ ì‹¤í–‰ ê³„íš(Execution Plan)ì„ ê²°ì •</strong>í•˜ëŠ” DBMSì˜ í•µì‹¬ êµ¬ì„±ìš”ì†Œì´ë‹¤. SQLì€ ì„ ì–¸ì (Declarative) ì–¸ì–´ë¡œ, ì‚¬ìš©ìëŠ” "ë¬´ì—‡ì„(WHAT)" ì›í•˜ëŠ”ì§€ë§Œ ëª…ì‹œí•˜ê³  "ì–´ë–»ê²Œ(HOW)" ì²˜ë¦¬í• ì§€ëŠ” DBMSê°€ ê²°ì •í•œë‹¤.</p>
    <h4>1.2 RBO(Rule-Based Optimizer)</h4>
    <p>RBOëŠ” <strong>ì‚¬ì „ì— ì •ì˜ëœ ìš°ì„ ìˆœìœ„ ê·œì¹™(Rule)</strong>ì— ë”°ë¼ ì‹¤í–‰ ê³„íšì„ ê²°ì •í•˜ëŠ” ë°©ì‹ì´ë‹¤. Oracle RBOëŠ” 15ë‹¨ê³„ ì ‘ê·¼ ê²½ë¡œ ìš°ì„ ìˆœìœ„ë¥¼ ì‚¬ìš©í•˜ì˜€ìœ¼ë‚˜, ë°ì´í„° íŠ¹ì„±ì„ ë°˜ì˜í•˜ì§€ ëª»í•´ 10gë¶€í„° ë¹„ê¶Œì¥, 12cë¶€í„° ì™„ì „ íê¸°ë˜ì—ˆë‹¤.</p>
    <h4>1.3 CBO(Cost-Based Optimizer)</h4>
    <p>CBOëŠ” <strong>í†µê³„ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê° ì‹¤í–‰ ê³„íšì˜ ì˜ˆìƒ ë¹„ìš©(Cost)ì„ ì‚°ì¶œí•˜ê³ , ìµœì†Œ ë¹„ìš©ì˜ ê³„íšì„ ì„ íƒ</strong>í•˜ëŠ” ë°©ì‹ì´ë‹¤. ë¹„ìš© ì‚°ì • 5ëŒ€ ìš”ì†Œ: ì¹´ë””ë„ë¦¬í‹°, ì„ íƒë„, I/O ë¹„ìš©, CPU ë¹„ìš©, ë„¤íŠ¸ì›Œí¬ ë¹„ìš©.</p>
    <hr>
    <h3>ì œ2ì¥ 3ëŒ€ ì¡°ì¸ ê¸°ë²• ì•Œê³ ë¦¬ì¦˜ ë¹„êµ</h3>
    <h4>2.1 Nested Loop Join</h4>
    <p>ì™¸ë¶€ í…Œì´ë¸”ì˜ ê° í–‰ì— ëŒ€í•´ ë‚´ë¶€ í…Œì´ë¸”ì„ ë°˜ë³µ íƒìƒ‰. O(NÃ—M) / O(NÃ—logM). ì†ŒëŸ‰ ë°ì´í„°, OLTPì— ì í•©.</p>
    <h4>2.2 Sort Merge Join</h4>
    <p>ì–‘ìª½ ì •ë ¬ í›„ ë³‘í•©. O(NlogN+MlogM+N+M). ë²”ìœ„ ì¡°ê±´ ê°€ëŠ¥. ëŒ€ëŸ‰ ë°ì´í„°ì— ìœ ë¦¬.</p>
    <h4>2.3 Hash Join</h4>
    <p>Build Inputìœ¼ë¡œ í•´ì‹œ í…Œì´ë¸” ìƒì„±, Probe Input ìˆœì°¨ ìŠ¤ìº” ë§¤ì¹­. O(N+M). ë“±í˜¸(=)ë§Œ ê°€ëŠ¥.</p>
    <hr>
    <h3>ì œ3ì¥ Hash Join ì‹¬í™” â€” Build/Probe Inputê³¼ Temp Spill</h3>
    <h4>3.1 2ë‹¨ê³„ í”„ë¡œì„¸ìŠ¤</h4>
    <p>[1ë‹¨ê³„] Build Phase: ì‘ì€ í…Œì´ë¸”ë¡œ ì¸ë©”ëª¨ë¦¬ í•´ì‹œ í…Œì´ë¸” êµ¬ì¶•. [2ë‹¨ê³„] Probe Phase: í° í…Œì´ë¸” ìˆœì°¨ ìŠ¤ìº”í•˜ë©° í•´ì‹œ í…Œì´ë¸” íƒìƒ‰.</p>
    <h4>3.2 Build/Probe ì„ ì • ê¸°ì¤€</h4>
    <p>"ì‘ì€ ë†ˆì´ Build, í° ë†ˆì´ Probe". í•´ì‹œ í…Œì´ë¸”ì´ PGA Hash Areaì— ì ì¬ë˜ì–´ì•¼ ìµœì  ì„±ëŠ¥.</p>
    <h4>3.3 Grace Hash Join</h4>
    <p>Build Inputì´ Hash Area ì´ˆê³¼ ì‹œ ì–‘ìª½ì„ Nê°œ íŒŒí‹°ì…˜ìœ¼ë¡œ ë¶„í• , Temp Tablespaceì— ì €ì¥ í›„ íŒŒí‹°ì…˜ ìŒë³„ ë©”ëª¨ë¦¬ ë‚´ Hash Join ìˆ˜í–‰. 2~10ë°° ì„±ëŠ¥ ì €í•˜.</p>
  </div>
</div>

<div id="script" style="display:none;" class="space-y-6">
  <h2 class="text-2xl font-bold text-gray-900 mb-4">ğŸ¬ ë©˜í†  ê°•ì˜ ìŠ¤í¬ë¦½íŠ¸</h2>
  <div class="bg-amber-50 border border-amber-200 rounded-xl p-6 mb-6"><p class="text-amber-800 text-sm mb-1 font-medium">ğŸ“‹ ZIP-UP ì‹¬í™”ë°˜ ê°•ì˜ìš© | ì•½ 20ë¶„ ë¶„ëŸ‰</p><p class="text-amber-600 text-xs">ë³¸ ìŠ¤í¬ë¦½íŠ¸ëŠ” ë©˜í†  ì „ìš©ì´ë©°, ?mentor=true íŒŒë¼ë¯¸í„°ë¡œë§Œ í‘œì‹œë©ë‹ˆë‹¤.</p></div>
  <div class="bg-white rounded-xl shadow-sm border p-6 space-y-5 text-gray-700 leading-relaxed textbook-content" style="font-size:0.97rem;">
    <p>ì•ˆë…•í•˜ì„¸ìš”, ì—¬ëŸ¬ë¶„. ì˜¤ëŠ˜ì€ ë°ì´í„°ë² ì´ìŠ¤ì˜ ê½ƒì´ë¼ í•  ìˆ˜ ìˆëŠ” ì˜µí‹°ë§ˆì´ì €ì™€ ì¡°ì¸ ê¸°ë²•ì„ ë‹¤ë¤„ë³¼ ê±´ë°ìš”. ì´ í† í”½ì€ DB ì¶œì œ ì˜ì—­ì—ì„œ ë‹¨ê³¨ ì£¼ì œì´ê³ , ì‹¤ë¬´ ê²½í—˜ì„ ë‹µì•ˆì— ë…¹ì—¬ë‚´ê¸° ì¢‹ì€ í† í”½ì´ì—ìš”.</p>
    <p>ì†Œë¬¸ì œ êµ¬ì¡°: ì†Œë¬¸ì œ 1ì€ ì˜µí‹°ë§ˆì´ì €(RBOâ†’CBO), ì†Œë¬¸ì œ 2ëŠ” 3ëŒ€ ì¡°ì¸ ë¹„êµ, ì†Œë¬¸ì œ 3ì€ Hash Join ì‹¬í™”. <strong>"ìµœì í™” ì „ëµ â†’ ì¡°ì¸ ë¹„êµ â†’ Hash Join ì‹¬í™”"</strong> êµ¬ì¡°ì…ë‹ˆë‹¤.</p>
    <hr class="my-4 border-gray-200">
    <p>ì†Œë¬¸ì œ 1. RBOëŠ” ê³ ì • ê·œì¹™ìœ¼ë¡œ ì‹¤í–‰ ê³„íšì„ ì •í•˜ì§€ë§Œ, ë°ì´í„° íŠ¹ì„±ì„ ë¬´ì‹œí•´ìš”. CBOëŠ” í†µê³„ ê¸°ë°˜ìœ¼ë¡œ ë¹„ìš©ì„ ê³„ì‚°. 5ëŒ€ ìš”ì†Œë¥¼ <span class="highlight">"ì¹´ì„ ì•„ì”¨ë„¤"</span>ë¡œ ì™¸ìš°ì„¸ìš”. ì¤‘ìš”í•œ ê±´ í†µê³„ í’ˆì§ˆì´ì—ìš”.</p>
    <hr class="my-4 border-gray-200">
    <p>ì†Œë¬¸ì œ 2ëŠ” 30% ë¹„ì¤‘ìœ¼ë¡œ ê°€ì¥ ì»¤ìš”. NL Joinì€ ì´ì¤‘ ë£¨í”„, Sort MergeëŠ” ì •ë ¬+ë³‘í•©, Hash Joinì€ Build+Probe. ë¹„êµí‘œ 10ê°œ ê¸°ì¤€ì´ í•µì‹¬ì´ì—ìš”. <span class="highlight">"ë„¤ì†Œí•´"</span>ë¡œ ê¸°ì–µí•˜ì„¸ìš”.</p>
    <hr class="my-4 border-gray-200">
    <p>ì†Œë¬¸ì œ 3. <strong>"ì‘ì€ ë†ˆì´ Build, í° ë†ˆì´ Probe"</strong> â€” <span class="highlight">"ë¹Œí”„"</span>ë¡œ ì™¸ìš°ì„¸ìš”. Temp Spill ë°œìƒ ì‹œ Grace Hash Joinì´ ì‘ë™. Oracleì—ì„œëŠ” SWAP_JOIN_INPUTS íŒíŠ¸ë¡œ ê°•ì œ ì§€ì • ê°€ëŠ¥.</p>
    <hr class="my-4 border-gray-200">
    <p>í•„ìˆ˜ ë„ì‹ 3ì¢…: 3ëŒ€ ì¡°ì¸ ë¹„êµí‘œ, Hash Join 2ë‹¨ê³„ë„, Grace Hash Join íŒŒí‹°ì…˜ ë„ì‹. <span class="highlight">"ì¹´ì„ ì•„ì”¨ë„¤"</span>, <span class="highlight">"ë„¤ì†Œí•´"</span>, <span class="highlight">"ë¹Œí”„"</span> â€” ì´ ì„¸ ë‘ë¬¸ìì–´ë©´ ë¼ˆëŒ€ê°€ ì¡í™ë‹ˆë‹¤!</p>
  </div>
</div>

<div id="quiz" style="display:none;" class="space-y-6">
  <h2 class="text-2xl font-bold text-gray-900 mb-6">ğŸ§  í€´ì¦ˆ & ì•”ê¸°</h2>
  <div class="bg-indigo-50 rounded-xl p-6 border border-indigo-100 mb-8">
      <div class="flex items-center justify-between mb-4"><h3 class="font-bold text-indigo-900 text-lg flex items-center"><span class="mr-2">ğŸ§ </span> AI ì‹¤ì „ ë¬¸ì œ ìƒì„±</h3><button onclick="generateQuiz()" id="btn-quiz-gen" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm font-medium shadow-sm transition-colors flex items-center gap-2"><span>âœ¨ ìƒˆë¡œìš´ ë¬¸ì œ ìƒì„±</span></button></div>
      <div id="quiz-loading" class="hidden py-8 text-center"><div class="typing-indicator flex justify-center mb-2"><span></span><span></span><span></span></div><p class="text-indigo-600 text-sm">AIê°€ ë¬¸ì œë¥¼ ì¶œì œí•˜ê³  ìˆìŠµë‹ˆë‹¤...</p></div>
      <div id="quiz-container" class="hidden space-y-4"><div class="bg-white p-5 rounded-lg shadow-sm border border-indigo-100"><div class="flex items-start gap-2 mb-4"><span id="quiz-type-badge" class="bg-indigo-100 text-indigo-800 text-xs font-bold px-2 py-1 rounded whitespace-nowrap mt-1">ê°ê´€ì‹</span><p id="quiz-question" class="font-bold text-gray-800 text-lg"></p></div><div id="quiz-options" class="space-y-2"></div><div id="quiz-input-area" class="hidden mt-4"><div class="flex gap-2"><input type="text" id="quiz-answer-input" placeholder="ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" class="flex-grow border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"><button onclick="checkShortAnswer()" id="btn-short-submit" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-bold">ì œì¶œ</button></div></div></div><div id="quiz-feedback" class="hidden bg-white p-5 rounded-lg border-l-4"></div></div>
      <div id="quiz-placeholder" class="text-center py-8 text-gray-500 border-2 border-dashed border-indigo-200 rounded-lg"><p>&#39;ìƒˆë¡œìš´ ë¬¸ì œ ìƒì„±&#39; ë²„íŠ¼ì„ ëˆŒëŸ¬ ì‹¤ë ¥ì„ ì ê²€í•´ë³´ì„¸ìš”.</p></div>
  </div>
  <div class="mb-8"><h3 class="text-lg font-bold text-gray-800 mb-4">ğŸ“Œ ì•”ê¸° ë…¸íŠ¸ â‘  ë‘ë¬¸ìì–´</h3><div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="bg-gradient-to-br from-indigo-50 to-blue-50 rounded-xl p-5 border border-indigo-200 text-center"><div class="text-3xl font-black text-indigo-600 mb-2">ì¹´ì„ ì•„ì”¨ë„¤</div><div class="text-sm text-gray-600 font-medium mb-2">CBO ë¹„ìš© ì‚°ì • 5ëŒ€ ìš”ì†Œ</div><div class="text-xs text-gray-500"><strong>ì¹´</strong>ë””ë„ë¦¬í‹°Â·<strong>ì„ </strong>íƒë„Â·<strong>ì•„</strong>ì´ì˜¤Â·<strong>ì”¨</strong>PUÂ·<strong>ë„¤</strong>íŠ¸ì›Œí¬</div></div><div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-5 border border-green-200 text-center"><div class="text-3xl font-black text-green-600 mb-2">ë„¤ì†Œí•´</div><div class="text-sm text-gray-600 font-medium mb-2">3ëŒ€ ì¡°ì¸ ê¸°ë²•</div><div class="text-xs text-gray-500"><strong>ë„¤</strong>ìŠ¤í‹°ë“œë£¨í”„Â·<strong>ì†Œ</strong>íŠ¸ë¨¸ì§€Â·<strong>í•´</strong>ì‹œì¡°ì¸</div></div><div class="bg-gradient-to-br from-purple-50 to-violet-50 rounded-xl p-5 border border-purple-200 text-center"><div class="text-3xl font-black text-purple-600 mb-2">ë¹Œí”„</div><div class="text-sm text-gray-600 font-medium mb-2">Hash Join 2ë‹¨ê³„</div><div class="text-xs text-gray-500"><strong>ë¹Œ</strong>ë“œ(Build)Â·<strong>í”„</strong>ë¡œë¸Œ(Probe)</div></div></div></div>
  <div class="mb-8"><h3 class="text-lg font-bold text-gray-800 mb-4">ğŸ“Œ ì•”ê¸° ë…¸íŠ¸ â‘¡ ê³¨ê²© ë‹µì•ˆ</h3><div class="overflow-x-auto"><table class="w-full text-sm border-collapse"><thead><tr class="bg-indigo-600 text-white"><th class="p-3 text-left rounded-tl-lg">êµ¬ê°„</th><th class="p-3 text-left">ë¹„ì¤‘</th><th class="p-3 text-left rounded-tr-lg">í•µì‹¬ ë‚´ìš©</th></tr></thead><tbody><tr class="bg-white border-b"><td class="p-3 font-bold text-indigo-700">ì„œë¡ </td><td class="p-3">10%</td><td class="p-3">SQL ì„ ì–¸ì  ì–¸ì–´ + ì˜µí‹°ë§ˆì´ì € ì—­í• </td></tr><tr class="bg-indigo-50 border-b"><td class="p-3 font-bold text-indigo-700">ì†Œë¬¸ì œ 1</td><td class="p-3">25%</td><td class="p-3">RBO+CBO(ì¹´ì„ ì•„ì”¨ë„¤)+ë¹„êµí‘œ</td></tr><tr class="bg-white border-b"><td class="p-3 font-bold text-indigo-700">ì†Œë¬¸ì œ 2</td><td class="p-3">30%</td><td class="p-3">NL/SM/Hash ë„ì‹+10ê°œ ë¹„êµí‘œ</td></tr><tr class="bg-indigo-50 border-b"><td class="p-3 font-bold text-indigo-700">ì†Œë¬¸ì œ 3</td><td class="p-3">25%</td><td class="p-3">Build/Probe+Grace Hash Join+ìµœì í™”</td></tr><tr class="bg-white"><td class="p-3 font-bold text-indigo-700 rounded-bl-lg">ê²°ë¡ </td><td class="p-3">10%</td><td class="p-3 rounded-br-lg">AI ììœ¨ ì˜µí‹°ë§ˆì´ì € ì „ë§</td></tr></tbody></table></div></div>
  <div class="mb-8"><h3 class="text-lg font-bold text-gray-800 mb-4">ğŸ“Œ ì•”ê¸° ë…¸íŠ¸ â‘¢ í•„ìˆ˜ ë„ì‹ & ì°¨ë³„í™”</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="info-card indigo"><h4 class="font-bold text-indigo-800 mb-2">ğŸ“ í•„ìˆ˜ ë„ì‹ 3ì¢…</h4><ol class="text-sm text-gray-700 space-y-1 list-decimal list-inside"><li><strong>3ëŒ€ ì¡°ì¸ ë¹„êµí‘œ</strong> â€” 10ê°œ ê¸°ì¤€</li><li><strong>Hash Join 2ë‹¨ê³„ ë™ì‘ë„</strong></li><li><strong>Grace Hash Join íŒŒí‹°ì…˜ ë„ì‹</strong></li></ol></div><div class="info-card purple"><h4 class="font-bold text-purple-800 mb-2">â­ ì°¨ë³„í™” í¬ì¸íŠ¸</h4><ul class="text-sm text-gray-700 space-y-1 list-disc list-inside"><li>Oracle RBO 15ë‹¨ê³„ ìš°ì„ ìˆœìœ„</li><li>CBO ë¹„ìš© ì‚°ì • ê³µì‹</li><li>Grace Hash Join ìƒì„¸</li><li>SWAP_JOIN_INPUTS íŒíŠ¸</li><li>ì •ê·œí™”/ë°˜ì •ê·œí™” íŠ¸ë ˆì´ë“œì˜¤í”„</li></ul></div></div></div>
  <div class="mb-6"><h3 class="text-lg font-bold text-gray-800 mb-4">ğŸ“– ì œ2ë¶€ ì•”ê¸° ìš”ì•½ ì „ì²´</h3><div class="bg-white rounded-xl shadow-sm border p-6 textbook-content" style="font-size:0.95rem;"><p class="text-sm text-gray-500 italic mb-4">ì‹œí—˜ ì§ì „ ìµœì¢… ì •ë¦¬ìš©</p><h4 class="font-bold text-gray-800 mb-2">í•œ ì¤„ ì •ì˜</h4><div class="def-box mb-4"><p class="text-gray-800">CBOëŠ” í†µê³„ ê¸°ë°˜ ë¹„ìš© ì‚°ì •ìœ¼ë¡œ ìµœì  ì‹¤í–‰ ê³„íšì„ ê²°ì •í•˜ë©°, 3ëŒ€ ì¡°ì¸(NL/SM/Hash) ì„ íƒì€ ë°ì´í„°ëŸ‰Â·ì¡°ì¸ ì¡°ê±´Â·ì¸ë±ìŠ¤ ìœ ë¬´ì— ë”°ë¼ ë‹¬ë¼ì§„ë‹¤.</p></div><h4 class="font-bold text-gray-800 mb-2">í•µì‹¬ í‚¤ì›Œë“œ ë§µ</h4><div class="bg-slate-50 rounded-lg border p-4 text-sm mb-4 space-y-2"><div><strong class="text-indigo-700">[ì˜µí‹°ë§ˆì´ì €]</strong></div><div class="pl-4">â”œâ”€ RBO: ê·œì¹™ ê¸°ë°˜, 15ë‹¨ê³„, ë°ì´í„° ë¬´ê´€</div><div class="pl-4">â””â”€ CBO: ë¹„ìš© ê¸°ë°˜, í†µê³„ ì˜ì¡´, ì¹´ì„ ì•„ì”¨ë„¤</div><div class="mt-2"><strong class="text-green-700">[3ëŒ€ ì¡°ì¸]</strong></div><div class="pl-4">â”œâ”€ NL: ì¤‘ì²© ë£¨í”„, O(NÃ—logM), ì†ŒëŸ‰+ì¸ë±ìŠ¤</div><div class="pl-4">â”œâ”€ SM: ì •ë ¬+ë³‘í•©, O(NlogN), ë²”ìœ„ ì¡°ê±´</div><div class="pl-4">â””â”€ Hash: ë¹Œë“œ+í”„ë¡œë¸Œ, O(N+M), ëŒ€ëŸ‰+ë“±í˜¸</div><div class="mt-2"><strong class="text-purple-700">[Hash Join ì‹¬í™”]</strong></div><div class="pl-4">â”œâ”€ Build: ì‘ì€ í…Œì´ë¸” â†’ í•´ì‹œ í…Œì´ë¸”</div><div class="pl-4">â”œâ”€ Probe: í° í…Œì´ë¸” â†’ ìˆœì°¨ ìŠ¤ìº”</div><div class="pl-4">â””â”€ Spill: ë©”ëª¨ë¦¬ ì´ˆê³¼ â†’ Grace Hash Join</div></div><h4 class="font-bold text-gray-800 mb-2">ë‘ë¬¸ìì–´ ì•”ê¸°ë²•</h4><div class="space-y-3 mb-4"><div class="bg-indigo-50 rounded-lg p-3 border-l-4 border-indigo-400"><p class="font-bold text-indigo-800">"ì¹´ì„ ì•„ì”¨ë„¤" â€” CBO ë¹„ìš© ì‚°ì • 5ëŒ€ ìš”ì†Œ</p><p class="text-sm text-gray-700">ì¹´ë””ë„ë¦¬í‹°Â·ì„ íƒë„Â·I/OÂ·CPUÂ·ë„¤íŠ¸ì›Œí¬</p></div><div class="bg-green-50 rounded-lg p-3 border-l-4 border-green-400"><p class="font-bold text-green-800">"ë„¤ì†Œí•´" â€” 3ëŒ€ ì¡°ì¸ ê¸°ë²•</p><p class="text-sm text-gray-700">NL JoinÂ·Sort MergeÂ·Hash Join</p></div><div class="bg-purple-50 rounded-lg p-3 border-l-4 border-purple-400"><p class="font-bold text-purple-800">"ë¹Œí”„" â€” Hash Join 2ë‹¨ê³„</p><p class="text-sm text-gray-700">Build(ë¹Œë“œ)Â·Probe(í”„ë¡œë¸Œ)</p></div></div></div></div>
</div>

<div class="chat-sidebar" id="chatSidebar">
  <div class="flex items-center justify-between p-4 border-b bg-indigo-600 text-white"><div class="flex items-center gap-2"><span class="text-xl">ğŸ¤–</span><h3 class="font-bold">AI íŠœí„°</h3></div><button onclick="toggleChat()" class="text-white hover:text-indigo-200 text-xl">&times;</button></div>
  <div id="chatMessages" class="flex-grow overflow-y-auto p-4 space-y-3"><div class="bg-indigo-50 rounded-lg p-3 text-sm text-indigo-800">ì•ˆë…•í•˜ì„¸ìš”! ì˜µí‹°ë§ˆì´ì €, ì¡°ì¸ ê¸°ë²•, Hash Joinì— ëŒ€í•´ ì§ˆë¬¸í•´ì£¼ì„¸ìš”.</div></div>
  <div class="p-4 border-t"><div class="flex gap-2"><input type="text" id="chatInput" placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”..." class="flex-grow border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500" onkeydown="if(event.key==='Enter')sendChat()"><button onclick="sendChat()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm font-medium">ì „ì†¡</button></div></div>
</div>
<div class="chat-fab" onclick="toggleChat()">ğŸ’¬</div>
<div id="settingsModal" class="fixed inset-0 bg-black bg-opacity-50 z-[1100] hidden flex items-center justify-center p-4">
  <div class="bg-white rounded-2xl shadow-xl max-w-md w-full p-6"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-bold text-gray-900">ğŸ”‘ API ì„¤ì •</h3><button onclick="toggleSettings()" class="text-gray-400 hover:text-gray-600 text-xl">&times;</button></div><div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-1">Gemini API Key</label><input type="password" id="apiKeyInput" placeholder="AIza..." class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"></div><div class="flex gap-2"><button onclick="saveApiKey()" class="flex-grow bg-indigo-600 hover:bg-indigo-700 text-white py-2 rounded-lg text-sm font-medium">ì €ì¥</button><button onclick="toggleSettings()" class="px-4 py-2 border border-gray-300 rounded-lg text-sm text-gray-600 hover:bg-gray-50">ì·¨ì†Œ</button></div><p class="text-xs text-gray-500">API KeyëŠ” ë¸Œë¼ìš°ì €ì— ë¡œì»¬ ì €ì¥ë˜ë©° ì™¸ë¶€ë¡œ ì „ì†¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p></div></div>
</div>

  </main>
  <footer class="text-center text-sm text-gray-400 py-8 mt-12 border-t">
    <p>ë°•êµìµPE (132íšŒ ì •ë³´ê´€ë¦¬ê¸°ìˆ ì‚¬, dr.code92@gmail.com)</p>
    <p class="mt-1">Copyright &copy; KPC ì •ë³´ê´€ë¦¬ê¸°ìˆ ì‚¬ ZIP-UP ì‹¬í™”ë°˜. All rights reserved.</p>
  </footer>
</div>
<script>
    var isMentorMode = new URLSearchParams(window.location.search).get('mentor') === 'true';
    var sections = ['overview','optimizer','joincompare','hashjoin','textbook','quiz'];
    if(isMentorMode){ sections.splice(5,0,'script'); document.getElementById('scriptTabBtn').style.display=''; }
    function navTo(id){ sections.forEach(function(s){var el=document.getElementById(s);if(el)el.style.display=s===id?'block':'none';}); document.querySelectorAll('.tab-btn').forEach(function(b){b.classList.remove('active');}); document.querySelectorAll('.tab-btn').forEach(function(b){if(b.getAttribute('onclick')&&b.getAttribute('onclick').includes("'"+id+"'"))b.classList.add('active');}); window.scrollTo({top:0,behavior:'smooth'}); }
    document.querySelectorAll('.tech-block .header, .strategy-card .s-header').forEach(function(h){ h.addEventListener('click',function(){this.parentElement.classList.toggle('open');}); });
    function getApiKey(){return localStorage.getItem('geminiKey')||localStorage.getItem('gemini_api_key')||'';}
    function saveApiKey(){var k=document.getElementById('apiKeyInput').value.trim();if(k){localStorage.setItem('geminiKey',k);localStorage.setItem('gemini_api_key',k);alert('\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4.');toggleSettings();}else{alert('API Key\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.');}}
    function toggleSettings(){var m=document.getElementById('settingsModal');m.classList.toggle('hidden');if(!m.classList.contains('hidden')){document.getElementById('apiKeyInput').value=getApiKey();}}
    function toggleChat(){document.getElementById('chatSidebar').classList.toggle('open');}
    async function sendChat(){var k=getApiKey();if(!k){alert('API Key\ub97c \uba3c\uc800 \uc124\uc815\ud574\uc8fc\uc138\uc694.');toggleSettings();return;}var input=document.getElementById('chatInput');var msg=input.value.trim();if(!msg)return;input.value='';var box=document.getElementById('chatMessages');box.innerHTML+='<div class="bg-gray-100 rounded-lg p-3 text-sm text-gray-800 ml-8">'+msg+'<\/div>';box.innerHTML+='<div id="chatLoading" class="typing-indicator flex mb-2"><span><\/span><span><\/span><span><\/span><\/div>';box.scrollTop=box.scrollHeight;try{var sysPrompt="\ub2f9\uc2e0\uc740 \uc815\ubcf4\uad00\ub9ac\uae30\uc220\uc0ac \uc2dc\ud5d8 \uba58\ud1a0\uc785\ub2c8\ub2e4. '\uc635\ud2f0\ub9c8\uc774\uc800(RBO/CBO), \uc870\uc778 \uae30\ubc95, Hash Join' \uad00\ub828 \uc9c8\ubb38\uc5d0 \uc804\ubb38\uc801\uc73c\ub85c \ub2f5\ubcc0\ud574\uc8fc\uc138\uc694. 300\uc790 \uc774\ub0b4.";var r=await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-3-pro-preview:generateContent?key='+k,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({contents:[{role:'user',parts:[{text:sysPrompt+"\n\n\uc9c8\ubb38: "+msg}]}]})});var d=await r.json();var reply=d.candidates[0].content.parts[0].text;document.getElementById('chatLoading').remove();box.innerHTML+='<div class="bg-indigo-50 rounded-lg p-3 text-sm text-indigo-800 mr-8">'+marked.parse(reply)+'<\/div>';}catch(e){document.getElementById('chatLoading').remove();box.innerHTML+='<div class="bg-red-50 rounded-lg p-3 text-sm text-red-600">\uc624\ub958: '+e.message+'<\/div>';}box.scrollTop=box.scrollHeight;}

    var geminiKey=(typeof getApiKey==='function')?(getApiKey()||''):(localStorage.getItem('geminiKey')||localStorage.getItem('gemini_api_key')||'');
    var quizTypeHistory=[];var currentQuizData=null;
    var quizTopics=[
        {category:"RBO \uaddc\uce59 \uae30\ubc18",keywords:"RBO, Rule-Based, \uc6b0\uc120\uc21c\uc704, 15\ub2e8\uacc4, ROWID, Full Table Scan"},
        {category:"CBO \ube44\uc6a9 \uae30\ubc18",keywords:"CBO, Cost-Based, \uce74\ub514\ub110\ub9ac\ud2f0, \uc120\ud0dd\ub3c4, I/O, \ud1b5\uacc4, \ud788\uc2a4\ud1a0\uadf8\ub7a8"},
        {category:"RBO vs CBO",keywords:"\uaddc\uce59 vs \ube44\uc6a9, \uc778\ub371\uc2a4, \uc870\uc778 \uc21c\uc11c, \ud78c\ud2b8"},
        {category:"Nested Loop Join",keywords:"NL Join, Driving Table, Inner, \uc778\ub371\uc2a4, \ubd80\ubd84 \ubc94\uc704, OLTP"},
        {category:"Sort Merge Join",keywords:"\uc815\ub82c \ubcd1\ud569, Sort Area, \ubc94\uc704 \uc870\uac74, BETWEEN"},
        {category:"Hash Join \uae30\ubcf8",keywords:"Hash Join, Build, Probe, \ud574\uc2dc \ud14c\uc774\ube14, \ub4f1\ud638, O(N+M)"},
        {category:"Hash Join \uc2ec\ud654",keywords:"Grace Hash Join, Temp Spill, \ud30c\ud2f0\uc158, PGA, SWAP_JOIN_INPUTS"},
        {category:"3\ub300 \uc870\uc778 \ube44\uad50",keywords:"NL, Sort Merge, Hash, \uc2dc\uac04 \ubcf5\uc7a1\ub3c4, \ubcd1\ub82c \ucc98\ub9ac, CBO \uc120\ud638"}
    ];
    async function generateQuiz(){geminiKey=(typeof getApiKey==='function')?(getApiKey()||''):(localStorage.getItem('geminiKey')||localStorage.getItem('gemini_api_key')||'');if(!geminiKey){alert('API Key\ub97c \uba3c\uc800 \uc124\uc815\ud574\uc8fc\uc138\uc694.');toggleSettings();return;}var btn=document.getElementById('btn-quiz-gen');btn.disabled=true;btn.innerHTML='<span>\uc0dd\uc131 \uc911...</span>';document.getElementById('quiz-placeholder').classList.add('hidden');document.getElementById('quiz-container').classList.add('hidden');document.getElementById('quiz-loading').classList.remove('hidden');var isMC;var recent=quizTypeHistory.slice(-2);if(recent.length>=2&&recent[0]===recent[1]){isMC=!recent[1];}else{isMC=Math.random()>0.5;}quizTypeHistory.push(isMC);var selected=quizTopics[Math.floor(Math.random()*quizTopics.length)];var quizType=isMC?'\uac1d\uad00\uc2dd (4\uc9c0\uc120\ub2e4)':'\ub2e8\ub2f5\ud615';var format=isMC?'{"question":"\ubb38\uc81c","options":["A","B","C","D"],"correctIndex":0,"explanation":"\ud574\uc124"}':'{"question":"\ubb38\uc81c","correctAnswer":"\uc815\ub2f5","explanation":"\ud574\uc124"}';var prompt="\ub2e4\uc74c \uce74\ud14c\uace0\ub9ac\uc5d0 \ub300\ud55c "+quizType+" \ud034\uc988 1\ubb38\uc81c\ub97c \ub9cc\ub4dc\uc138\uc694.\n\uce74\ud14c\uace0\ub9ac: "+selected.category+"\n\uad00\ub828 \ud0a4\uc6cc\ub4dc: "+selected.keywords+"\n\uaddc\uce59: \ubc18\ub4dc\uc2dc \uc704 \uce74\ud14c\uace0\ub9ac\uc640 \ud0a4\uc6cc\ub4dc\uc5d0 \uc9c1\uc811 \uad00\ub828\ub41c \ubb38\uc81c\ub97c \ucd9c\uc81c\ud558\uc138\uc694.\nJSON \ud615\uc2dd\uc73c\ub85c \uc751\ub2f5: "+format;try{var r=await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-3-pro-preview:generateContent?key='+geminiKey,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({contents:[{parts:[{text:prompt}]}],generationConfig:{responseMimeType:"application/json"}})});var d=await r.json();var t=d.candidates[0].content.parts[0].text;t=t.replace(/```json\s*/gi,"").replace(/```\s*/g,"").trim();var depth=0,start=-1,end=-1;for(var i=0;i<t.length;i++){if(t[i]==='{'){if(depth===0)start=i;depth++;}else if(t[i]==='}'){depth--;if(depth===0&&start!==-1){end=i;break;}}}if(start===-1||end===-1)throw new Error("No JSON found");t=t.substring(start,end+1);t=t.replace(/[\x00-\x1F\x7F]/g,function(c){return c==='\n'||c==='\r'||c==='\t'?' ':'';});currentQuizData=JSON.parse(t);renderQuiz(isMC);}catch(e){document.getElementById('quiz-loading').classList.add('hidden');document.getElementById('quiz-placeholder').classList.remove('hidden');document.getElementById('quiz-placeholder').innerHTML='<p class="text-red-500">\ud034\uc988 \uc0dd\uc131 \uc624\ub958: '+e.message+'</p>';}btn.disabled=false;btn.innerHTML='<span>\u2728 \uc0c8\ub85c\uc6b4 \ubb38\uc81c \uc0dd\uc131</span>';}
    function renderQuiz(isMC){document.getElementById('quiz-loading').classList.add('hidden');document.getElementById('quiz-feedback').classList.add('hidden');document.getElementById('quiz-container').classList.remove('hidden');document.getElementById('quiz-type-badge').textContent=isMC?'\uac1d\uad00\uc2dd':'\ub2e8\ub2f5\ud615';document.getElementById('quiz-question').textContent=currentQuizData.question;var optDiv=document.getElementById('quiz-options');var inputDiv=document.getElementById('quiz-input-area');if(isMC){optDiv.classList.remove('hidden');inputDiv.classList.add('hidden');var h='';var letters=['A','B','C','D'];currentQuizData.options.forEach(function(opt,i){h+='<button onclick="checkMultipleChoice('+i+', this)" class="w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-indigo-50 hover:border-indigo-300 transition-all mb-2 flex items-center group"><span class="w-8 h-8 rounded-full bg-gray-100 group-hover:bg-indigo-100 flex items-center justify-center text-sm font-bold text-gray-500 group-hover:text-indigo-600 mr-3 flex-shrink-0">'+letters[i]+'</span><span class="text-sm text-gray-700">'+opt+'</span></button>';});optDiv.innerHTML=h;}else{optDiv.classList.add('hidden');inputDiv.classList.remove('hidden');document.getElementById('quiz-answer-input').value='';document.getElementById('quiz-answer-input').focus();}}
    function checkMultipleChoice(idx,btnEl){var correct=idx===currentQuizData.correctIndex;document.querySelectorAll('#quiz-options button').forEach(function(b,i){b.disabled=true;if(i===currentQuizData.correctIndex){b.classList.add('bg-green-50','border-green-400');b.querySelector('span:first-child').classList.add('bg-green-100','text-green-700');}else if(i===idx&&!correct){b.classList.add('bg-red-50','border-red-400');b.querySelector('span:first-child').classList.add('bg-red-100','text-red-700');}});showQuizFeedback(correct,currentQuizData.options[currentQuizData.correctIndex],currentQuizData.explanation);}
    async function checkShortAnswer(){geminiKey=(typeof getApiKey==='function')?(getApiKey()||''):(localStorage.getItem('geminiKey')||localStorage.getItem('gemini_api_key')||'');var ans=document.getElementById('quiz-answer-input').value.trim();if(!ans){alert('\ub2f5\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.');return;}var btn=document.getElementById('btn-short-submit');btn.disabled=true;btn.textContent='\ucc44\uc810 \uc911...';try{var gradingPrompt="\ub2f9\uc2e0\uc740 \uc815\ubcf4\uad00\ub9ac\uae30\uc220\uc0ac \uc2dc\ud5d8 \ucc44\uc810\uad00\uc785\ub2c8\ub2e4.\n\n\ubb38\uc81c: "+currentQuizData.question+"\n\ubaa8\ubc94 \uc815\ub2f5: "+currentQuizData.correctAnswer+"\n\uc0ac\uc6a9\uc790 \ub2f5\uc548: "+ans+"\n\n\ud310\uc815 \uae30\uc900: \ud575\uc2ec \uc758\ubbf8 \ub3d9\uc77c\ud558\uba74 \uc815\ub2f5, \uc57d\uc5b4/\ud480\ub124\uc784 \ubaa8\ub450 \uc778\uc815, \uc601\uc5b4/\ud55c\uae00 \ud63c\uc6a9 \uc778\uc815\n\nOutput JSON: {\"correct\":true/false,\"reason\":\"\ud310\uc815 \uc774\uc720\"}";var r=await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-3-pro-preview:generateContent?key='+geminiKey,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({contents:[{parts:[{text:gradingPrompt}]}],generationConfig:{responseMimeType:"application/json"}})});var d=await r.json();var gt=d.candidates[0].content.parts[0].text;gt=gt.replace(/```json\s*/gi,"").replace(/```\s*/g,"").trim();var gd=0,gs=-1,ge=-1;for(var i=0;i<gt.length;i++){if(gt[i]==='{'){if(gd===0)gs=i;gd++;}else if(gt[i]==='}'){gd--;if(gd===0&&gs!==-1){ge=i;break;}}}if(gs===-1||ge===-1)throw new Error("No JSON");gt=gt.substring(gs,ge+1);gt=gt.replace(/[\x00-\x1F\x7F]/g,function(c){return c==='\n'||c==='\r'||c==='\t'?' ':'';});var result=JSON.parse(gt);showQuizFeedback(result.correct,currentQuizData.correctAnswer,currentQuizData.explanation+(result.reason?' (AI: '+result.reason+')':''));}catch(e){var normalize=function(s){return s.replace(/\s/g,'').toLowerCase();};var correct=normalize(currentQuizData.correctAnswer).includes(normalize(ans))||normalize(ans).includes(normalize(currentQuizData.correctAnswer));showQuizFeedback(correct,currentQuizData.correctAnswer,currentQuizData.explanation+' (\ub85c\uceec \ucc44\uc810)');}btn.disabled=false;btn.textContent='\uc81c\ucd9c';}
    function showQuizFeedback(correct,answer,explanation){var fb=document.getElementById('quiz-feedback');fb.classList.remove('hidden','border-green-500','bg-green-50','border-red-500','bg-red-50');if(correct){fb.classList.add('border-green-500','bg-green-50');fb.innerHTML='<p class="font-bold text-green-700 mb-1">\u2705 \uc815\ub2f5\uc785\ub2c8\ub2e4!</p><p class="text-sm text-green-600">'+explanation+'</p>';}else{fb.classList.add('border-red-500','bg-red-50');fb.innerHTML='<p class="font-bold text-red-700 mb-1">\u274c \uc624\ub2f5\uc785\ub2c8\ub2e4.</p><p class="text-sm text-red-700 mb-1">\uc815\ub2f5: '+answer+'</p><p class="text-sm text-red-600">'+explanation+'</p>';}}
    document.addEventListener('keydown',function(e){if(e.key==='Enter'&&document.getElementById('quiz-answer-input')===document.activeElement){checkShortAnswer();}});
    var urlKey=new URLSearchParams(window.location.search).get('key');if(urlKey){localStorage.setItem('geminiKey',urlKey);localStorage.setItem('gemini_api_key',urlKey);}
    navTo('overview');
</script>
</body>
</html>