<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DevOps와 CALMS 프레임워크 — KPC ZIP-UP</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
body{font-family:'Noto Sans KR',sans-serif}
.def-box{background:linear-gradient(135deg,#eef2ff 0%,#e0e7ff 100%);border-left:4px solid #4f46e5;border-radius:8px;padding:1.25rem;margin-bottom:1rem}
.def-box p{color:#312e81;font-weight:500;margin:0;line-height:1.8}
.insight-box{background-color:#fffbeb;border:1px solid #fde68a;border-radius:8px;padding:1rem;margin:1rem 0}
.insight-box::before{content:'💡';margin-right:.5rem}
.textbook-content h3{font-size:1.25rem;font-weight:700;color:#1e3a8a;margin-top:1.5rem;margin-bottom:.75rem;border-left:4px solid #4f46e5;padding-left:.75rem}
.textbook-content h4{font-size:1.1rem;font-weight:600;color:#374151;margin-top:1rem;margin-bottom:.5rem}
.textbook-content p{margin-bottom:1rem;line-height:1.8;color:#4b5563}
.textbook-content ul{list-style-type:disc;padding-left:1.5rem;margin-bottom:1rem;color:#4b5563}
.textbook-content li{margin-bottom:.5rem;line-height:1.7}
.textbook-content table{width:100%;border-collapse:collapse;margin-bottom:1.5rem;font-size:.95rem}
.textbook-content th,.textbook-content td{border:1px solid #e5e7eb;padding:.75rem;text-align:left}
.textbook-content th{background-color:#f9fafb;font-weight:600;color:#1f2937}
.textbook-content .highlight{background-color:#eef2ff;color:#4338ca;font-weight:600;padding:0 4px;border-radius:4px}
.textbook-content pre{background-color:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:1rem;overflow-x:auto;margin-bottom:1rem;font-size:.85rem;line-height:1.6}
.textbook-content code{font-family:'Courier New',monospace}
.tech-block{transition:all .3s ease;cursor:pointer}
.tech-block:hover{transform:translateY(-2px);box-shadow:0 4px 6px -1px rgba(0,0,0,.1)}
.tech-block.selected{ring:2px;ring-color:#4f46e5;background-color:#eef2ff;border-color:#4f46e5}
.nav-item.active{border-bottom:2px solid #4f46e5;color:#4f46e5;font-weight:700}
.chat-msg{border-radius:12px;padding:10px 14px;margin-bottom:10px;max-width:85%;font-size:.95rem}
.chat-msg.user{background-color:#4f46e5;color:#fff;align-self:flex-end;margin-left:auto}
.chat-msg.ai{background-color:#f3f4f6;color:#1f2937;align-self:flex-start;border:1px solid #e5e7eb}
#chat-sidebar{transition:transform .3s ease-in-out}
#chat-sidebar.closed{transform:translateX(100%)}
#chat-sidebar.open{transform:translateX(0)}
.typing-indicator span{display:inline-block;width:6px;height:6px;background-color:#4f46e5;border-radius:50%;animation:typing 1.4s infinite ease-in-out both;margin:0 2px}
.typing-indicator span:nth-child(1){animation-delay:-.32s}
.typing-indicator span:nth-child(2){animation-delay:-.16s}
@keyframes typing{0%,80%,100%{transform:scale(0)}40%{transform:scale(1)}}
.chart-container{position:relative;width:100%;max-width:600px;margin-left:auto;margin-right:auto;height:350px;max-height:400px}
.no-scrollbar::-webkit-scrollbar{display:none}
.no-scrollbar{-ms-overflow-style:none;scrollbar-width:none}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.animate-fade-in{animation:fadeIn .4s ease-out forwards}
.strategy-card{cursor:pointer;transition:all .3s ease}
.strategy-card:hover{transform:translateY(-2px);box-shadow:0 4px 6px -1px rgba(0,0,0,.1)}
</style>
</head>
<body class="bg-stone-100 min-h-screen flex flex-col overflow-x-hidden">
<header class="bg-white shadow-sm sticky top-0 z-40">
<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
<div class="flex justify-between items-center pt-3 pb-1">
<div class="flex flex-col justify-center min-w-0">
<span class="text-[10px] sm:text-xs text-indigo-600 font-bold uppercase tracking-wider leading-tight">KPC 정보관리기술사 ZIP-UP 심화반</span>
<div class="flex items-center gap-2">
<span class="text-lg sm:text-xl font-bold text-gray-900 tracking-tight truncate">DevOps와 CALMS 프레임워크</span>
<span class="text-[10px] sm:text-xs bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded-full font-bold flex-shrink-0">2026</span>
</div>
</div>
</div>
<nav class="flex space-x-1 sm:space-x-4 overflow-x-auto no-scrollbar pb-1 items-center">
<button onclick="navTo('overview')" id="nav-overview" class="nav-item active px-1 pt-1 pb-2 text-xs sm:text-sm font-medium whitespace-nowrap">개요 및 개념</button>
<button onclick="navTo('calms')" id="nav-calms" class="nav-item px-1 pt-1 pb-2 text-xs sm:text-sm font-medium whitespace-nowrap">CALMS 5요소</button>
<button onclick="navTo('practice')" id="nav-practice" class="nav-item px-1 pt-1 pb-2 text-xs sm:text-sm font-medium whitespace-nowrap">실천 사례 & 연관</button>
<button onclick="navTo('textbook')" id="nav-textbook" class="nav-item px-1 pt-1 pb-2 text-xs sm:text-sm font-medium whitespace-nowrap">원문 학습</button>
<button onclick="navTo('script')" id="nav-script" class="nav-item px-1 pt-1 pb-2 text-xs sm:text-sm font-medium whitespace-nowrap hidden">🎬 강의 스크립트</button>
<button onclick="navTo('quiz')" id="nav-quiz" class="nav-item px-1 pt-1 pb-2 text-xs sm:text-sm font-medium whitespace-nowrap">퀴즈 & 암기</button>
<span class="w-px h-4 bg-gray-300 flex-shrink-0"></span>
<button onclick="toggleSettings()" class="flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium text-indigo-600 hover:bg-indigo-50 border border-indigo-200 hover:border-indigo-400 transition-all whitespace-nowrap flex-shrink-0" title="API Key 설정">🔑 API</button>
</nav>
</div>
</header>
<main class="flex-grow max-w-5xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-12 pb-24">

<div id="overview" class="space-y-8 animate-fade-in">
<div class="bg-white rounded-xl shadow-sm p-6 sm:p-8">
<h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">📌 정의</h2>
<div class="def-box">
<p><strong>DevOps</strong>는 개발(Development)과 운영(Operations)의 조직적·기술적 융합을 통해 비즈니스 가치의 지속적이고 빠른 전달을 실현하는 문화적·기술적 접근법이다.</p>
</div>
<div class="def-box">
<p><strong>CALMS 프레임워크</strong>는 DevOps의 성공적 도입을 위한 5대 핵심 요소(Culture, Automation, Lean, Measurement, Sharing)를 체계화한 프레임워크로, Jez Humble과 DevOps 커뮤니티가 정립하였다.</p>
</div>
<p class="text-gray-600 leading-relaxed mt-4">DevOps는 단순한 도구 도입이 아닌 <strong>문화적 전환</strong>입니다. 개발팀의 "빠르게 배포하자"와 운영팀의 "안정적으로 유지하자"라는 상충된 목표를 하나로 합치는 것이 핵심이며, CALMS는 이를 체계적으로 실현하는 프레임워크입니다.</p>
</div>

<div class="bg-white rounded-xl shadow-sm p-6 sm:p-8">
<h2 class="text-xl font-bold text-gray-900 mb-6 flex items-center gap-2">🔍 배경 — "The Wall of Confusion"</h2>
<p class="text-gray-600 leading-relaxed mb-4">2009년 Patrick Debois가 DevOpsDays에서 처음 사용한 용어로, 전통적 IT 조직의 개발-운영 간 사일로(Silo) 문제를 해결하기 위해 등장하였습니다.</p>
<div class="overflow-x-auto mb-4">
<table class="w-full border-collapse text-sm">
<thead><tr class="bg-gray-50"><th class="border border-gray-200 px-4 py-3 text-left">개발팀 목표</th><th class="border border-gray-200 px-4 py-3 text-left">운영팀 목표</th><th class="border border-gray-200 px-4 py-3 text-left">충돌 지점</th></tr></thead>
<tbody>
<tr><td class="border border-gray-200 px-4 py-3">빠른 기능 배포</td><td class="border border-gray-200 px-4 py-3">시스템 안정성 유지</td><td class="border border-gray-200 px-4 py-3">변경 빈도 vs 안정성</td></tr>
<tr><td class="border border-gray-200 px-4 py-3">새로운 기술 도입</td><td class="border border-gray-200 px-4 py-3">검증된 기술 유지</td><td class="border border-gray-200 px-4 py-3">혁신 vs 보수</td></tr>
<tr><td class="border border-gray-200 px-4 py-3">코드 완성 시 완료</td><td class="border border-gray-200 px-4 py-3">운영 안정성까지 책임</td><td class="border border-gray-200 px-4 py-3">책임 범위 갈등</td></tr>
<tr><td class="border border-gray-200 px-4 py-3">Sprint 단위 개발</td><td class="border border-gray-200 px-4 py-3">분기별 릴리스 주기</td><td class="border border-gray-200 px-4 py-3">배포 주기 불일치</td></tr>
</tbody></table>
</div>
<div class="insight-box"><span>Puppet Labs 보고서: DevOps 고성숙 조직은 <strong>배포 빈도 208배, 리드 타임 106배, 장애 복구 2,604배</strong> 빠른 성과를 보임</span></div>
</div>

<div class="bg-white rounded-xl shadow-sm p-6 sm:p-8">
<h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">📊 DORA 4대 지표 비교</h2>
<div class="chart-container"><canvas id="doraChart"></canvas></div>
<p class="text-xs text-gray-400 text-center mt-2">* 점수는 상대적 비교를 위한 예시 값입니다.</p>
</div>
</div>

<div id="calms" class="hidden space-y-8 animate-fade-in">
<div class="bg-white rounded-xl shadow-sm p-6 sm:p-8">
<h2 class="text-xl font-bold text-gray-900 mb-6 flex items-center gap-2">🔤 CALMS 5요소 상세</h2>
<div class="grid grid-cols-2 sm:grid-cols-5 gap-3 mb-6">
<div id="block-culture" class="tech-block selected border-2 border-indigo-300 rounded-xl p-3 text-center bg-indigo-50" onclick="updateCalmsDetail('culture')">
<div class="text-2xl mb-1">🤝</div><div class="font-bold text-indigo-800 text-sm">Culture</div><div class="text-xs text-indigo-600">문화</div>
</div>
<div id="block-automation" class="tech-block border-2 border-gray-200 rounded-xl p-3 text-center" onclick="updateCalmsDetail('automation')">
<div class="text-2xl mb-1">⚙️</div><div class="font-bold text-gray-800 text-sm">Automation</div><div class="text-xs text-gray-500">자동화</div>
</div>
<div id="block-lean" class="tech-block border-2 border-gray-200 rounded-xl p-3 text-center" onclick="updateCalmsDetail('lean')">
<div class="text-2xl mb-1">🔄</div><div class="font-bold text-gray-800 text-sm">Lean</div><div class="text-xs text-gray-500">린</div>
</div>
<div id="block-measurement" class="tech-block border-2 border-gray-200 rounded-xl p-3 text-center" onclick="updateCalmsDetail('measurement')">
<div class="text-2xl mb-1">📏</div><div class="font-bold text-gray-800 text-sm">Measurement</div><div class="text-xs text-gray-500">측정</div>
</div>
<div id="block-sharing" class="tech-block border-2 border-gray-200 rounded-xl p-3 text-center" onclick="updateCalmsDetail('sharing')">
<div class="text-2xl mb-1">📢</div><div class="font-bold text-gray-800 text-sm">Sharing</div><div class="text-xs text-gray-500">공유</div>
</div>
</div>
<div id="calms-detail-content">
<div class="border-l-4 border-indigo-500 bg-indigo-50 rounded-r-lg p-5"><h4 class="font-bold text-gray-900 text-lg mb-3">Culture — 문화</h4>
<p class="text-gray-700 leading-relaxed mb-3">개발팀과 운영팀의 사일로를 해체하고, <strong>공동 책임(Shared Responsibility)</strong>과 신뢰 기반의 협업 문화를 구축합니다.</p>
<p class="text-gray-700 leading-relaxed mb-3"><strong>핵심 원칙:</strong> Blameless Post-Mortem, 심리적 안전감(Psychological Safety), 공동 목표</p>
<p class="text-gray-700 leading-relaxed mb-3"><strong>실천 방안:</strong> 교차 기능 팀 구성, DevOps 챔피언 임명, 장애 시 프로세스 개선에 집중</p>
<div class="bg-red-50 border border-red-200 rounded-lg p-3 mt-3"><p class="text-sm text-red-800"><strong>⚠️ 안티패턴:</strong> "DevOps 팀" 별도 신설(사일로 재생산), 장애 시 개인 문책</p></div>
</div>
</div>
</div>

<!-- 5요소 상호 관계 시각화 -->
<div class="bg-white rounded-xl shadow-sm p-6 sm:p-8">
<h2 class="text-xl font-bold text-gray-900 mb-6 flex items-center gap-2">🔁 5요소 상호 강화 관계</h2>
<p class="text-gray-600 leading-relaxed mb-6">CALMS의 5가지 요소는 독립적이 아니라 <strong>상호 강화(Mutually Reinforcing)</strong> 관계입니다. Culture가 기반이고, 나머지 4요소가 선순환합니다.</p>

<!-- 순환 도식 (HTML/CSS) -->
<div class="max-w-lg mx-auto space-y-3">
<div class="bg-indigo-100 border-2 border-indigo-400 rounded-lg p-3 text-center"><span class="font-bold text-indigo-800">🤝 Culture (기반)</span><p class="text-xs text-indigo-600 mt-1">협업 문화가 정착되어야 자동화의 공동 소유가 가능</p></div>
<div class="text-center text-gray-400 text-lg">↓</div>
<div class="bg-green-100 border-2 border-green-400 rounded-lg p-3 text-center"><span class="font-bold text-green-800">⚙️ Automation</span><p class="text-xs text-green-600 mt-1">자동화된 파이프라인에서 DORA 지표를 자동 수집</p></div>
<div class="text-center text-gray-400 text-lg">↓</div>
<div class="bg-amber-100 border-2 border-amber-400 rounded-lg p-3 text-center"><span class="font-bold text-amber-800">📏 Measurement</span><p class="text-xs text-amber-600 mt-1">측정 데이터로 낭비를 식별하고 가치 흐름을 최적화</p></div>
<div class="text-center text-gray-400 text-lg">↓</div>
<div class="bg-purple-100 border-2 border-purple-400 rounded-lg p-3 text-center"><span class="font-bold text-purple-800">🔄 Lean</span><p class="text-xs text-purple-600 mt-1">지속적 개선(Kaizen)은 회고와 지식 공유를 통해 실현</p></div>
<div class="text-center text-gray-400 text-lg">↓</div>
<div class="bg-teal-100 border-2 border-teal-400 rounded-lg p-3 text-center"><span class="font-bold text-teal-800">📢 Sharing</span><p class="text-xs text-teal-600 mt-1">투명한 공유가 심리적 안전감과 신뢰 문화를 강화 → Culture로 회귀</p></div>
</div>

<div class="insight-box mt-6"><span><strong>핵심:</strong> Culture가 기반(Foundation)이고, 나머지 4요소가 그 위에 구축된다. 문화 없는 자동화는 "도구만 있는 DevOps"에 그치며, 이는 가장 흔한 DevOps 도입 실패 원인이다.</span></div>
</div>

<!-- DORA 4대 지표 -->
<div class="bg-white rounded-xl shadow-sm p-6 sm:p-8">
<h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">📏 DORA 4대 지표 — "배리변복"</h2>
<div class="overflow-x-auto">
<table class="w-full border-collapse text-sm">
<thead><tr class="bg-gray-50">
<th class="border border-gray-200 px-4 py-3 text-left font-semibold">지표</th>
<th class="border border-gray-200 px-4 py-3 text-left font-semibold">설명</th>
<th class="border border-gray-200 px-4 py-3 text-center font-semibold">엘리트 팀 기준</th>
</tr></thead>
<tbody>
<tr><td class="border border-gray-200 px-4 py-3 font-medium bg-indigo-50">배포 빈도 (DF)</td><td class="border border-gray-200 px-4 py-3">프로덕션 배포 주기</td><td class="border border-gray-200 px-4 py-3 text-center font-semibold text-indigo-700">일 1회 이상</td></tr>
<tr><td class="border border-gray-200 px-4 py-3 font-medium bg-green-50">리드 타임 (LT)</td><td class="border border-gray-200 px-4 py-3">커밋에서 프로덕션 배포까지 소요 시간</td><td class="border border-gray-200 px-4 py-3 text-center font-semibold text-green-700">1시간 미만</td></tr>
<tr><td class="border border-gray-200 px-4 py-3 font-medium bg-amber-50">변경 실패율 (CFR)</td><td class="border border-gray-200 px-4 py-3">배포 후 장애/롤백 비율</td><td class="border border-gray-200 px-4 py-3 text-center font-semibold text-amber-700">5% 미만</td></tr>
<tr><td class="border border-gray-200 px-4 py-3 font-medium bg-red-50">복구 시간 (MTTR)</td><td class="border border-gray-200 px-4 py-3">장애 발생 후 서비스 복구까지 시간</td><td class="border border-gray-200 px-4 py-3 text-center font-semibold text-red-700">1시간 미만</td></tr>
</tbody></table>
</div>
</div>
</div>

<div id="practice" class="hidden space-y-8 animate-fade-in">
<!-- 적용 사례 -->
<div class="bg-white rounded-xl shadow-sm p-6 sm:p-8">
<h2 class="text-xl font-bold text-gray-900 mb-6 flex items-center gap-2">🏢 적용 사례</h2>
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
<div class="border-l-4 border-red-500 bg-red-50 rounded-r-xl p-5">
<div class="font-bold text-red-800 text-lg mb-2">🎬 Netflix</div>
<p class="text-sm text-red-700 leading-relaxed mb-2">"Freedom and Responsibility" 문화 기반 DevOps 구현</p>
<ul class="text-sm text-red-700 space-y-1 list-disc pl-4">
<li><strong>Full Cycle Developer</strong> 모델: 코드→배포→운영 전 책임</li>
<li>하루 <strong>수십 회</strong> 프로덕션 배포</li>
<li><strong>Chaos Monkey</strong>로 장애 복원력 검증</li>
<li>연매출 338억 달러, <strong>700명</strong> 엔지니어가 운영</li>
</ul>
</div>
<div class="border-l-4 border-blue-500 bg-blue-50 rounded-r-xl p-5">
<div class="font-bold text-blue-800 text-lg mb-2">🏛️ 국민건강보험공단 (2021)</div>
<p class="text-sm text-blue-700 leading-relaxed mb-2">차세대 시스템 DevOps 도입 — 공공기관 사례</p>
<ul class="text-sm text-blue-700 space-y-1 list-disc pl-4">
<li>CI/CD 파이프라인 구축 + 자동화 테스트</li>
<li>배포 주기: <strong>분기별 → 월 2회</strong></li>
<li>릴리스 장애 <strong>40% 감소</strong></li>
<li><strong>DevSecOps</strong>: 보안 검사(SAST/DAST) 파이프라인 통합</li>
</ul>
</div>
</div>
</div>

<!-- 연관 이론 연결 -->
<div class="bg-white rounded-xl shadow-sm p-6 sm:p-8">
<h2 class="text-xl font-bold text-gray-900 mb-6 flex items-center gap-2">🔗 연관 이론 연결</h2>
<div class="space-y-4">
<div class="strategy-card bg-indigo-50 rounded-xl p-5 border border-indigo-200" onclick="toggleStrategy(this)">
<div class="strategy-summary">
<div class="font-bold text-indigo-800 text-lg mb-1">📐 애자일(Agile)과의 연결</div>
<p class="text-sm text-indigo-600">애자일이 개발 프로세스의 민첩성이라면, DevOps는... <span class="text-indigo-400">▼ 클릭</span></p>
</div>
<div class="strategy-detail hidden mt-3 bg-white rounded-lg p-4 border">
<p class="text-sm text-gray-700 leading-relaxed">애자일이 <strong>개발 프로세스의 민첩성</strong>에 초점이라면, DevOps는 <strong>개발과 운영 전체 가치 사슬의 최적화</strong>에 초점을 맞춘다. CALMS의 Lean 요소는 애자일의 핵심 원칙(반복 개발, 고객 피드백, 지속적 개선)과 직접 연결되며, DevOps는 애자일의 자연스러운 확장이다.</p>
</div>
</div>
<div class="strategy-card bg-green-50 rounded-xl p-5 border border-green-200" onclick="toggleStrategy(this)">
<div class="strategy-summary">
<div class="font-bold text-green-800 text-lg mb-1">🛡️ SRE(Site Reliability Engineering)와의 관계</div>
<p class="text-sm text-green-600">DevOps가 원칙이라면, SRE는... <span class="text-green-400">▼ 클릭</span></p>
</div>
<div class="strategy-detail hidden mt-3 bg-white rounded-lg p-4 border">
<p class="text-sm text-gray-700 leading-relaxed">Google의 Ben Treynor는 SRE를 "소프트웨어 엔지니어에게 운영 문제를 맡긴 결과"라 정의. DevOps가 <strong>문화와 원칙</strong>이라면, SRE는 이를 구현하는 <strong>구체적 실천법(Practice)</strong>이다. CALMS의 Measurement가 정의한 DORA 4대 지표는 SRE의 SLO/SLI/Error Budget과 직접 연계된다.</p>
</div>
</div>
<div class="strategy-card bg-purple-50 rounded-xl p-5 border border-purple-200" onclick="toggleStrategy(this)">
<div class="strategy-summary">
<div class="font-bold text-purple-800 text-lg mb-1">🏗️ 플랫폼 엔지니어링과의 연결</div>
<p class="text-sm text-purple-600">CALMS의 Automation과 Sharing을 제품화... <span class="text-purple-400">▼ 클릭</span></p>
</div>
<div class="strategy-detail hidden mt-3 bg-white rounded-lg p-4 border">
<p class="text-sm text-gray-700 leading-relaxed">플랫폼 엔지니어링은 CALMS의 Automation과 Sharing을 <strong>제품화(Productize)</strong>한 것이다. IDP를 통해 자동화를 셀프 서비스로 제공하고, 골든 패스를 통해 모범 사례를 공유하는 것은 CALMS 프레임워크의 구체적 실현이다.</p>
</div>
</div>
</div>
</div>

<!-- 발전 관계 시각화 -->
<div class="bg-white rounded-xl shadow-sm p-6 sm:p-8">
<h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">📈 DevOps 생태계 발전 관계</h2>
<div class="flex flex-col md:flex-row items-center gap-3 justify-center">
<div class="bg-indigo-100 border-2 border-indigo-400 rounded-lg px-6 py-4 text-center">
<div class="font-bold text-indigo-800">Agile</div>
<div class="text-xs text-indigo-600">개발 민첩성</div>
</div>
<div class="text-2xl text-gray-400 hidden md:block">→</div>
<div class="text-2xl text-gray-400 md:hidden">↓</div>
<div class="bg-green-100 border-2 border-green-400 rounded-lg px-6 py-4 text-center">
<div class="font-bold text-green-800">DevOps + CALMS</div>
<div class="text-xs text-green-600">전체 가치 사슬 최적화</div>
</div>
<div class="text-2xl text-gray-400 hidden md:block">→</div>
<div class="text-2xl text-gray-400 md:hidden">↓</div>
<div class="bg-purple-100 border-2 border-purple-400 rounded-lg px-6 py-4 text-center">
<div class="font-bold text-purple-800">SRE</div>
<div class="text-xs text-purple-600">구체적 실천법</div>
</div>
<div class="text-2xl text-gray-400 hidden md:block">→</div>
<div class="text-2xl text-gray-400 md:hidden">↓</div>
<div class="bg-amber-100 border-2 border-amber-400 rounded-lg px-6 py-4 text-center">
<div class="font-bold text-amber-800">플랫폼 엔지니어링</div>
<div class="text-xs text-amber-600">자동화의 제품화</div>
</div>
</div>
</div>
</div>

<div id="textbook" class="hidden space-y-8 animate-fade-in">
<div class="bg-white rounded-xl shadow-sm p-6 sm:p-8">
<h2 class="text-xl font-bold text-gray-900 mb-6 flex items-center gap-2">📖 원문 학습 — 제1부 상세 해설</h2>
<div class="textbook-content">

<h3>제1장 개요 및 배경</h3>

<h4>1.1 DevOps의 탄생 배경</h4>
<p>DevOps는 2009년 벨기에 겐트에서 열린 <strong>DevOpsDays</strong> 컨퍼런스에서 Patrick Debois가 처음 사용한 용어로, <strong>개발(Development)과 운영(Operations)의 조직적·기술적 융합</strong>을 의미한다. 이 개념이 등장한 배경에는 전통적 IT 조직의 <strong>개발-운영 간 사일로(Silo) 문제</strong>가 있었다.</p>
<p>전통적 IT 조직에서 개발팀은 "빠르게 새로운 기능을 배포"하는 것이 목표이고, 운영팀은 "시스템을 안정적으로 유지"하는 것이 목표였다. 이 두 목표는 본질적으로 충돌하며, <strong>"The Wall of Confusion"</strong>이라 불리는 조직 간 갈등을 만들었다.</p>
<table>
<thead><tr><th>개발팀 목표</th><th>운영팀 목표</th><th>충돌 지점</th></tr></thead>
<tbody>
<tr><td>빠른 기능 배포</td><td>시스템 안정성 유지</td><td>변경 빈도 vs 안정성</td></tr>
<tr><td>새로운 기술 도입</td><td>검증된 기술 유지</td><td>혁신 vs 보수</td></tr>
<tr><td>코드 완성 시 완료</td><td>운영 안정성까지 책임</td><td>책임 범위 갈등</td></tr>
<tr><td>Sprint 단위 개발</td><td>분기별 릴리스 주기</td><td>배포 주기 불일치</td></tr>
</tbody></table>
<p>Puppet Labs의 <strong>"State of DevOps Report 2023"</strong>에 따르면, DevOps를 성숙하게 도입한 조직은 그렇지 않은 조직 대비 <strong>배포 빈도 208배, 리드 타임 106배, 장애 복구 시간 2,604배</strong> 빠른 성과를 보인다.</p>

<h4>1.2 DevOps의 정의</h4>
<div class="def-box"><p>DevOps는 <strong>단순한 도구나 프로세스가 아닌, 조직 문화와 자동화, 지속적 학습을 결합한 통합적 접근법</strong>이다. Gartner는 DevOps를 "비즈니스 가치의 지속적이고 빠른 전달을 위해 개발과 운영을 협업시키는 문화적 전환"으로 정의하였다.</p></div>

<h3>제2장 CALMS 프레임워크의 핵심 개념</h3>

<h4>2.1 CALMS의 기원</h4>
<p>CALMS 프레임워크는 Jez Humble(『Continuous Delivery』저자)과 DevOps 커뮤니티가 DevOps의 성공적 도입을 위한 핵심 요소를 체계화한 것이다. <strong>C</strong>ulture, <strong>A</strong>utomation, <strong>L</strong>ean, <strong>M</strong>easurement, <strong>S</strong>haring의 5가지 요소로 구성된다.</p>
<p>CALMS는 DevOps의 <strong>성숙도 평가(Maturity Assessment)</strong> 도구로도 활용된다.</p>

<h4>2.2 5가지 요소 상세</h4>

<p><strong>[C] Culture — 문화</strong></p>
<table>
<thead><tr><th>항목</th><th>내용</th></tr></thead>
<tbody>
<tr><td><strong>정의</strong></td><td>개발팀과 운영팀의 사일로를 해체하고, 공동 책임(Shared Responsibility)과 신뢰 기반의 협업 문화를 구축하는 것</td></tr>
<tr><td><strong>핵심 원칙</strong></td><td>Blameless Post-Mortem(비난 없는 사후 분석), 심리적 안전감(Psychological Safety), 공동 목표(Shared Goals)</td></tr>
<tr><td><strong>실천 방안</strong></td><td>교차 기능 팀(Cross-Functional Team) 구성, DevOps 챔피언 임명, 장애 발생 시 프로세스 개선에 집중</td></tr>
<tr><td><strong>안티패턴</strong></td><td>"DevOps 팀" 별도 신설(사일로의 재생산), 운영팀에게만 야간 호출, 장애 시 개인 문책</td></tr>
</tbody></table>

<p><strong>[A] Automation — 자동화</strong></p>
<table>
<thead><tr><th>항목</th><th>내용</th></tr></thead>
<tbody>
<tr><td><strong>정의</strong></td><td>반복적 수작업을 자동화하여 일관성, 속도, 신뢰성을 확보하는 것</td></tr>
<tr><td><strong>핵심 영역</strong></td><td>CI/CD 파이프라인, IaC(Infrastructure as Code), 자동화 테스트, 구성 관리</td></tr>
<tr><td><strong>실천 방안</strong></td><td>Jenkins/GitHub Actions(CI/CD), Terraform/Ansible(IaC), Selenium/JUnit(자동 테스트), GitOps(ArgoCD)</td></tr>
<tr><td><strong>대표 지표</strong></td><td>배포 빈도(Deployment Frequency), 리드 타임(Lead Time for Changes)</td></tr>
</tbody></table>

<!-- 자동화 파이프라인 흐름 시각화 -->
<div class="flex flex-wrap items-center gap-2 my-4 text-xs">
<div class="bg-indigo-100 border border-indigo-300 rounded-lg px-3 py-2 font-semibold text-indigo-800">코드 커밋</div><span class="text-gray-400">→</span>
<div class="bg-blue-100 border border-blue-300 rounded-lg px-3 py-2 font-semibold text-blue-800">자동 빌드</div><span class="text-gray-400">→</span>
<div class="bg-green-100 border border-green-300 rounded-lg px-3 py-2 font-semibold text-green-800">자동 테스트</div><span class="text-gray-400">→</span>
<div class="bg-purple-100 border border-purple-300 rounded-lg px-3 py-2 font-semibold text-purple-800">자동 배포</div><span class="text-gray-400">→</span>
<div class="bg-amber-100 border border-amber-300 rounded-lg px-3 py-2 font-semibold text-amber-800">승인</div><span class="text-gray-400">→</span>
<div class="bg-red-100 border border-red-300 rounded-lg px-3 py-2 font-semibold text-red-800">프로덕션</div><span class="text-gray-400">→</span>
<div class="bg-teal-100 border border-teal-300 rounded-lg px-3 py-2 font-semibold text-teal-800">자동 모니터링</div>
</div>

<p><strong>[L] Lean — 린</strong></p>
<table>
<thead><tr><th>항목</th><th>내용</th></tr></thead>
<tbody>
<tr><td><strong>정의</strong></td><td>도요타 생산 방식(TPS)에서 유래한 린 사상을 소프트웨어 개발에 적용하여, 낭비를 제거하고 가치 흐름을 최적화하는 것</td></tr>
<tr><td><strong>핵심 원칙</strong></td><td>낭비 제거(Eliminate Waste), 흐름 최적화(Optimize Flow), 지속적 개선(Kaizen), 소규모 배치(Small Batch)</td></tr>
<tr><td><strong>실천 방안</strong></td><td>가치 흐름 매핑(Value Stream Mapping), WIP 제한(Kanban), 소규모 릴리스, MVP 접근</td></tr>
<tr><td><strong>7대 낭비</strong></td><td>미완성 작업, 불필요한 기능, 재학습, 핸드오프, 지연, 태스크 전환, 결함</td></tr>
</tbody></table>

<p><strong>[M] Measurement — 측정</strong></p>
<table>
<thead><tr><th>항목</th><th>내용</th></tr></thead>
<tbody>
<tr><td><strong>정의</strong></td><td>객관적 데이터를 기반으로 프로세스의 성과를 측정하고, 의사결정을 데이터 기반으로 전환하는 것</td></tr>
<tr><td><strong>DORA 4대 지표</strong></td><td>① 배포 빈도(DF) ② 변경 리드 타임(LT) ③ 변경 실패율(CFR) ④ 서비스 복구 시간(MTTR)</td></tr>
<tr><td><strong>실천 방안</strong></td><td>DORA 지표 대시보드 구축, SLO/SLI/Error Budget 정의(SRE 연계), A/B 테스트</td></tr>
<tr><td><strong>엘리트 팀 기준</strong></td><td>DF: 일 1회 이상, LT: 1시간 미만, CFR: 5% 미만, MTTR: 1시간 미만</td></tr>
</tbody></table>

<p><strong>[S] Sharing — 공유</strong></p>
<table>
<thead><tr><th>항목</th><th>내용</th></tr></thead>
<tbody>
<tr><td><strong>정의</strong></td><td>지식, 경험, 도구를 팀 간에 공유하여 조직 전체의 역량을 향상시키는 것</td></tr>
<tr><td><strong>핵심 원칙</strong></td><td>투명성(Transparency), 지식의 민주화(Knowledge Democratization), 피드백 루프</td></tr>
<tr><td><strong>실천 방안</strong></td><td>내부 기술 블로그/위키, Blameless Post-Mortem 공유, 길드(Guild)/CoP 운영, ChatOps</td></tr>
<tr><td><strong>안티패턴</strong></td><td>장애 보고서 감추기, 팀별 사일로화된 도구/지식, "그건 우리 팀 일 아니야"</td></tr>
</tbody></table>

<h3>제3장 5가지 요소의 상호 관계</h3>
<p>CALMS의 5가지 요소는 독립적이 아니라 <strong>상호 강화(Mutually Reinforcing)</strong> 관계이다.</p>
<table>
<thead><tr><th>연결 관계</th><th>설명</th></tr></thead>
<tbody>
<tr><td>Culture → Automation</td><td>협업 문화가 정착되어야 자동화 파이프라인의 공동 소유가 가능</td></tr>
<tr><td>Automation → Measurement</td><td>자동화된 파이프라인에서 DORA 지표를 자동 수집</td></tr>
<tr><td>Measurement → Lean</td><td>측정 데이터로 낭비를 식별하고 가치 흐름을 최적화</td></tr>
<tr><td>Lean → Sharing</td><td>린의 지속적 개선(Kaizen)은 회고와 지식 공유를 통해 실현</td></tr>
<tr><td>Sharing → Culture</td><td>투명한 공유가 심리적 안전감과 신뢰 문화를 강화</td></tr>
</tbody></table>
<div class="insight-box"><span><strong>핵심:</strong> Culture가 기반(Foundation)이고, 나머지 4요소가 그 위에 구축된다. 문화 없는 자동화는 "도구만 있는 DevOps"에 그치며, 이는 가장 흔한 DevOps 도입 실패 원인이다.</span></div>

<h3>제4장 적용 사례</h3>

<h4>4.1 Netflix — DevOps 문화의 선도적 구현</h4>
<p>Netflix는 <strong>"Freedom and Responsibility"</strong> 문화를 기반으로 DevOps를 구현하였다. 개발팀이 코드 작성부터 프로덕션 배포, 운영까지 전 책임을 지는 <strong>Full Cycle Developer</strong> 모델을 채택하였다. 결과적으로 하루 수십 회의 프로덕션 배포를 달성하고, <strong>Chaos Monkey</strong>를 통한 카오스 엔지니어링으로 장애 복원력을 검증한다. 연매출 약 338억 달러(2023) 규모의 서비스를 700명의 엔지니어가 운영하고 있다.</p>

<h4>4.2 국민건강보험공단 — 공공기관의 DevOps 도입 (2021)</h4>
<p>국민건강보험공단은 차세대 시스템 구축 시 DevOps를 도입하여, CI/CD 파이프라인을 구축하고 자동화 테스트를 적용하였다. 배포 주기가 분기별에서 <strong>월 2회</strong>로 단축되었으며, 릴리스 관련 장애가 <strong>40% 감소</strong>하였다. 공공기관 특성상 보안 규정 준수와 감사 대응이 중요하여, 자동화된 보안 검사(SAST/DAST)를 파이프라인에 통합하는 <strong>DevSecOps</strong> 접근을 채택하였다.</p>

<h3>제5장 연관 이론 연결</h3>

<h4>5.1 애자일(Agile)과의 연결</h4>
<p>애자일이 <strong>개발 프로세스의 민첩성</strong>에 초점을 맞춘다면, DevOps는 <strong>개발과 운영 전체 가치 사슬의 최적화</strong>에 초점을 맞춘다. CALMS의 Lean 요소는 애자일의 핵심 원칙과 직접 연결되며, DevOps는 애자일의 자연스러운 확장이다.</p>

<h4>5.2 SRE(Site Reliability Engineering)와의 관계</h4>
<p>Google의 Ben Treynor는 SRE를 "소프트웨어 엔지니어에게 운영 문제를 맡긴 결과"라 정의하였다. DevOps가 <strong>문화와 원칙</strong>이라면, SRE는 이를 구현하는 <strong>구체적 실천법(Practice)</strong>이다. CALMS의 Measurement가 정의한 DORA 4대 지표는 SRE의 SLO/SLI/Error Budget과 직접 연계된다.</p>

<h4>5.3 플랫폼 엔지니어링과의 연결</h4>
<p>플랫폼 엔지니어링은 CALMS의 Automation과 Sharing을 <strong>제품화(Productize)</strong>한 것이다. IDP를 통해 자동화를 셀프 서비스로 제공하고, 골든 패스를 통해 모범 사례를 공유하는 것은 CALMS 프레임워크의 구체적 실현이다.</p>

<h3>제6장 시험 출제 관점</h3>
<p><strong>기출 연계</strong>: DevOps는 소프트웨어공학 영역에서 매우 빈출되는 토픽이다. "DevOps의 정의와 특징", "CI/CD 파이프라인", "DevSecOps" 등이 1교시에서 출제되며, 2교시에서는 "DevOps 도입 전략과 CALMS 프레임워크", "기존 개발 방법론과의 비교" 등으로 출제된다.</p>
<p><strong>답안 구성 전략</strong>:</p>
<ul>
<li>서론(15%): 개발-운영 사일로 문제 → Wall of Confusion → DevOps 정의</li>
<li>본론(75%): CALMS 5요소 정의 + 각 요소별 실천 방안(비교표) + DORA 4대 지표 + 요소 간 상호 관계 + 사례</li>
<li>결론(10%): 애자일/SRE/플랫폼 엔지니어링 연결 + DevSecOps 확장</li>
</ul>

</div>
</div>
</div>

<div id="script" class="hidden space-y-8 animate-fade-in">
<div class="bg-white rounded-xl shadow-sm p-6 sm:p-8">
<div class="flex items-center gap-3 mb-4">
<span class="bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-xs font-bold">🔒 멘토 전용</span>
<h2 class="text-xl font-bold text-gray-900">🎬 강의 스크립트</h2>
</div>
<div class="bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6 text-sm text-amber-800">
이 탭은 멘토 전용입니다. URL에 <code class="bg-amber-100 px-1 rounded">?mentor=true</code> 파라미터를 추가하여 접근할 수 있습니다.
</div>
<div class="textbook-content">

<h4>🎬 도입부 — 약 3분</h4>
<p>안녕하세요, 여러분. 오늘은 소프트웨어 공학에서 가장 핫한 토픽 중 하나인 <strong>DevOps와 CALMS 프레임워크</strong>를 다뤄보겠습니다.</p>
<p>DevOps 관련 문제는 기술사 시험에서 정말 자주 나와요. 1교시에서 "DevOps의 정의와 특징", "CI/CD 파이프라인", "DevSecOps"가 단독으로 나오고, 2교시에서는 "DevOps 도입 전략", "애자일과 DevOps 비교" 같은 복합 문제로 나오거든요. 그 중에서도 CALMS 프레임워크는 DevOps의 본질을 체계적으로 설명할 수 있는 핵심 도구라서, 이걸 알면 어떤 형태의 DevOps 문제에도 대응할 수 있어요.</p>
<p>자, 먼저 DevOps가 왜 필요한지부터 이해합시다. 전통적 IT 조직에서 개발팀과 운영팀은 목표가 달랐어요. 개발팀은 "빨리 새 기능 배포하자", 운영팀은 "시스템 안정적으로 유지하자". 이 두 목표가 충돌하면서 생긴 게 <strong>"The Wall of Confusion"</strong>이에요. 개발팀이 코드를 던져놓으면 운영팀이 "이거 왜 안 돼?" 하는 상황이 반복된 거죠.</p>
<p>이걸 해결하기 위해 나온 게 DevOps예요. 핵심은 뭐냐면, 개발과 운영을 하나로 합치는 거예요. 문화적으로도, 기술적으로도. 그 효과가 얼마나 크냐면요, Puppet Labs 보고서에 따르면 DevOps 고성숙 조직이 배포 빈도 208배, 리드 타임 106배, 장애 복구 2,604배 빠르대요. 이 숫자를 서론에 넣으면 임팩트가 확실하거든요.</p>

<h4>🎬 핵심 설명 — CALMS 5요소 (약 10분)</h4>
<p>자, CALMS의 5가지 요소를 하나씩 뜯어봅시다. <strong>Culture, Automation, Lean, Measurement, Sharing</strong>. 영문 약자 CALMS 자체가 외우기 쉬운 단어니까 그대로 사용하셔도 돼요.</p>
<p><strong>첫 번째, Culture(문화)</strong>. 이게 제일 중요해요. CALMS의 기반(Foundation)이에요. DevOps를 도입한다면서 "DevOps 팀"을 따로 만드는 조직이 있는데, 이건 사일로를 하나 더 만드는 거예요. 핵심은 <strong>공동 책임(Shared Responsibility)</strong>이에요.</p>
<p>Culture에서 가장 중요한 실천이 <strong>Blameless Post-Mortem(비난 없는 사후 분석)</strong>이에요. 장애가 나면 "누가 잘못했나?"가 아니라 "어떤 프로세스가 잘못됐나?"를 분석하는 거예요. 이걸 <strong>심리적 안전감(Psychological Safety)</strong>이라 하는데, Google의 Project Aristotle에서도 고성과 팀의 1순위 조건으로 꼽힌 거예요. 두문자어로 <span class="highlight">"비심공"</span> — 비난 없는 사후분석, 심리적 안전감, 공동 목표.</p>
<p><strong>두 번째, Automation(자동화)</strong>. CI/CD 파이프라인, IaC, 자동화 테스트 — 이런 것들이에요. 코드 커밋하면 자동으로 빌드, 테스트, 배포까지 되는 파이프라인을 만드는 거예요. 자동화가 잘 되어 있으면 배포가 "이벤트"가 아니라 "일상"이 돼요.</p>
<p><strong>세 번째, Lean(린)</strong>. 도요타 생산 방식(TPS)에서 온 개념이에요. 핵심은 <strong>낭비 제거</strong>예요. 실천 방안으로는 가치 흐름 매핑(Value Stream Mapping)이 중요해요.</p>
<p><strong>네 번째, Measurement(측정)</strong>. 핵심은 <strong>DORA 4대 지표</strong>예요. <span class="highlight">"배리변복"</span>으로 외우세요. 배포 빈도, 리드 타임, 변경 실패율, 복구 시간. 엘리트 팀 기준은 배포 빈도 일 1회 이상, 리드 타임 1시간 미만, 변경 실패율 5% 미만, MTTR 1시간 미만이에요.</p>
<p><strong>다섯 번째, Sharing(공유)</strong>. 지식과 경험을 팀 간에 공유하는 거예요. Netflix가 장애 보고서를 사내 전체에 투명하게 공유하는 것이 대표적이에요. 투명한 공유가 결국 Culture의 신뢰를 강화하고, 이게 다시 Automation과 Measurement를 촉진하는 선순환이 돼요.</p>

<h4>🎬 핵심 설명 — 요소 간 관계와 사례 (약 3분)</h4>
<p>중요한 건요, 이 5가지가 독립적이 아니라 <strong>상호 강화</strong> 관계라는 거예요. Culture가 기반이고, Automation으로 구현하고, Measurement로 측정하고, Lean으로 낭비를 제거하고, Sharing으로 지식을 확산하면, 그게 다시 Culture를 강화하는 선순환이에요.</p>
<p>사례로는 Netflix를 쓰세요. 하루에 수십 회 프로덕션 배포를 하고, Chaos Monkey로 일부러 장애를 일으켜서 복원력을 테스트해요. 338억 달러 규모의 서비스를 700명의 엔지니어가 운영한다는 게 DevOps의 효과를 잘 보여주거든요. 국내 사례로는 국민건강보험공단이 좋아요. 배포 주기를 분기별에서 월 2회로 단축하고, 릴리스 장애를 40% 줄였어요.</p>

<h4>🎬 답안 작성 팁 — 약 3분</h4>
<p>서론에서는 Wall of Confusion을 한 줄로 설명하고, DORA 보고서의 "208배, 106배, 2604배" 수치를 넣으세요.</p>
<p>본론의 핵심은 <strong>CALMS 5요소 비교표</strong>예요. 5행으로 요소명, 정의, 실천 방안을 정리하면 본론의 40%가 채워져요. 그 다음에 DORA 4대 지표를 엘리트 기준과 함께 별도 표로 그리세요.</p>
<p>가장 중요한 차별화 포인트는요, <strong>"Culture가 기반이다"</strong>라는 점을 반드시 강조하세요. "도구만 도입하고 문화를 바꾸지 않는 것은 DevOps가 아니다"라는 메시지가 답안의 깊이를 만들어줘요.</p>
<p>결론에서는 세 줄 연결하세요. 첫째, 애자일 — "애자일이 개발 프로세스의 민첩성이라면, DevOps는 전체 가치 사슬의 최적화이다." 둘째, SRE — "DevOps가 원칙이라면, SRE는 구체적 실천법이다." 셋째, 플랫폼 엔지니어링 — "CALMS의 Automation과 Sharing을 제품화한 것이 플랫폼 엔지니어링이다."</p>

<h4>🎬 마무리 — 약 2분</h4>
<p>자, 오늘 핵심을 정리합니다.</p>
<p><strong>CALMS</strong> — Culture, Automation, Lean, Measurement, Sharing. DORA 4대 지표 <span class="highlight">"배리변복"</span>. Culture의 3대 원칙 <span class="highlight">"비심공"</span>. 이것들이 뼈대예요.</p>
<p>핵심 메시지 하나 외우세요. "DevOps의 본질은 도구가 아니라 문화이다. CALMS에서 Culture가 기반이고, 나머지 요소는 그 위에 구축된다."</p>
<p>이 토픽은 다른 토픽과의 연결 고리가 정말 많아요. 애자일, CI/CD, SRE, 플랫폼 엔지니어링 — 이 토픽 하나를 확실히 잡아두면 소프트웨어공학 영역의 5~6개 문제에 응용할 수 있는 가성비 최고의 토픽이에요.</p>
<p>다음 강의에서 뵙겠습니다. 화이팅하세요!</p>

</div>
</div>
</div>

<div id="quiz" class="hidden">
            <!-- AI 실전 퀴즈 영역 -->
            <div class="bg-indigo-50 rounded-xl p-6 border border-indigo-100 mb-8">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="font-bold text-indigo-900 text-lg flex items-center"><span class="mr-2">🧠</span> AI 실전 문제 생성</h3>
                    <button onclick="generateQuiz()" id="btn-quiz-gen" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm font-medium shadow-sm transition-colors flex items-center gap-2"><span>✨ 새로운 문제 생성</span></button>
                </div>
                <div id="quiz-loading" class="hidden py-8 text-center">
                    <div class="typing-indicator flex justify-center mb-2"><span></span><span></span><span></span></div>
                    <p class="text-indigo-600 text-sm">AI가 문제를 출제하고 있습니다...</p>
                </div>
                <div id="quiz-container" class="hidden space-y-4">
                    <div class="bg-white p-5 rounded-lg shadow-sm border border-indigo-100">
                        <div class="flex items-start gap-2 mb-4">
                            <span id="quiz-type-badge" class="bg-indigo-100 text-indigo-800 text-xs font-bold px-2 py-1 rounded whitespace-nowrap mt-1">객관식</span>
                            <p id="quiz-question" class="font-bold text-gray-800 text-lg"></p>
                        </div>
                        <div id="quiz-options" class="space-y-2"></div>
                        <div id="quiz-input-area" class="hidden mt-4">
                            <div class="flex gap-2">
                                <input type="text" id="quiz-answer-input" placeholder="정답을 입력하세요" class="flex-grow border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                <button onclick="checkShortAnswer()" id="btn-short-submit" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-bold">제출</button>
                            </div>
                        </div>
                    </div>
                    <div id="quiz-feedback" class="hidden bg-white p-5 rounded-lg border-l-4"></div>
                </div>
                <div id="quiz-placeholder" class="text-center py-8 text-gray-500 border-2 border-dashed border-indigo-200 rounded-lg">
                    <p>&#39;새로운 문제 생성&#39; 버튼을 눌러 실력을 점검해보세요.</p>
                </div>
            </div>



<!-- 암기 노트 ① 두문자어 -->
<div class="bg-white rounded-xl shadow-sm p-6 sm:p-8 mt-8">
<h2 class="text-xl font-bold text-gray-900 mb-6">📝 암기 노트 ① — 두문자어</h2>
<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
<div class="p-4 bg-indigo-50 rounded-lg border border-indigo-200">
<h4 class="font-bold text-indigo-800 mb-2">CALMS 5요소</h4>
<p class="text-2xl font-bold text-indigo-600 mb-1">"컬오린메쉐" / CALMS</p>
<p class="text-sm text-indigo-700">Culture - Automation - Lean - Measurement - Sharing</p>
</div>
<div class="p-4 bg-green-50 rounded-lg border border-green-200">
<h4 class="font-bold text-green-800 mb-2">DORA 4대 지표</h4>
<p class="text-2xl font-bold text-green-600 mb-1">"배리변복"</p>
<p class="text-sm text-green-700">배포빈도 - 리드타임 - 변경실패율 - 복구시간</p>
</div>
<div class="p-4 bg-purple-50 rounded-lg border border-purple-200">
<h4 class="font-bold text-purple-800 mb-2">린 7대 낭비</h4>
<p class="text-2xl font-bold text-purple-600 mb-1">"미불재핸지태결"</p>
<p class="text-sm text-purple-700">미완성 - 불필요기능 - 재학습 - 핸드오프 - 지연 - 태스크전환 - 결함</p>
</div>
<div class="p-4 bg-amber-50 rounded-lg border border-amber-200">
<h4 class="font-bold text-amber-800 mb-2">Culture 3대 원칙</h4>
<p class="text-2xl font-bold text-amber-600 mb-1">"비심공"</p>
<p class="text-sm text-amber-700">비난없는사후분석 - 심리적안전감 - 공동목표</p>
</div>
</div>
</div>

<!-- 암기 노트 ② 골격 답안 -->
<div class="bg-white rounded-xl shadow-sm p-6 sm:p-8 mt-8">
<h2 class="text-xl font-bold text-gray-900 mb-6">📝 암기 노트 ② — 골격 답안 구조</h2>
<p class="text-gray-600 mb-4">1교시형 단일 답안 구조 (DevOps와 CALMS 프레임워크)</p>
<table class="w-full border-collapse text-sm">
<thead><tr class="bg-indigo-50"><th class="border border-gray-200 p-3 text-left font-bold text-indigo-800">구분</th><th class="border border-gray-200 p-3 text-left font-bold text-indigo-800">핵심 내용</th><th class="border border-gray-200 p-3 text-center font-bold text-indigo-800">비중</th></tr></thead>
<tbody>
<tr><td class="border border-gray-200 p-3 font-bold text-gray-800">서론</td><td class="border border-gray-200 p-3 text-gray-700">개발-운영 사일로(Wall of Confusion) + DevOps 정의 + CALMS 소개</td><td class="border border-gray-200 p-3 text-center"><span class="bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full text-xs font-bold">15%</span></td></tr>
<tr class="bg-gray-50"><td class="border border-gray-200 p-3 font-bold text-gray-800">본론 1</td><td class="border border-gray-200 p-3 text-gray-700">CALMS 5요소 정의 + 각 요소별 실천 방안 비교표</td><td class="border border-gray-200 p-3 text-center"><span class="bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded-full text-xs font-bold">35%</span></td></tr>
<tr><td class="border border-gray-200 p-3 font-bold text-gray-800">본론 2</td><td class="border border-gray-200 p-3 text-gray-700">DORA 4대 지표("배리변복") + 엘리트 팀 기준 + 요소 간 상호 관계</td><td class="border border-gray-200 p-3 text-center"><span class="bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded-full text-xs font-bold">20%</span></td></tr>
<tr class="bg-gray-50"><td class="border border-gray-200 p-3 font-bold text-gray-800">본론 3</td><td class="border border-gray-200 p-3 text-gray-700">사례(Netflix 일 수십 회 배포, 국민건강보험공단 장애 40% 감소)</td><td class="border border-gray-200 p-3 text-center"><span class="bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded-full text-xs font-bold">20%</span></td></tr>
<tr><td class="border border-gray-200 p-3 font-bold text-gray-800">결론</td><td class="border border-gray-200 p-3 text-gray-700">Agile/SRE/플랫폼 엔지니어링 연결 + DevSecOps 확장</td><td class="border border-gray-200 p-3 text-center"><span class="bg-gray-100 text-gray-800 px-2 py-0.5 rounded-full text-xs font-bold">10%</span></td></tr>
</tbody>
</table>
</div>

<!-- 암기 노트 ③ 필수 도식 & 차별화 -->
<div class="bg-white rounded-xl shadow-sm p-6 sm:p-8 mt-8">
<h2 class="text-xl font-bold text-gray-900 mb-6">📝 암기 노트 ③ — 필수 도식 & 차별화</h2>
<h3 class="text-lg font-bold text-gray-800 mb-4">📐 필수 도식 3가지</h3>
<div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
<div class="p-4 bg-blue-50 rounded-lg border border-blue-200">
<h4 class="font-bold text-blue-800 mb-2">도식 1: CALMS 5요소 비교표</h4>
<p class="text-sm text-blue-700">5행: 요소명, 정의, 핵심 원칙, 실천 방안, 대표 도구</p>
</div>
<div class="p-4 bg-green-50 rounded-lg border border-green-200">
<h4 class="font-bold text-green-800 mb-2">도식 2: DORA 4대 지표 엘리트 기준표</h4>
<p class="text-sm text-green-700">4행: 지표명, 엘리트 기준, 측정 방법</p>
</div>
<div class="p-4 bg-purple-50 rounded-lg border border-purple-200">
<h4 class="font-bold text-purple-800 mb-2">도식 3: 5요소 상호 관계 순환도</h4>
<p class="text-sm text-purple-700">Culture(기반) → Automation → Measurement → Lean → Sharing → Culture</p>
</div>
</div>
<h3 class="text-lg font-bold text-gray-800 mb-4">⭐ 차별화 포인트</h3>
<div class="space-y-3">
<div class="flex items-start gap-3 p-3 bg-amber-50 rounded-lg border border-amber-200">
<span class="bg-amber-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5">1</span>
<p class="text-sm text-amber-900"><strong>DORA 4대 지표의 엘리트 팀 기준</strong>(배포 빈도 일 1회, 리드 타임 1시간, CFR 5%, MTTR 1시간)을 구체적으로 제시하면 측정 체계에 대한 깊은 이해를 보여줄 수 있다.</p>
</div>
<div class="flex items-start gap-3 p-3 bg-amber-50 rounded-lg border border-amber-200">
<span class="bg-amber-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5">2</span>
<p class="text-sm text-amber-900"><strong>Culture가 기반이라는 점</strong>을 강조하고, "도구만 도입하는 것은 DevOps가 아니다"라는 점을 명시하면 본질적 이해를 어필할 수 있다.</p>
</div>
<div class="flex items-start gap-3 p-3 bg-amber-50 rounded-lg border border-amber-200">
<span class="bg-amber-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5">3</span>
<p class="text-sm text-amber-900"><strong>5요소 간 순환 관계</strong>를 도식으로 그리면 요소가 독립적이 아닌 상호 강화 관계임을 시각적으로 보여줄 수 있다.</p>
</div>
<div class="flex items-start gap-3 p-3 bg-amber-50 rounded-lg border border-amber-200">
<span class="bg-amber-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5">4</span>
<p class="text-sm text-amber-900"><strong>DevOps → SRE → 플랫폼 엔지니어링</strong>의 발전 관계를 결론에서 제시하면 최신 트렌드 이해를 보여줄 수 있다.</p>
</div>
</div>
</div>

<!-- 제2부 전체 암기 요약 -->
<div class="bg-white rounded-xl shadow-sm p-6 sm:p-8 mt-8">
<h2 class="text-xl font-bold text-gray-900 mb-2">📖 제2부 — 서술형 답안 암기 요약 (전문)</h2>
<p class="text-gray-500 text-sm mb-6">교재 제2부의 전체 내용을 그대로 수록합니다.</p>
<div class="textbook-content">
<h3>1. 한 줄 정의</h3>
<table><thead><tr><th>토픽</th><th>한 줄 정의</th></tr></thead>
<tbody>
<tr><td><strong>DevOps</strong></td><td>개발과 운영의 조직적·기술적 융합을 통해 비즈니스 가치의 지속적이고 빠른 전달을 실현하는 문화적·기술적 접근법</td></tr>
<tr><td><strong>CALMS</strong></td><td>DevOps의 성공적 도입을 위한 5대 핵심 요소(Culture, Automation, Lean, Measurement, Sharing)를 체계화한 프레임워크</td></tr>
</tbody></table>

<h3>2. 핵심 키워드 맵</h3>
<table><thead><tr><th>분류</th><th>키워드</th></tr></thead>
<tbody>
<tr><td><strong>CALMS</strong></td><td>Culture / Automation / Lean / Measurement / Sharing</td></tr>
<tr><td><strong>Culture</strong></td><td>Blameless Post-Mortem / 심리적 안전감 / 공동 책임 / Cross-Functional Team</td></tr>
<tr><td><strong>Automation</strong></td><td>CI/CD / IaC / GitOps / ArgoCD / Terraform</td></tr>
<tr><td><strong>Measurement</strong></td><td>DORA 4대 지표 / 배포 빈도 / 리드 타임 / 변경 실패율 / MTTR</td></tr>
<tr><td><strong>연관</strong></td><td>Agile / SRE / 플랫폼 엔지니어링 / DevSecOps / Chaos Engineering</td></tr>
</tbody></table>

<h3>3. 두문자어 암기법</h3>
<ul>
<li><strong>CALMS 5요소</strong>: <span class="highlight">"컬오린메쉐"</span> (Culture-Automation-Lean-Measurement-Sharing) 또는 영문 "CALMS"를 직접 사용</li>
<li><strong>DORA 4대 지표</strong>: <span class="highlight">"배리변복"</span> (배포빈도-리드타임-변경실패율-복구시간)</li>
<li><strong>린 7대 낭비</strong>: <span class="highlight">"미불재핸지태결"</span> (미완성-불필요기능-재학습-핸드오프-지연-태스크전환-결함)</li>
<li><strong>Culture의 3대 원칙</strong>: <span class="highlight">"비심공"</span> (비난없는사후분석-심리적안전감-공동목표)</li>
</ul>

<h3>4. 골격 답안 구조</h3>
<p><strong>1교시형 — 단일 답안 구조</strong></p>
<table><thead><tr><th>구분</th><th>핵심 내용</th><th>분량 비중</th></tr></thead>
<tbody>
<tr><td><strong>서론</strong></td><td>개발-운영 사일로(Wall of Confusion) + DevOps 정의 + CALMS 소개</td><td>15%</td></tr>
<tr><td><strong>본론 1</strong></td><td>CALMS 5요소 정의 + 각 요소별 실천 방안 비교표</td><td>35%</td></tr>
<tr><td><strong>본론 2</strong></td><td>DORA 4대 지표("배리변복") + 엘리트 팀 기준 + 요소 간 상호 관계</td><td>20%</td></tr>
<tr><td><strong>본론 3</strong></td><td>사례(Netflix 일 수십 회 배포, 국민건강보험공단 장애 40% 감소)</td><td>20%</td></tr>
<tr><td><strong>결론</strong></td><td>Agile/SRE/플랫폼 엔지니어링 연결 + DevSecOps 확장</td><td>10%</td></tr>
</tbody></table>

<h3>5. 필수 도식</h3>
<p><strong>도식 1: CALMS 5요소 비교표</strong> — [5행: 요소명, 정의, 핵심 원칙, 실천 방안, 대표 도구]</p>
<p><strong>도식 2: DORA 4대 지표 엘리트 기준표</strong> — [4행: 지표명, 엘리트 기준, 측정 방법]</p>
<p><strong>도식 3: 5요소 상호 관계 순환도</strong> — [Culture(기반) → Automation → Measurement → Lean → Sharing → Culture]</p>

<h3>6. 차별화 포인트</h3>
<ul>
<li><strong>DORA 4대 지표의 엘리트 팀 기준</strong>(배포 빈도 일 1회, 리드 타임 1시간, CFR 5%, MTTR 1시간)을 구체적으로 제시하면 측정 체계에 대한 깊은 이해를 보여줄 수 있다.</li>
<li><strong>Culture가 기반이라는 점</strong>을 강조하고, "도구만 도입하는 것은 DevOps가 아니다"라는 점을 명시하면 본질적 이해를 어필할 수 있다.</li>
<li><strong>5요소 간 순환 관계</strong>를 도식으로 그리면 요소가 독립적이 아닌 상호 강화 관계임을 시각적으로 보여줄 수 있다.</li>
<li><strong>DevOps → SRE → 플랫폼 엔지니어링</strong>의 발전 관계를 결론에서 제시하면 최신 트렌드 이해를 보여줄 수 있다.</li>
</ul>
</div>
</div>
</div>

<button onclick="toggleChat()" class="fixed bottom-6 right-6 z-50 w-14 h-14 bg-indigo-600 text-white rounded-full shadow-lg hover:bg-indigo-700 transition-all flex items-center justify-center text-xl" title="AI 튜터">💬</button>
<div id="chat-sidebar" class="fixed top-0 right-0 w-80 sm:w-96 h-full bg-white shadow-2xl z-50 closed flex flex-col">
<div class="p-4 bg-indigo-600 text-white flex justify-between items-center"><span class="font-bold">🤖 AI 튜터</span><button onclick="toggleChat()" class="text-white hover:text-indigo-200 text-xl">&times;</button></div>
<div id="chat-messages" class="flex-1 overflow-y-auto p-4 flex flex-col space-y-2"><div class="chat-msg ai">안녕하세요! DevOps와 CALMS 프레임워크에 대해 궁금한 점을 물어보세요.</div></div>
<div class="p-3 border-t flex gap-2"><input type="text" id="chat-input" placeholder="질문을 입력하세요..." class="flex-1 border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-300 focus:outline-none" onkeypress="if(event.key==='Enter')sendChat()"><button onclick="sendChat()" class="bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-indigo-700 transition-colors">전송</button></div>
</div>
<div id="settings-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
<div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-6">
<div class="flex justify-between items-center mb-4"><h3 class="text-lg font-bold text-gray-900">🔑 API Key 설정</h3><button onclick="toggleSettings()" class="text-gray-400 hover:text-gray-600 text-xl">&times;</button></div>
<p class="text-sm text-gray-600 mb-4">AI 퀴즈 생성과 AI 튜터 채팅을 사용하려면 Gemini API Key를 입력하세요.</p>
<input type="password" id="api-key-input" placeholder="Gemini API Key 입력..." class="w-full border rounded-lg px-3 py-2 text-sm mb-4 focus:ring-2 focus:ring-indigo-300 focus:outline-none">
<div class="flex gap-2"><button onclick="saveApiKey()" class="flex-1 bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-indigo-700">저장</button><button onclick="toggleSettings()" class="flex-1 bg-gray-100 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-200">취소</button></div>
<p class="text-xs text-gray-400 mt-3">* Key는 브라우저 로컬 스토리지에 저장됩니다.</p>
</div></div>

</main>
<footer class="bg-white mt-12 py-8 border-t border-gray-200">
<div class="max-w-6xl mx-auto px-4 text-center">
<div class="flex flex-col md:flex-row justify-center items-center gap-2 md:gap-6 text-sm text-gray-600 mb-3 font-medium">
<div class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-indigo-500"></span><span>박교익PE (132회 정보관리기술사, dr.code92@gmail.com)</span></div>
</div>
<p class="text-xs text-gray-400">Copyright © KPC 정보관리기술사 ZIP-UP 심화반. All rights reserved.</p>
</div>
</footer>
<script>
const isMentorMode=new URLSearchParams(window.location.search).get('mentor')==='true';
const sections=isMentorMode?['overview','calms','practice','textbook','script','quiz']:['overview','calms','practice','textbook','quiz'];
if(isMentorMode){document.getElementById('nav-script').classList.remove('hidden');}

function navTo(id){
    document.querySelectorAll('.nav-item').forEach(function(el){el.classList.remove('active','text-indigo-600');});
    document.getElementById('nav-'+id).classList.add('active','text-indigo-600');
    sections.forEach(function(s){document.getElementById(s).classList.add('hidden');});
    document.getElementById(id).classList.remove('hidden');
    window.scrollTo({top:0,behavior:'smooth'});
}

var calmsDetails={
    'culture':{title:'Culture — 문화',colorClass:'border-indigo-500 bg-indigo-50',content:'<p class="text-gray-700 leading-relaxed mb-3">개발팀과 운영팀의 사일로를 해체하고, <strong>공동 책임(Shared Responsibility)</strong>과 신뢰 기반의 협업 문화를 구축합니다.</p><p class="text-gray-700 leading-relaxed mb-3"><strong>핵심 원칙:</strong> Blameless Post-Mortem, 심리적 안전감(Psychological Safety), 공동 목표</p><p class="text-gray-700 leading-relaxed mb-3"><strong>실천 방안:</strong> 교차 기능 팀 구성, DevOps 챔피언 임명, 장애 시 프로세스 개선에 집중</p><div class="bg-red-50 border border-red-200 rounded-lg p-3 mt-3"><p class="text-sm text-red-800"><strong>⚠️ 안티패턴:</strong> "DevOps 팀" 별도 신설(사일로 재생산), 장애 시 개인 문책</p></div>'},
    'automation':{title:'Automation — 자동화',colorClass:'border-green-500 bg-green-50',content:'<p class="text-gray-700 leading-relaxed mb-3">반복적 수작업을 자동화하여 <strong>일관성, 속도, 신뢰성</strong>을 확보합니다.</p><p class="text-gray-700 leading-relaxed mb-3"><strong>핵심 영역:</strong> CI/CD 파이프라인, IaC, 자동화 테스트, 구성 관리</p><p class="text-gray-700 leading-relaxed mb-3"><strong>도구:</strong> Jenkins/GitHub Actions(CI/CD), Terraform/Ansible(IaC), ArgoCD(GitOps)</p><div class="bg-green-50 border border-green-200 rounded-lg p-3 mt-3"><p class="text-sm text-green-800"><strong>💡 파이프라인:</strong> 코드 커밋 → 자동 빌드 → 자동 테스트 → 자동 배포 → 자동 모니터링</p></div>'},
    'lean':{title:'Lean — 린',colorClass:'border-purple-500 bg-purple-50',content:'<p class="text-gray-700 leading-relaxed mb-3">도요타 생산 방식(TPS)에서 유래한 린 사상으로 <strong>낭비를 제거</strong>하고 가치 흐름을 최적화합니다.</p><p class="text-gray-700 leading-relaxed mb-3"><strong>핵심 원칙:</strong> 낭비 제거, 흐름 최적화, 지속적 개선(Kaizen), 소규모 배치</p><p class="text-gray-700 leading-relaxed mb-3"><strong>실천 방안:</strong> 가치 흐름 매핑(VSM), WIP 제한(Kanban), 소규모 릴리스, MVP 접근</p><div class="bg-purple-50 border border-purple-200 rounded-lg p-3 mt-3"><p class="text-sm text-purple-800"><strong>📋 7대 낭비:</strong> 미완성 작업, 불필요 기능, 재학습, 핸드오프, 지연, 태스크 전환, 결함</p></div>'},
    'measurement':{title:'Measurement — 측정',colorClass:'border-amber-500 bg-amber-50',content:'<p class="text-gray-700 leading-relaxed mb-3">객관적 데이터를 기반으로 프로세스 성과를 측정하고, <strong>데이터 기반 의사결정</strong>을 실현합니다.</p><p class="text-gray-700 leading-relaxed mb-3"><strong>DORA 4대 지표("배리변복"):</strong> 배포 빈도, 리드 타임, 변경 실패율, 복구 시간(MTTR)</p><p class="text-gray-700 leading-relaxed mb-3"><strong>엘리트 팀 기준:</strong> DF 일1회+, LT 1시간-, CFR 5%-, MTTR 1시간-</p><div class="bg-amber-50 border border-amber-200 rounded-lg p-3 mt-3"><p class="text-sm text-amber-800"><strong>💡 SRE 연계:</strong> DORA 지표는 SRE의 SLO/SLI/Error Budget과 직접 연결됩니다.</p></div>'},
    'sharing':{title:'Sharing — 공유',colorClass:'border-teal-500 bg-teal-50',content:'<p class="text-gray-700 leading-relaxed mb-3">지식, 경험, 도구를 팀 간에 공유하여 <strong>조직 전체의 역량을 향상</strong>시킵니다.</p><p class="text-gray-700 leading-relaxed mb-3"><strong>핵심 원칙:</strong> 투명성, 지식의 민주화, 피드백 루프</p><p class="text-gray-700 leading-relaxed mb-3"><strong>실천 방안:</strong> 내부 기술 블로그/위키, Post-Mortem 공유, Guild/CoP 운영, ChatOps</p><div class="bg-red-50 border border-red-200 rounded-lg p-3 mt-3"><p class="text-sm text-red-800"><strong>⚠️ 안티패턴:</strong> 장애 보고서 감추기, 팀별 사일로화된 지식, "그건 우리 팀 일 아니야"</p></div>'}
};
function updateCalmsDetail(key){
    document.querySelectorAll('.tech-block').forEach(function(el){el.classList.remove('selected');});
    document.getElementById('block-'+key).classList.add('selected');
    var d=calmsDetails[key];
    document.getElementById('calms-detail-content').innerHTML='<div class="border-l-4 '+d.colorClass+' rounded-r-lg p-5"><h4 class="font-bold text-gray-900 text-lg mb-3">'+d.title+'</h4>'+d.content+'</div>';
}

function toggleStrategy(el){
    var d=el.querySelector('.strategy-detail');var s=el.querySelector('.strategy-summary');
    if(d.classList.contains('hidden')){
        document.querySelectorAll('.strategy-detail').forEach(function(x){x.classList.add('hidden');});
        document.querySelectorAll('.strategy-summary').forEach(function(x){x.classList.remove('hidden');});
        d.classList.remove('hidden');s.classList.add('hidden');
    }else{d.classList.add('hidden');s.classList.remove('hidden');}
}

function getApiKey(){var k=new URLSearchParams(window.location.search).get('key');if(k)return k;return localStorage.getItem('gemini_api_key')||'';}
function saveApiKey(){var k=document.getElementById('api-key-input').value.trim();if(k){localStorage.setItem('gemini_api_key',k);alert('API Key가 저장되었습니다.');toggleSettings();}else{alert('API Key를 입력해주세요.');}}
function toggleSettings(){var m=document.getElementById('settings-modal');m.classList.toggle('hidden');if(!m.classList.contains('hidden')){document.getElementById('api-key-input').value=getApiKey();}}
function toggleChat(){var s=document.getElementById('chat-sidebar');s.classList.toggle('open');s.classList.toggle('closed');}
async function sendChat(){
    var input=document.getElementById('chat-input');var msg=input.value.trim();if(!msg)return;
    var key=getApiKey();if(!key){alert('API Key를 먼저 설정해주세요.');toggleSettings();return;}
    input.value='';var box=document.getElementById('chat-messages');
    box.innerHTML+='<div class="chat-msg user">'+msg+'</div>';
    box.innerHTML+='<div id="typing" class="chat-msg ai"><div class="typing-indicator"><span></span><span></span><span></span></div></div>';
    box.scrollTop=box.scrollHeight;
    try{
        var r=await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-3-pro-preview:generateContent?key='+key,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({contents:[{role:'user',parts:[{text:'당신은 정보관리기술사 시험 멘토입니다. "DevOps와 CALMS 프레임워크" 관련 질문에 전문적이고 명쾌하게 답변해주세요. 300자 이내로 핵심만 요약.\n\n질문: '+msg}]}]})});
        var d=await r.json();var t=d.candidates[0].content.parts[0].text;
        document.getElementById('typing').remove();box.innerHTML+='<div class="chat-msg ai" style="white-space:pre-wrap;">'+t+'</div>';
    }catch(e){document.getElementById('typing').remove();box.innerHTML+='<div class="chat-msg ai text-red-500">오류: '+e.message+'</div>';}
    box.scrollTop=box.scrollHeight;
}

var currentQuizData=null;        document.addEventListener('DOMContentLoaded',function(){
    var ctx1=document.getElementById('doraChart');
    if(ctx1){new Chart(ctx1.getContext('2d'),{type:'bar',data:{labels:['배포 빈도','리드 타임','변경 실패율','복구 시간(MTTR)'],datasets:[{label:'엘리트 팀',data:[95,95,95,95],backgroundColor:'rgba(79,70,229,0.7)'},{label:'저성숙 조직',data:[10,10,50,10],backgroundColor:'rgba(239,68,68,0.5)'}]},options:{responsive:true,maintainAspectRatio:false,plugins:{title:{display:true,text:'DORA 4대 지표 — 엘리트 vs 저성숙 (상대적 점수)',font:{size:14}}},scales:{y:{beginAtZero:true,max:100}}}});}
});

    // ── 퀴즈 ──
    // Bridge: connect quiz JS to existing API key management
    var geminiKey = (typeof getApiKey === 'function') ? (getApiKey() || '') : '';

    var quizTypeHistory = [];
    var currentQuizData = null;
    var quizTopics=[
    {category:'DevOps 배경과 정의',keywords:'Wall of Confusion, 사일로, 개발-운영 충돌, 208배, Patrick Debois'},
    {category:'Culture(문화)',keywords:'Blameless Post-Mortem, 심리적 안전감, 공동 책임, Cross-Functional Team, 비심공'},
    {category:'Automation(자동화)',keywords:'CI/CD, IaC, GitOps, Jenkins, ArgoCD, Terraform, 파이프라인'},
    {category:'Lean과 Measurement',keywords:'7대 낭비, Value Stream Mapping, Kaizen, DORA 4대 지표, 배리변복, 엘리트 팀'},
    {category:'Sharing과 요소 간 관계',keywords:'ChatOps, Guild, CoP, 상호 강화, Culture 기반, 선순환'},
    {category:'사례와 연관 이론',keywords:'Netflix, Chaos Monkey, 국민건강보험공단, Agile, SRE, 플랫폼 엔지니어링, DevSecOps'}
];
    async function generateQuiz() {
        geminiKey = (typeof getApiKey === 'function') ? (getApiKey() || '') : geminiKey;
        if (!geminiKey) { alert('API Key를 먼저 설정해주세요.'); toggleSettings(); return; }
        var btn = document.getElementById('btn-quiz-gen');
        btn.disabled = true; btn.innerHTML = '<span>생성 중...</span>';
        document.getElementById('quiz-placeholder').classList.add('hidden');
        document.getElementById('quiz-container').classList.add('hidden');
        document.getElementById('quiz-loading').classList.remove('hidden');
        var isMC;
        var recent = quizTypeHistory.slice(-2);
        if (recent.length >= 2 && recent[0] === recent[1]) { isMC = !recent[1]; }
        else { isMC = Math.random() > 0.5; }
        quizTypeHistory.push(isMC);
        var selected = quizTopics[Math.floor(Math.random() * quizTopics.length)];
        var quizType = isMC ? '객관식 (4지선다)' : '단답형';
        var format = isMC
            ? '{"question":"문제","options":["A","B","C","D"],"correctIndex":0,"explanation":"해설"}'
            : '{"question":"문제","correctAnswer":"정답","explanation":"해설"}';
        var prompt = "다음 카테고리에 대한 " + quizType + " 퀴즈 1문제를 만드세요.\n"
            + "카테고리: " + selected.category + "\n"
            + "관련 키워드: " + selected.keywords + "\n"
            + "규칙: 반드시 위 카테고리와 키워드에 직접 관련된 문제를 출제하세요.\n"
            + "JSON 형식으로 응답: " + format;
        try {
            var r = await fetch(
                'https://generativelanguage.googleapis.com/v1beta/models/gemini-3-pro-preview:generateContent?key=' + geminiKey,
                { method:'POST', headers:{'Content-Type':'application/json'},
                  body: JSON.stringify({ contents:[{parts:[{text:prompt}]}], generationConfig:{responseMimeType:"application/json"} })
                }
            );
            var d = await r.json();
            var t = d.candidates[0].content.parts[0].text;
            t = t.replace(/```json\s*/gi,"").replace(/```\s*/g,"").trim();
            var depth=0, start=-1, end=-1;
            for (var i=0;i<t.length;i++) {
                if (t[i]==='{') { if(depth===0) start=i; depth++; }
                else if (t[i]==='}') { depth--; if(depth===0 && start!==-1) { end=i; break; } }
            }
            if (start===-1||end===-1) throw new Error("No JSON found");
            t = t.substring(start, end+1);
            t = t.replace(/[\x00-\x1F\x7F]/g, function(c) { return c==='\n'||c==='\r'||c==='\t' ? ' ' : ''; });
            currentQuizData = JSON.parse(t);
            renderQuiz(isMC);
        } catch(e) {
            document.getElementById('quiz-loading').classList.add('hidden');
            document.getElementById('quiz-placeholder').classList.remove('hidden');
            document.getElementById('quiz-placeholder').innerHTML = '<p class="text-red-500">퀴즈 생성 오류: ' + e.message + '</p>';
        }
        btn.disabled = false; btn.innerHTML = '<span>✨ 새로운 문제 생성</span>';
    }
    function renderQuiz(isMC) {
        document.getElementById('quiz-loading').classList.add('hidden');
        document.getElementById('quiz-feedback').classList.add('hidden');
        document.getElementById('quiz-container').classList.remove('hidden');
        document.getElementById('quiz-type-badge').textContent = isMC ? '객관식' : '단답형';
        document.getElementById('quiz-question').textContent = currentQuizData.question;
        var optDiv = document.getElementById('quiz-options');
        var inputDiv = document.getElementById('quiz-input-area');
        if (isMC) {
            optDiv.classList.remove('hidden');
            inputDiv.classList.add('hidden');
            var h = '';
            var letters = ['A','B','C','D'];
            currentQuizData.options.forEach(function(opt, i) {
                h += '<button onclick="checkMultipleChoice(' + i + ', this)" class="w-full text-left p-4 rounded-lg border border-gray-200 hover:bg-indigo-50 hover:border-indigo-300 transition-all mb-2 flex items-center group">'
                    + '<span class="w-8 h-8 rounded-full bg-gray-100 group-hover:bg-indigo-100 flex items-center justify-center text-sm font-bold text-gray-500 group-hover:text-indigo-600 mr-3 flex-shrink-0">' + letters[i] + '</span>'
                    + '<span class="text-sm text-gray-700">' + opt + '</span></button>';
            });
            optDiv.innerHTML = h;
        } else {
            optDiv.classList.add('hidden');
            inputDiv.classList.remove('hidden');
            document.getElementById('quiz-answer-input').value = '';
            document.getElementById('quiz-answer-input').focus();
        }
    }
    function checkMultipleChoice(idx, btnEl) {
        var correct = idx === currentQuizData.correctIndex;
        document.querySelectorAll('#quiz-options button').forEach(function(b, i) {
            b.disabled = true;
            if (i === currentQuizData.correctIndex) { b.classList.add('bg-green-50','border-green-400'); b.querySelector('span:first-child').classList.add('bg-green-100','text-green-700'); }
            else if (i === idx && !correct) { b.classList.add('bg-red-50','border-red-400'); b.querySelector('span:first-child').classList.add('bg-red-100','text-red-700'); }
        });
        showQuizFeedback(correct, currentQuizData.options[currentQuizData.correctIndex], currentQuizData.explanation);
    }
    async function checkShortAnswer() {
        geminiKey = (typeof getApiKey === 'function') ? (getApiKey() || '') : geminiKey;
        var ans = document.getElementById('quiz-answer-input').value.trim();
        if (!ans) { alert('답을 입력해주세요.'); return; }
        var btn = document.getElementById('btn-short-submit');
        btn.disabled = true; btn.textContent = '채점 중...';
        try {
            var gradingPrompt = "당신은 정보관리기술사 시험 채점관입니다. 아래 문제에 대해 사용자의 답안이 정답으로 인정될 수 있는지 판정하세요.\n\n"
                + "문제: " + currentQuizData.question + "\n"
                + "모범 정답: " + currentQuizData.correctAnswer + "\n"
                + "사용자 답안: " + ans + "\n\n"
                + "판정 기준:\n- 핵심 의미가 동일하면 정답\n- 약어/풀네임 모두 인정\n- 영어/한글 혼용 인정\n- 띄어쓰기/조사 차이는 무시\n- 의미가 명확히 다르면 오답\n\n"
                + "Output JSON: {\"correct\":true/false,\"reason\":\"판정 이유\"}";
            var r = await fetch(
                'https://generativelanguage.googleapis.com/v1beta/models/gemini-3-pro-preview:generateContent?key=' + geminiKey,
                { method:'POST', headers:{'Content-Type':'application/json'},
                  body: JSON.stringify({ contents:[{parts:[{text:gradingPrompt}]}], generationConfig:{responseMimeType:"application/json"} })
                }
            );
            var d = await r.json();
            var gt = d.candidates[0].content.parts[0].text;
            gt = gt.replace(/```json\s*/gi,"").replace(/```\s*/g,"").trim();
            var gd=0,gs=-1,ge=-1;
            for(var i=0;i<gt.length;i++){if(gt[i]==='{'){if(gd===0)gs=i;gd++;}else if(gt[i]==='}'){gd--;if(gd===0&&gs!==-1){ge=i;break;}}}
            if(gs===-1||ge===-1) throw new Error("No JSON");
            gt=gt.substring(gs,ge+1);
            gt=gt.replace(/[\x00-\x1F\x7F]/g,function(c){return c==='\n'||c==='\r'||c==='\t'?' ':'';});
            var result = JSON.parse(gt);
            showQuizFeedback(result.correct, currentQuizData.correctAnswer, currentQuizData.explanation + (result.reason ? ' (AI: ' + result.reason + ')' : ''));
        } catch(e) {
            var normalize = function(s){return s.replace(/\s/g,'').toLowerCase();};
            var correct = normalize(currentQuizData.correctAnswer).includes(normalize(ans)) || normalize(ans).includes(normalize(currentQuizData.correctAnswer));
            showQuizFeedback(correct, currentQuizData.correctAnswer, currentQuizData.explanation + ' (로컬 채점)');
        }
        btn.disabled = false; btn.textContent = '제출';
    }
    function showQuizFeedback(correct, answer, explanation) {
        var fb = document.getElementById('quiz-feedback');
        fb.classList.remove('hidden','border-green-500','bg-green-50','border-red-500','bg-red-50');
        if (correct) {
            fb.classList.add('border-green-500','bg-green-50');
            fb.innerHTML = '<p class="font-bold text-green-700 mb-1">✅ 정답입니다!</p><p class="text-sm text-green-600">' + explanation + '</p>';
        } else {
            fb.classList.add('border-red-500','bg-red-50');
            fb.innerHTML = '<p class="font-bold text-red-700 mb-1">❌ 오답입니다.</p><p class="text-sm text-red-700 mb-1">정답: ' + answer + '</p><p class="text-sm text-red-600">' + explanation + '</p>';
        }
    }
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' && document.getElementById('quiz-answer-input') === document.activeElement) { checkShortAnswer(); }
    });
</script>
</body></html>