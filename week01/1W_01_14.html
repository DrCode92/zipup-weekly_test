<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>벡터 데이터베이스(Vector DB)와 HNSW — KPC 정보관리기술사 ZIP-UP</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
body{font-family:'Noto Sans KR',sans-serif}
.def-box{background:linear-gradient(135deg,#eef2ff 0%,#e0e7ff 100%);border-left:4px solid #4f46e5;border-radius:8px;padding:1.25rem;margin-bottom:1rem}
.def-box p{color:#312e81;font-weight:500;margin:0;line-height:1.8}
.insight-box{background-color:#fffbeb;border:1px solid #fde68a;border-radius:8px;padding:1rem;margin:1rem 0}
.insight-box::before{content:'💡';margin-right:.5rem}
.textbook-content h3{font-size:1.25rem;font-weight:700;color:#1e3a8a;margin-top:1.5rem;margin-bottom:.75rem;border-left:4px solid #4f46e5;padding-left:.75rem}
.textbook-content h4{font-size:1.1rem;font-weight:600;color:#374151;margin-top:1rem;margin-bottom:.5rem}
.textbook-content p{margin-bottom:1rem;line-height:1.8;color:#4b5563}
.textbook-content ul{list-style-type:disc;padding-left:1.5rem;margin-bottom:1rem;color:#4b5563}
.textbook-content li{margin-bottom:.5rem;line-height:1.7}
.textbook-content table{width:100%;border-collapse:collapse;margin-bottom:1.5rem;font-size:.95rem}
.textbook-content th,.textbook-content td{border:1px solid #e5e7eb;padding:.75rem;text-align:left}
.textbook-content th{background-color:#f9fafb;font-weight:600;color:#1f2937}
.textbook-content .highlight{background-color:#eef2ff;color:#4338ca;font-weight:600;padding:0 4px;border-radius:4px}
.textbook-content pre{background-color:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:1rem;overflow-x:auto;margin-bottom:1rem;font-size:.85rem;line-height:1.6}
.textbook-content code{font-family:'Courier New',monospace}
.tech-block{transition:all .3s ease;cursor:pointer}
.tech-block:hover{transform:translateY(-2px);box-shadow:0 4px 6px -1px rgba(0,0,0,.1)}
.tech-block.selected{ring:2px;ring-color:#4f46e5;background-color:#eef2ff;border-color:#4f46e5}
.nav-item.active{border-bottom:2px solid #4f46e5;color:#4f46e5;font-weight:700}
.chat-msg{border-radius:12px;padding:10px 14px;margin-bottom:10px;max-width:85%;font-size:.95rem}
.chat-msg.user{background-color:#4f46e5;color:#fff;align-self:flex-end;margin-left:auto}
.chat-msg.ai{background-color:#f3f4f6;color:#1f2937;align-self:flex-start;border:1px solid #e5e7eb}
#chat-sidebar{transition:transform .3s ease-in-out}
#chat-sidebar.closed{transform:translateX(100%)}
#chat-sidebar.open{transform:translateX(0)}
.typing-indicator span{display:inline-block;width:6px;height:6px;background-color:#4f46e5;border-radius:50%;animation:typing 1.4s infinite ease-in-out both;margin:0 2px}
.typing-indicator span:nth-child(1){animation-delay:-.32s}
.typing-indicator span:nth-child(2){animation-delay:-.16s}
@keyframes typing{0%,80%,100%{transform:scale(0)}40%{transform:scale(1)}}
.chart-container{position:relative;width:100%;max-width:600px;margin-left:auto;margin-right:auto;height:350px;max-height:400px}
.no-scrollbar::-webkit-scrollbar{display:none}
.no-scrollbar{-ms-overflow-style:none;scrollbar-width:none}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.animate-fade-in{animation:fadeIn .4s ease-out forwards}
</style>
</head><body class="bg-stone-100 min-h-screen flex flex-col overflow-x-hidden">
<header class="bg-white shadow-sm sticky top-0 z-40">
<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
<div class="flex justify-between items-center pt-3 pb-1">
<div class="flex flex-col justify-center min-w-0">
<span class="text-[10px] sm:text-xs text-indigo-600 font-bold uppercase tracking-wider leading-tight">KPC 정보관리기술사 ZIP-UP 심화반</span>
<div class="flex items-center gap-2">
<span class="text-lg sm:text-xl font-bold text-gray-900 tracking-tight truncate">벡터 데이터베이스(Vector DB)와 HNSW</span>
<span class="text-[10px] sm:text-xs bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded-full font-bold flex-shrink-0">2026</span>
</div>
</div>
</div>
<nav class="flex space-x-1 sm:space-x-4 overflow-x-auto no-scrollbar pb-1 items-center">
<button onclick="navTo('overview')" id="nav-overview" class="nav-item active px-1 pt-1 pb-2 text-xs sm:text-sm font-medium whitespace-nowrap">개요 및 개념</button>
<button onclick="navTo('hnsw')" id="nav-hnsw" class="nav-item px-1 pt-1 pb-2 text-xs sm:text-sm font-medium whitespace-nowrap">HNSW 구조</button>
<button onclick="navTo('comparison')" id="nav-comparison" class="nav-item px-1 pt-1 pb-2 text-xs sm:text-sm font-medium whitespace-nowrap">ANN 비교 & 제품</button>
<button onclick="navTo('cases')" id="nav-cases" class="nav-item px-1 pt-1 pb-2 text-xs sm:text-sm font-medium whitespace-nowrap">사례 & 연관이론</button>
<button onclick="navTo('textbook')" id="nav-textbook" class="nav-item px-1 pt-1 pb-2 text-xs sm:text-sm font-medium whitespace-nowrap">원문 학습</button>
<button onclick="navTo('script')" id="nav-script" class="nav-item hidden px-1 pt-1 pb-2 text-xs sm:text-sm font-medium whitespace-nowrap text-amber-700">🎬 강의 스크립트</button>
<button onclick="navTo('quiz')" id="nav-quiz" class="nav-item px-1 pt-1 pb-2 text-xs sm:text-sm font-medium whitespace-nowrap">퀴즈 & 암기</button>
<span class="w-px h-4 bg-gray-300 flex-shrink-0"></span>
<button onclick="toggleSettings()" class="flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium text-indigo-600 hover:bg-indigo-50 border border-indigo-200 hover:border-indigo-400 transition-all whitespace-nowrap flex-shrink-0" title="API Key 설정">🔑 API</button>
</nav>
</div>
</header>
<main class="flex-grow max-w-5xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-12 pb-24">
<section id="overview">
<div class="bg-white rounded-xl shadow-sm p-6 sm:p-8 border-l-4 border-indigo-500">
<h2 class="text-xl font-bold text-gray-900 mb-4">📖 개요 및 개념</h2>

<div class="def-box mb-6">
<p><strong>벡터 데이터베이스(Vector Database)</strong>란 <strong>고차원 벡터(Embedding) 데이터를 저장하고, 유사도 기반 검색(Similarity Search)을 수행하는 데 최적화된 데이터베이스</strong>이다. 전통적 RDBMS가 정확한 키 값 매칭에 최적화되어 있다면, 벡터 DB는 <strong>근사 최근접 이웃(ANN)</strong> 검색에 특화되어 있다.</p>
</div>

<p class="text-gray-700 leading-relaxed mb-3">도서관 비유로 설명하면, 전통 DB는 "청구번호 123.45인 책을 찾아줘"처럼 정확한 번호로 책을 찾는 것이고, 벡터 DB는 "머신러닝 입문서 수준의 책"이라고 말하면 의미적으로 가장 비슷한 책들을 추천해주는 것입니다. 이를 가능하게 하는 것이 <strong>임베딩(Embedding)</strong> — 비정형 데이터를 고차원 실수 벡터로 변환하는 기술입니다.</p>

<!-- 임베딩 개념 시각화 -->
<h3 class="text-lg font-bold text-gray-900 mt-6 mb-3">🔢 임베딩(Embedding) 개념</h3>
<div class="bg-slate-50 rounded-lg border p-4 mb-4">
<div class="space-y-2 text-sm">
<div class="flex items-center gap-3"><span class="bg-indigo-100 text-indigo-800 px-3 py-1 rounded font-medium w-20 text-center">"고양이"</span><span class="text-gray-400">→</span><span class="font-mono text-xs text-gray-600">[0.23, -0.45, 0.89, ..., 0.12] (768차원)</span></div>
<div class="flex items-center gap-3"><span class="bg-green-100 text-green-800 px-3 py-1 rounded font-medium w-20 text-center">"강아지"</span><span class="text-gray-400">→</span><span class="font-mono text-xs text-gray-600">[0.25, -0.42, 0.85, ..., 0.15] (768차원)</span><span class="text-xs text-green-600 font-medium">← 유사!</span></div>
<div class="flex items-center gap-3"><span class="bg-red-100 text-red-800 px-3 py-1 rounded font-medium w-20 text-center">"자동차"</span><span class="text-gray-400">→</span><span class="font-mono text-xs text-gray-600">[-0.67, 0.33, -0.21, ..., 0.78] (768차원)</span><span class="text-xs text-red-600 font-medium">← 거리 멀음</span></div>
</div>
<p class="text-xs text-gray-500 mt-2">의미가 유사한 데이터는 벡터 공간에서 가까운 위치에 배치됩니다.</p>
</div>

<!-- 유사도 함수 -->
<h3 class="text-lg font-bold text-gray-900 mt-6 mb-3">📐 유사도 측정 함수</h3>
<div class="overflow-x-auto mb-6">
<table class="w-full text-sm border-collapse">
<thead><tr class="bg-indigo-50"><th class="border border-indigo-200 px-3 py-2">함수</th><th class="border border-indigo-200 px-3 py-2">특성</th><th class="border border-indigo-200 px-3 py-2">적합 사용처</th></tr></thead>
<tbody>
<tr><td class="border border-gray-200 px-3 py-2 font-medium">코사인 유사도</td><td class="border border-gray-200 px-3 py-2">방향 기반, 크기 무관</td><td class="border border-gray-200 px-3 py-2">텍스트 유사도 (가장 일반적)</td></tr>
<tr class="bg-gray-50"><td class="border border-gray-200 px-3 py-2 font-medium">유클리드 거리</td><td class="border border-gray-200 px-3 py-2">절대 거리</td><td class="border border-gray-200 px-3 py-2">이미지, 지리 데이터</td></tr>
<tr><td class="border border-gray-200 px-3 py-2 font-medium">내적(Dot Product)</td><td class="border border-gray-200 px-3 py-2">크기+방향</td><td class="border border-gray-200 px-3 py-2">추천 시스템(점수 반영)</td></tr>
<tr class="bg-gray-50"><td class="border border-gray-200 px-3 py-2 font-medium">맨해튼 거리</td><td class="border border-gray-200 px-3 py-2">L1 거리</td><td class="border border-gray-200 px-3 py-2">고차원 희소 벡터</td></tr>
</tbody>
</table>
</div>

<!-- 발전 경로 -->
<h3 class="text-lg font-bold text-gray-900 mt-6 mb-3">📅 기술 발전 경로</h3>
<div class="grid grid-cols-1 md:grid-cols-3 gap-3">
<div class="bg-indigo-50 rounded-lg p-3 border border-indigo-200"><div class="text-xs font-bold text-indigo-600 mb-1">2013</div><div class="font-semibold text-sm text-gray-900">Word2Vec</div><p class="text-xs text-gray-600">단어 임베딩 대중화</p></div>
<div class="bg-purple-50 rounded-lg p-3 border border-purple-200"><div class="text-xs font-bold text-purple-600 mb-1">2016</div><div class="font-semibold text-sm text-gray-900">HNSW 논문</div><p class="text-xs text-gray-600">ANN 검색 성능 혁신</p></div>
<div class="bg-green-50 rounded-lg p-3 border border-green-200"><div class="text-xs font-bold text-green-600 mb-1">2017</div><div class="font-semibold text-sm text-gray-900">FAISS 오픈소스</div><p class="text-xs text-gray-600">대규모 벡터 검색 표준화</p></div>
<div class="bg-amber-50 rounded-lg p-3 border border-amber-200"><div class="text-xs font-bold text-amber-600 mb-1">2019</div><div class="font-semibold text-sm text-gray-900">전용 벡터 DB 등장</div><p class="text-xs text-gray-600">Pinecone, Milvus 등</p></div>
<div class="bg-red-50 rounded-lg p-3 border border-red-200"><div class="text-xs font-bold text-red-600 mb-1">2022</div><div class="font-semibold text-sm text-gray-900">ChatGPT + RAG</div><p class="text-xs text-gray-600">벡터 DB 수요 폭발</p></div>
<div class="bg-teal-50 rounded-lg p-3 border border-teal-200"><div class="text-xs font-bold text-teal-600 mb-1">2023</div><div class="font-semibold text-sm text-gray-900">시장 15억$ 돌파</div><p class="text-xs text-gray-600">전년 대비 300% 성장</p></div>
</div>
</div>
</section>

<section id="hnsw" class="hidden">
<div class="bg-white rounded-xl shadow-sm p-6 sm:p-8 border-l-4 border-purple-500">
<h2 class="text-xl font-bold text-gray-900 mb-4">🏗️ HNSW 구조</h2>

<p class="text-gray-700 leading-relaxed mb-4">HNSW(Hierarchical Navigable Small World)는 2016년 Malkov와 Yashunin이 발표한 ANN 알고리즘으로, <strong>계층적 그래프 구조</strong>를 활용하여 고속 근사 최근접 이웃 검색을 수행합니다. 현재 가장 널리 사용되는 ANN 알고리즘입니다.</p>

<!-- KNN vs ANN -->
<h3 class="text-lg font-bold text-gray-900 mb-3">정확 검색(KNN) vs 근사 검색(ANN)</h3>
<div class="overflow-x-auto mb-6">
<table class="w-full text-sm border-collapse">
<thead><tr class="bg-purple-50"><th class="border border-purple-200 px-3 py-2">구분</th><th class="border border-purple-200 px-3 py-2 text-center">정확 검색(KNN)</th><th class="border border-purple-200 px-3 py-2 text-center">근사 검색(ANN)</th></tr></thead>
<tbody>
<tr><td class="border border-gray-200 px-3 py-2 font-medium">정확도</td><td class="border border-gray-200 px-3 py-2 text-center">100%</td><td class="border border-gray-200 px-3 py-2 text-center text-indigo-700 font-medium">95~99%</td></tr>
<tr class="bg-gray-50"><td class="border border-gray-200 px-3 py-2 font-medium">시간 복잡도</td><td class="border border-gray-200 px-3 py-2 text-center text-red-600">O(N×d)</td><td class="border border-gray-200 px-3 py-2 text-center text-green-600 font-medium">O(log N)</td></tr>
<tr><td class="border border-gray-200 px-3 py-2 font-medium">100만 벡터 기준</td><td class="border border-gray-200 px-3 py-2 text-center text-red-600">수 초~수십 초</td><td class="border border-gray-200 px-3 py-2 text-center text-green-600 font-bold">수 밀리초</td></tr>
<tr class="bg-gray-50"><td class="border border-gray-200 px-3 py-2 font-medium">사용 가능 규모</td><td class="border border-gray-200 px-3 py-2 text-center">수만 건 이하</td><td class="border border-gray-200 px-3 py-2 text-center font-medium">수억 건 이상</td></tr>
</tbody>
</table>
</div>

<div class="insight-box mb-6">고차원 벡터에서 정확 검색(KNN)은 <strong>"차원의 저주(Curse of Dimensionality)"</strong>로 인해 사실상 불가능합니다. 이를 해결하기 위해 근사 검색(ANN)이 필수적입니다.</div>

<!-- HNSW 계층 구조 시각화 -->
<h3 class="text-lg font-bold text-gray-900 mb-3">HNSW 계층 구조 — 고속도로 비유</h3>
<div class="bg-slate-50 rounded-lg border p-5 mb-6">
<div class="space-y-4">
<!-- Layer 2 -->
<div>
<div class="flex items-center gap-2 mb-2"><span class="bg-red-500 text-white text-xs font-bold px-2 py-0.5 rounded">Layer 2</span><span class="text-xs text-gray-500">최상위 — 소수 노드 + 장거리 연결 (고속도로)</span></div>
<div class="flex items-center gap-4 justify-center">
<div class="w-8 h-8 rounded-full bg-red-400 border-2 border-red-600 flex items-center justify-center text-white text-xs font-bold">E</div>
<div class="flex-1 border-t-2 border-dashed border-red-300 max-w-xs"></div>
<div class="w-8 h-8 rounded-full bg-red-400 border-2 border-red-600"></div>
<div class="flex-1 border-t-2 border-dashed border-red-300 max-w-xs"></div>
<div class="w-8 h-8 rounded-full bg-red-400 border-2 border-red-600"></div>
</div>
</div>
<div class="w-px h-4 bg-gray-300 mx-auto"></div>
<!-- Layer 1 -->
<div>
<div class="flex items-center gap-2 mb-2"><span class="bg-amber-500 text-white text-xs font-bold px-2 py-0.5 rounded">Layer 1</span><span class="text-xs text-gray-500">중간 — 더 많은 노드 + 중거리 연결 (국도)</span></div>
<div class="flex items-center gap-2 justify-center flex-wrap">
<div class="w-6 h-6 rounded-full bg-amber-400 border-2 border-amber-600"></div>
<div class="w-8 border-t border-amber-300"></div>
<div class="w-6 h-6 rounded-full bg-amber-400 border-2 border-amber-600"></div>
<div class="w-8 border-t border-amber-300"></div>
<div class="w-6 h-6 rounded-full bg-amber-400 border-2 border-amber-600"></div>
<div class="w-8 border-t border-amber-300"></div>
<div class="w-6 h-6 rounded-full bg-amber-400 border-2 border-amber-600"></div>
<div class="w-8 border-t border-amber-300"></div>
<div class="w-6 h-6 rounded-full bg-amber-400 border-2 border-amber-600"></div>
<div class="w-8 border-t border-amber-300"></div>
<div class="w-6 h-6 rounded-full bg-amber-400 border-2 border-amber-600"></div>
</div>
</div>
<div class="w-px h-4 bg-gray-300 mx-auto"></div>
<!-- Layer 0 -->
<div>
<div class="flex items-center gap-2 mb-2"><span class="bg-green-500 text-white text-xs font-bold px-2 py-0.5 rounded">Layer 0</span><span class="text-xs text-gray-500">최하위 — 모든 노드 + 근거리 연결 (골목길)</span></div>
<div class="flex items-center gap-1 justify-center flex-wrap">
<div class="w-4 h-4 rounded-full bg-green-300 border border-green-500"></div>
<div class="w-3 border-t border-green-200"></div>
<div class="w-4 h-4 rounded-full bg-green-300 border border-green-500"></div>
<div class="w-3 border-t border-green-200"></div>
<div class="w-4 h-4 rounded-full bg-green-300 border border-green-500"></div>
<div class="w-3 border-t border-green-200"></div>
<div class="w-4 h-4 rounded-full bg-green-300 border border-green-500"></div>
<div class="w-3 border-t border-green-200"></div>
<div class="w-4 h-4 rounded-full bg-green-500 border-2 border-green-700"></div>
<div class="w-3 border-t border-green-200"></div>
<div class="w-4 h-4 rounded-full bg-green-300 border border-green-500"></div>
<div class="w-3 border-t border-green-200"></div>
<div class="w-4 h-4 rounded-full bg-green-300 border border-green-500"></div>
<div class="w-3 border-t border-green-200"></div>
<div class="w-4 h-4 rounded-full bg-green-300 border border-green-500"></div>
<div class="w-3 border-t border-green-200"></div>
<div class="w-4 h-4 rounded-full bg-green-300 border border-green-500"></div>
<div class="w-3 border-t border-green-200"></div>
<div class="w-4 h-4 rounded-full bg-green-300 border border-green-500"></div>
</div>
</div>
</div>
<p class="text-xs text-gray-500 mt-3 text-center">E = Entry Point (검색 시작점), ● = 최근접 결과</p>
</div>

<!-- 검색 과정 ("계탐하") -->
<h3 class="text-lg font-bold text-gray-900 mt-6 mb-3">🔍 HNSW 검색 과정 — "계탐하"</h3>
<div class="flex flex-col gap-3 mb-6">
<div class="flex items-start gap-3"><div class="bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center font-bold text-xs flex-shrink-0 mt-0.5">1</div><div><div class="font-bold text-sm text-gray-900">계층 진입 (Entry)</div><p class="text-sm text-gray-600">Layer 2 Entry Point에서 시작 — 고속도로 진입</p></div></div>
<div class="flex items-start gap-3"><div class="bg-amber-500 text-white rounded-full w-7 h-7 flex items-center justify-center font-bold text-xs flex-shrink-0 mt-0.5">2</div><div><div class="font-bold text-sm text-gray-900">탐욕 탐색 (Greedy Search)</div><p class="text-sm text-gray-600">현재 레이어에서 쿼리 벡터에 가장 가까운 노드로 이동</p></div></div>
<div class="flex items-start gap-3"><div class="bg-green-500 text-white rounded-full w-7 h-7 flex items-center justify-center font-bold text-xs flex-shrink-0 mt-0.5">3</div><div><div class="font-bold text-sm text-gray-900">하강 반복 (Descent)</div><p class="text-sm text-gray-600">더 가까운 노드가 없으면 한 단계 아래로 이동 → Layer 0까지 반복</p></div></div>
<div class="flex items-start gap-3"><div class="bg-indigo-500 text-white rounded-full w-7 h-7 flex items-center justify-center font-bold text-xs flex-shrink-0 mt-0.5">4</div><div><div class="font-bold text-sm text-gray-900">후보 탐색 → Top-K 반환</div><p class="text-sm text-gray-600">Layer 0에서 주변 노드 확장 탐색, 시간 복잡도 O(log N)</p></div></div>
</div>

<!-- 핵심 파라미터 -->
<h3 class="text-lg font-bold text-gray-900 mt-6 mb-3">⚙️ HNSW 핵심 파라미터</h3>
<div class="overflow-x-auto">
<table class="w-full text-sm border-collapse">
<thead><tr class="bg-purple-50"><th class="border border-purple-200 px-3 py-2">파라미터</th><th class="border border-purple-200 px-3 py-2">의미</th><th class="border border-purple-200 px-3 py-2">트레이드오프</th></tr></thead>
<tbody>
<tr><td class="border border-gray-200 px-3 py-2 font-mono font-bold text-indigo-700">M</td><td class="border border-gray-200 px-3 py-2">각 노드의 최대 이웃 수</td><td class="border border-gray-200 px-3 py-2">M↑ → 정확도↑, 메모리↑, 구축시간↑</td></tr>
<tr class="bg-gray-50"><td class="border border-gray-200 px-3 py-2 font-mono font-bold text-indigo-700">ef_construction</td><td class="border border-gray-200 px-3 py-2">인덱스 구축 시 후보 리스트 크기</td><td class="border border-gray-200 px-3 py-2">ef↑ → 정확도↑, 구축시간↑</td></tr>
<tr><td class="border border-gray-200 px-3 py-2 font-mono font-bold text-indigo-700">ef_search</td><td class="border border-gray-200 px-3 py-2">검색 시 후보 리스트 크기</td><td class="border border-gray-200 px-3 py-2">ef↑ → 정확도↑, 검색시간↑</td></tr>
</tbody>
</table>
</div>
</div>
</section>

<section id="comparison" class="hidden">
<div class="bg-white rounded-xl shadow-sm p-6 sm:p-8 border-l-4 border-green-500">
<h2 class="text-xl font-bold text-gray-900 mb-4">📊 ANN 알고리즘 비교 & 벡터 DB 제품</h2>

<!-- ANN 비교 차트 -->
<h3 class="text-lg font-bold text-gray-900 mb-3">ANN 알고리즘 비교</h3>
<div class="chart-container mb-4"><canvas id="annCompareChart"></canvas></div>
<p class="text-xs text-gray-400 text-center mb-6">* 점수는 상대적 비교를 위한 예시 값입니다.</p>

<!-- ANN 비교표 -->
<div class="overflow-x-auto mb-6">
<table class="w-full text-sm border-collapse">
<thead><tr class="bg-green-50"><th class="border border-green-200 px-2 py-2">비교 기준</th><th class="border border-green-200 px-2 py-2 text-center">HNSW</th><th class="border border-green-200 px-2 py-2 text-center">IVF</th><th class="border border-green-200 px-2 py-2 text-center">PQ</th><th class="border border-green-200 px-2 py-2 text-center">Annoy</th></tr></thead>
<tbody>
<tr><td class="border border-gray-200 px-2 py-2 font-medium">자료구조</td><td class="border border-gray-200 px-2 py-2 text-center text-xs">계층적 그래프</td><td class="border border-gray-200 px-2 py-2 text-center text-xs">역인덱스+클러스터</td><td class="border border-gray-200 px-2 py-2 text-center text-xs">압축 코드</td><td class="border border-gray-200 px-2 py-2 text-center text-xs">이진 트리 앙상블</td></tr>
<tr class="bg-gray-50"><td class="border border-gray-200 px-2 py-2 font-medium">검색 속도</td><td class="border border-gray-200 px-2 py-2 text-center font-bold text-green-600">매우 빠름</td><td class="border border-gray-200 px-2 py-2 text-center">빠름</td><td class="border border-gray-200 px-2 py-2 text-center">보통</td><td class="border border-gray-200 px-2 py-2 text-center">빠름</td></tr>
<tr><td class="border border-gray-200 px-2 py-2 font-medium">메모리 사용</td><td class="border border-gray-200 px-2 py-2 text-center text-red-600">높음</td><td class="border border-gray-200 px-2 py-2 text-center">보통</td><td class="border border-gray-200 px-2 py-2 text-center font-bold text-green-600">매우 낮음</td><td class="border border-gray-200 px-2 py-2 text-center">보통</td></tr>
<tr class="bg-gray-50"><td class="border border-gray-200 px-2 py-2 font-medium">정확도(Recall)</td><td class="border border-gray-200 px-2 py-2 text-center font-bold text-green-600">높음 95~99%</td><td class="border border-gray-200 px-2 py-2 text-center">보통~높음</td><td class="border border-gray-200 px-2 py-2 text-center">보통</td><td class="border border-gray-200 px-2 py-2 text-center">보통</td></tr>
<tr><td class="border border-gray-200 px-2 py-2 font-medium">동적 삽입/삭제</td><td class="border border-gray-200 px-2 py-2 text-center font-bold text-green-600">지원</td><td class="border border-gray-200 px-2 py-2 text-center text-amber-600">제한적</td><td class="border border-gray-200 px-2 py-2 text-center text-red-600">미지원</td><td class="border border-gray-200 px-2 py-2 text-center text-red-600">미지원</td></tr>
<tr class="bg-gray-50"><td class="border border-gray-200 px-2 py-2 font-medium">주요 사용처</td><td class="border border-gray-200 px-2 py-2 text-center text-xs">Milvus, Qdrant</td><td class="border border-gray-200 px-2 py-2 text-center text-xs">FAISS</td><td class="border border-gray-200 px-2 py-2 text-center text-xs">FAISS(메모리절약)</td><td class="border border-gray-200 px-2 py-2 text-center text-xs">Spotify 추천</td></tr>
</tbody>
</table>
</div>

<!-- 벡터 DB 제품 -->
<h3 class="text-lg font-bold text-gray-900 mt-6 mb-3">🗄️ 대표 벡터 DB 제품</h3>
<div class="grid grid-cols-1 md:grid-cols-2 gap-3">
<div class="strategy-card bg-indigo-50 rounded-lg p-4 border border-indigo-200 cursor-pointer" onclick="toggleStrategy(this)">
<div class="strategy-summary flex items-center justify-between"><div class="flex items-center gap-2"><span class="font-bold text-sm text-gray-900">Pinecone</span><span class="text-xs bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded">SaaS</span></div><span class="text-gray-400 text-xs">▼</span></div>
<div class="strategy-detail hidden mt-2 text-sm text-gray-700">완전 관리형 SaaS. 가장 쉬운 사용성, 서버리스. 자체 독점 인덱스.</div>
</div>
<div class="strategy-card bg-green-50 rounded-lg p-4 border border-green-200 cursor-pointer" onclick="toggleStrategy(this)">
<div class="strategy-summary flex items-center justify-between"><div class="flex items-center gap-2"><span class="font-bold text-sm text-gray-900">Milvus</span><span class="text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded">오픈소스</span></div><span class="text-gray-400 text-xs">▼</span></div>
<div class="strategy-detail hidden mt-2 text-sm text-gray-700">가장 큰 오픈소스 벡터 DB. HNSW, IVF, PQ 모두 지원. Zilliz 개발.</div>
</div>
<div class="strategy-card bg-purple-50 rounded-lg p-4 border border-purple-200 cursor-pointer" onclick="toggleStrategy(this)">
<div class="strategy-summary flex items-center justify-between"><div class="flex items-center gap-2"><span class="font-bold text-sm text-gray-900">Qdrant</span><span class="text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded">오픈소스</span></div><span class="text-gray-400 text-xs">▼</span></div>
<div class="strategy-detail hidden mt-2 text-sm text-gray-700">Rust 기반 고성능. HNSW 인덱스. 빠른 속도와 낮은 리소스 소비.</div>
</div>
<div class="strategy-card bg-amber-50 rounded-lg p-4 border border-amber-200 cursor-pointer" onclick="toggleStrategy(this)">
<div class="strategy-summary flex items-center justify-between"><div class="flex items-center gap-2"><span class="font-bold text-sm text-gray-900">pgvector</span><span class="text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded">PostgreSQL</span></div><span class="text-gray-400 text-xs">▼</span></div>
<div class="strategy-detail hidden mt-2 text-sm text-gray-700">PostgreSQL 확장. 기존 RDBMS 인프라 활용 가능. HNSW, IVFFlat 인덱스 지원.</div>
</div>
</div>
</div>
</section>

<section id="cases" class="hidden">
<div class="bg-white rounded-xl shadow-sm p-6 sm:p-8 border-l-4 border-teal-500">
<h2 class="text-xl font-bold text-gray-900 mb-4">🏢 사례 & 연관이론</h2>

<!-- RAG 아키텍처 -->
<h3 class="text-lg font-bold text-gray-900 mb-3">RAG(Retrieval-Augmented Generation) 아키텍처</h3>
<div class="bg-slate-50 rounded-lg border p-5 mb-6">
<div class="space-y-3">
<div class="bg-blue-100 rounded-lg p-3 text-center text-sm font-medium text-blue-800">사용자 질문: "최신 AI 규제 동향을 알려줘"</div>
<div class="text-center text-gray-400">↓ 임베딩 변환</div>
<div class="bg-indigo-100 rounded-lg p-3 text-center text-sm font-medium text-indigo-800">쿼리 벡터 [0.23, -0.45, ...]</div>
<div class="text-center text-gray-400">↓ ANN 검색 (HNSW)</div>
<div class="bg-purple-100 rounded-lg p-3 text-center text-sm font-medium text-purple-800">🗄️ 벡터 DB → 유사 문서 Top-K 검색</div>
<div class="text-center text-gray-400">↓ 컨텍스트 전달</div>
<div class="bg-green-100 rounded-lg p-3 text-center text-sm font-medium text-green-800">🤖 LLM → 검색 문서 참고하여 답변 생성</div>
</div>
</div>

<!-- 사례 -->
<h3 class="text-lg font-bold text-gray-900 mt-6 mb-3">실무 적용 사례</h3>
<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
<div class="bg-blue-50 rounded-lg p-5 border border-blue-200">
<div class="flex items-center gap-2 mb-2"><span class="text-xl">🤖</span><h4 class="font-bold text-gray-900">ChatGPT + RAG</h4></div>
<ul class="text-sm text-gray-700 space-y-2 list-disc pl-4">
<li>학습 데이터 컷오프 문제를 RAG로 해결</li>
<li>Browse with Bing, Retrieval Plugin 활용</li>
<li>벡터 DB 시장 <strong>전년 대비 300% 성장</strong> 견인</li>
</ul>
</div>
<div class="bg-green-50 rounded-lg p-5 border border-green-200">
<div class="flex items-center gap-2 mb-2"><span class="text-xl">🛒</span><h4 class="font-bold text-gray-900">쿠팡 상품 추천</h4></div>
<ul class="text-sm text-gray-700 space-y-2 list-disc pl-4">
<li>약 <strong>5억 개</strong> 상품 데이터 벡터 임베딩</li>
<li>CLIP 모델로 이미지+텍스트 임베딩</li>
<li>HNSW 기반 <strong>수 밀리초</strong> 내 유사 상품 Top-10</li>
<li>추천 CTR <strong>기존 대비 약 23% 향상</strong></li>
</ul>
</div>
</div>

<!-- 연관 이론 -->
<h3 class="text-lg font-bold text-gray-900 mt-6 mb-3">연관 이론</h3>
<div class="strategy-card bg-indigo-50 rounded-lg p-4 border border-indigo-200 cursor-pointer mb-3" onclick="toggleStrategy(this)">
<div class="strategy-summary flex items-center justify-between"><div class="flex items-center gap-2"><span class="text-lg">📐</span><span class="font-bold text-sm">CAP 이론과 벡터 DB</span></div><span class="text-gray-400 text-xs">▼</span></div>
<div class="strategy-detail hidden mt-3 text-sm text-gray-700">벡터 DB도 분산 시스템이므로 CAP 이론이 적용됩니다. Milvus는 etcd 기반 CP 구조, Weaviate(Cassandra 기반)는 AP 구조를 채택합니다.</div>
</div>
<div class="strategy-card bg-red-50 rounded-lg p-4 border border-red-200 cursor-pointer mb-3" onclick="toggleStrategy(this)">
<div class="strategy-summary flex items-center justify-between"><div class="flex items-center gap-2"><span class="text-lg">🌀</span><span class="font-bold text-sm">차원의 저주 (Richard Bellman, 1961)</span></div><span class="text-gray-400 text-xs">▼</span></div>
<div class="strategy-detail hidden mt-3 text-sm text-gray-700">차원이 증가할수록 데이터 간 거리가 균일해져 유의미한 유사도 계산이 어려워지는 현상. ANN 알고리즘이 필수적인 근본 이유이며, HNSW의 계층적 탐색이 이 문제를 완화합니다.</div>
</div>
<div class="strategy-card bg-amber-50 rounded-lg p-4 border border-amber-200 cursor-pointer mb-3" onclick="toggleStrategy(this)">
<div class="strategy-summary flex items-center justify-between"><div class="flex items-center gap-2"><span class="text-lg">🔗</span><span class="font-bold text-sm">하이브리드 검색 (BM25 + 벡터)</span></div><span class="text-gray-400 text-xs">▼</span></div>
<div class="strategy-detail hidden mt-3 text-sm text-gray-700">전통적 역인덱스(키워드 매칭, BM25)와 벡터 검색(의미 매칭)을 결합한 하이브리드 검색이 현대 검색 시스템의 표준으로 자리잡고 있습니다. 키워드 정확 매칭 + 의미 유사 매칭의 장점을 모두 활용합니다.</div>
</div>
</div>
</section>

<section id="textbook" class="hidden">
<div class="bg-white rounded-xl shadow-sm p-6 sm:p-8">
<h2 class="text-xl font-bold text-gray-900 mb-6">📚 원문 학습</h2>
<div class="textbook-content">

<h3>제1장 개요 및 배경</h3>

<h4>1.1 벡터 데이터베이스의 정의</h4>

<div class="def-box">
<p><strong>벡터 데이터베이스(Vector Database)</strong>란 <strong>고차원 벡터(Embedding) 데이터를 저장하고, 유사도 기반 검색(Similarity Search)을 수행하는 데 최적화된 데이터베이스</strong>이다. 전통적 RDBMS가 정확한 키 값 매칭(Exact Match)에 최적화되어 있다면, 벡터 DB는 <strong>"의미적으로 가장 유사한 데이터"</strong>를 찾는 근사 최근접 이웃(ANN: Approximate Nearest Neighbor) 검색에 특화되어 있다.</p>
</div>

<h4>1.2 임베딩(Embedding)의 개념</h4>
<p>임베딩이란 텍스트, 이미지, 음성 등 비정형 데이터를 <strong>고차원 실수 벡터 공간의 한 점</strong>으로 변환하는 것이다. 의미가 유사한 데이터는 벡터 공간에서 가까운 위치에 배치된다.</p>

<div class="bg-slate-50 rounded-lg border p-4 mb-4">
<div class="space-y-2 text-sm font-mono">
<div>"고양이" → [0.23, -0.45, 0.89, ..., 0.12] (768차원)</div>
<div>"강아지" → [0.25, -0.42, 0.85, ..., 0.15] (768차원) ← "고양이"와 유사</div>
<div>"자동차" → [-0.67, 0.33, -0.21, ..., 0.78] (768차원) ← "고양이"와 거리 멀음</div>
</div>
</div>

<h4>1.3 역사적 맥락 및 기술 발전</h4>
<table>
<tr><th>연도</th><th>사건</th><th>의의</th></tr>
<tr><td>2013</td><td>Word2Vec(Google, Mikolov) 발표</td><td>단어 임베딩 대중화, 벡터 유사도 검색 수요 발생</td></tr>
<tr><td>2016</td><td>HNSW 알고리즘 논문 발표 (Malkov &amp; Yashunin)</td><td>ANN 검색의 성능 혁신</td></tr>
<tr><td>2017</td><td>Facebook AI Similarity Search(FAISS) 오픈소스 공개</td><td>대규모 벡터 검색 라이브러리 표준화</td></tr>
<tr><td>2019</td><td>Pinecone, Milvus 등 전용 벡터 DB 등장</td><td>벡터 DB의 독립 카테고리 형성</td></tr>
<tr><td>2022</td><td>ChatGPT 등장, RAG 부상</td><td>벡터 DB 수요 폭발</td></tr>
<tr><td>2023</td><td>벡터 DB 시장 15억 달러 돌파 (전년 대비 300% 성장)</td><td>AI 인프라의 핵심 요소로 자리매김</td></tr>
</table>

<h3>제2장 벡터 데이터베이스 전체 구조</h3>

<h4>2.1 아키텍처 구조도</h4>

<!-- 아키텍처 시각화 -->
<div class="space-y-3 mb-6">
<div class="bg-blue-50 border border-blue-200 rounded-lg p-4 text-center">
<div class="font-bold text-blue-800 mb-1">애플리케이션 레이어</div>
<div class="text-sm text-blue-600">LLM 앱, 추천 시스템, 이미지 검색, RAG 파이프라인</div>
</div>
<div class="text-center text-gray-400 text-sm">↕ API (REST/gRPC)</div>
<div class="bg-indigo-50 border border-indigo-200 rounded-lg p-4">
<div class="font-bold text-indigo-800 text-center mb-3">벡터 데이터베이스</div>
<div class="grid grid-cols-1 md:grid-cols-3 gap-3">
<div class="bg-white rounded-lg border p-3 text-center">
<div class="font-semibold text-indigo-700 text-sm">쿼리 엔진</div>
<ul class="text-xs text-gray-600 mt-1 list-none p-0"><li>• 유사도 계산</li><li>• Top-K 반환</li><li>• 필터링</li></ul>
</div>
<div class="bg-white rounded-lg border p-3 text-center">
<div class="font-semibold text-indigo-700 text-sm">인덱스 엔진</div>
<ul class="text-xs text-gray-600 mt-1 list-none p-0"><li>• HNSW</li><li>• IVF</li><li>• PQ</li></ul>
</div>
<div class="bg-white rounded-lg border p-3 text-center">
<div class="font-semibold text-indigo-700 text-sm">스토리지</div>
<ul class="text-xs text-gray-600 mt-1 list-none p-0"><li>• 벡터 저장</li><li>• 메타데이터</li><li>• 인덱스</li></ul>
</div>
</div>
</div>
<div class="text-center text-gray-400 text-sm">↕</div>
<div class="bg-green-50 border border-green-200 rounded-lg p-4 text-center">
<div class="font-bold text-green-800 mb-1">임베딩 모델 (Embedding Model)</div>
<div class="text-sm text-green-600">OpenAI Ada-002, BERT, Sentence-BERT, CLIP 등</div>
</div>
<div class="text-center text-gray-400 text-sm">↕</div>
<div class="bg-gray-50 border border-gray-200 rounded-lg p-4 text-center">
<div class="font-bold text-gray-800 mb-1">원본 데이터</div>
<div class="text-sm text-gray-600">텍스트, 이미지, 음성, 비디오, 코드 등</div>
</div>
</div>

<h4>2.2 유사도 측정 함수</h4>
<table>
<tr><th>함수</th><th>수식</th><th>특성</th><th>적합 사용처</th></tr>
<tr><td>코사인 유사도</td><td>cos(A,B) = A·B / (‖A‖·‖B‖)</td><td>방향 기반, 크기 무관</td><td>텍스트 유사도 (가장 일반적)</td></tr>
<tr><td>유클리드 거리</td><td>d = √(Σ(aᵢ-bᵢ)²)</td><td>절대 거리</td><td>이미지, 지리 데이터</td></tr>
<tr><td>내적(Dot Product)</td><td>A·B = Σ(aᵢ×bᵢ)</td><td>크기+방향</td><td>추천 시스템(점수 반영)</td></tr>
<tr><td>맨해튼 거리</td><td>d = Σ|aᵢ-bᵢ|</td><td>L1 거리</td><td>고차원 희소 벡터</td></tr>
</table>

<h3>제3장 ANN 알고리즘과 HNSW</h3>

<h4>3.1 정확 검색 vs 근사 검색</h4>
<table>
<tr><th>구분</th><th>정확 검색(KNN)</th><th>근사 검색(ANN)</th></tr>
<tr><td>정확도</td><td>100% (최근접 이웃 보장)</td><td>95~99% (근사치)</td></tr>
<tr><td>시간 복잡도</td><td>O(N×d) — N: 데이터 수, d: 차원</td><td>O(log N) ~ O(N^α), α &lt; 1</td></tr>
<tr><td>100만 벡터 기준</td><td>수 초~수십 초</td><td>수 밀리초</td></tr>
<tr><td>사용 가능 규모</td><td>수만 건 이하</td><td>수억 건 이상</td></tr>
<tr><td>대표 알고리즘</td><td>Brute Force</td><td>HNSW, IVF, PQ, Annoy</td></tr>
</table>

<div class="insight-box">
<strong>핵심</strong>: 고차원 벡터에서 정확 검색(KNN)은 "차원의 저주(Curse of Dimensionality)"로 인해 사실상 불가능하다. 이를 해결하기 위해 근사 검색(ANN) 알고리즘이 필수적이다.
</div>

<h4>3.2 HNSW(Hierarchical Navigable Small World) 구조</h4>
<p>HNSW는 2016년 Malkov와 Yashunin이 발표한 ANN 알고리즘으로, <strong>계층적 그래프 구조</strong>를 활용하여 고속 근사 최근접 이웃 검색을 수행한다. 현재 가장 널리 사용되는 ANN 알고리즘이다.</p>
<p><strong>핵심 아이디어</strong>: Small World 네트워크의 원리를 계층적으로 확장</p>

<!-- HNSW 계층 구조 시각화 -->
<div class="bg-slate-50 rounded-lg border p-4 mb-4">
<div class="space-y-4 text-center">
<div>
<div class="text-xs font-bold text-purple-700 mb-1">Layer 2 (최상위): 소수 노드 + 장거리 연결 (Express Highway)</div>
<div class="flex justify-center items-center gap-1">
<span class="w-4 h-4 rounded-full bg-purple-500 inline-block"></span>
<span class="border-t-2 border-purple-300 w-24 inline-block"></span>
<span class="w-4 h-4 rounded-full bg-purple-500 inline-block"></span>
<span class="border-t-2 border-purple-300 w-16 inline-block"></span>
<span class="w-4 h-4 rounded-full bg-purple-500 inline-block"></span>
</div>
</div>
<div class="text-gray-400">↓</div>
<div>
<div class="text-xs font-bold text-blue-700 mb-1">Layer 1 (중간): 더 많은 노드 + 중거리 연결</div>
<div class="flex justify-center items-center gap-1 flex-wrap">
<span class="w-3 h-3 rounded-full bg-blue-500 inline-block"></span>
<span class="border-t-2 border-blue-300 w-6 inline-block"></span>
<span class="w-3 h-3 rounded-full bg-blue-500 inline-block"></span>
<span class="border-t-2 border-blue-300 w-10 inline-block"></span>
<span class="w-3 h-3 rounded-full bg-blue-500 inline-block"></span>
<span class="border-t-2 border-blue-300 w-6 inline-block"></span>
<span class="w-3 h-3 rounded-full bg-blue-500 inline-block"></span>
<span class="border-t-2 border-blue-300 w-8 inline-block"></span>
<span class="w-3 h-3 rounded-full bg-blue-500 inline-block"></span>
</div>
</div>
<div class="text-gray-400">↓</div>
<div>
<div class="text-xs font-bold text-green-700 mb-1">Layer 0 (최하위): 모든 노드 + 근거리 연결 (Local Roads)</div>
<div class="flex justify-center items-center gap-0.5 flex-wrap">
<span class="w-2.5 h-2.5 rounded-full bg-green-500 inline-block"></span>
<span class="border-t border-green-300 w-2 inline-block"></span>
<span class="w-2.5 h-2.5 rounded-full bg-green-500 inline-block"></span>
<span class="border-t border-green-300 w-2 inline-block"></span>
<span class="w-2.5 h-2.5 rounded-full bg-green-500 inline-block"></span>
<span class="border-t border-green-300 w-2 inline-block"></span>
<span class="w-2.5 h-2.5 rounded-full bg-green-500 inline-block"></span>
<span class="border-t border-green-300 w-2 inline-block"></span>
<span class="w-2.5 h-2.5 rounded-full bg-green-500 inline-block"></span>
<span class="border-t border-green-300 w-2 inline-block"></span>
<span class="w-2.5 h-2.5 rounded-full bg-green-600 ring-2 ring-red-400 inline-block"></span>
<span class="border-t border-green-300 w-2 inline-block"></span>
<span class="w-2.5 h-2.5 rounded-full bg-green-500 inline-block"></span>
<span class="border-t border-green-300 w-2 inline-block"></span>
<span class="w-2.5 h-2.5 rounded-full bg-green-500 inline-block"></span>
</div>
<div class="text-xs text-red-500 mt-1">▲ 검색 시작점 (Entry Point)</div>
</div>
</div>
</div>

<h4>3.3 HNSW 검색 과정 (단계별)</h4>
<ol class="list-decimal pl-6 mb-4 text-gray-700">
<li class="mb-2"><strong>진입</strong>: Layer 2(최상위)의 Entry Point에서 시작</li>
<li class="mb-2"><strong>탐욕 탐색(Greedy Search)</strong>: 현재 레이어에서 쿼리 벡터에 가장 가까운 노드로 이동</li>
<li class="mb-2"><strong>하강(Descent)</strong>: 더 이상 가까운 노드가 없으면 한 단계 아래 레이어로 이동</li>
<li class="mb-2"><strong>반복</strong>: Layer 0에 도달할 때까지 2-3단계 반복</li>
<li class="mb-2"><strong>후보 탐색</strong>: Layer 0에서 주변 노드를 확장 탐색하여 Top-K 결과 수집</li>
</ol>
<p><strong>시간 복잡도</strong>: O(log N) — N: 전체 벡터 수</p>

<h4>3.4 HNSW 인덱스 구축 과정</h4>
<ol class="list-decimal pl-6 mb-4 text-gray-700">
<li class="mb-2"><strong>초기화</strong>: 빈 그래프에서 시작</li>
<li class="mb-2"><strong>레이어 결정</strong>: 새 노드의 삽입 레이어를 확률적으로 결정 (지수 감소: P(layer=l) = 1/M^l)</li>
<li class="mb-2"><strong>연결 생성</strong>: 삽입 레이어부터 Layer 0까지 각 레이어에서 가장 가까운 M개 이웃과 연결</li>
<li class="mb-2"><strong>가지치기</strong>: 연결 수가 M_max를 초과하면 가장 먼 연결 제거</li>
</ol>

<p><strong>핵심 파라미터</strong>:</p>
<table>
<tr><th>파라미터</th><th>의미</th><th>영향</th></tr>
<tr><td>M</td><td>각 노드의 최대 이웃 수</td><td>M↑: 정확도↑, 메모리↑, 구축시간↑</td></tr>
<tr><td>ef_construction</td><td>인덱스 구축 시 후보 리스트 크기</td><td>ef↑: 정확도↑, 구축시간↑</td></tr>
<tr><td>ef_search</td><td>검색 시 후보 리스트 크기</td><td>ef↑: 정확도↑, 검색시간↑</td></tr>
</table>


<h3>제4장 주요 ANN 알고리즘 비교</h3>
<table>
<tr><th>비교 기준</th><th>HNSW</th><th>IVF(Inverted File)</th><th>PQ(Product Quantization)</th><th>Annoy</th></tr>
<tr><td>자료구조</td><td>계층적 그래프</td><td>역인덱스 + 클러스터</td><td>압축된 코드</td><td>이진 트리 앙상블</td></tr>
<tr><td>검색 속도</td><td>매우 빠름</td><td>빠름</td><td>보통</td><td>빠름</td></tr>
<tr><td>메모리 사용</td><td>높음</td><td>보통</td><td>매우 낮음</td><td>보통</td></tr>
<tr><td>정확도(Recall)</td><td>높음 (95~99%)</td><td>보통~높음</td><td>보통</td><td>보통</td></tr>
<tr><td>인덱스 구축 시간</td><td>느림</td><td>보통</td><td>빠름</td><td>빠름</td></tr>
<tr><td>동적 삽입/삭제</td><td>지원</td><td>제한적</td><td>미지원</td><td>미지원</td></tr>
<tr><td>주요 사용처</td><td>Milvus, Qdrant, pgvector</td><td>FAISS</td><td>FAISS (메모리 절약)</td><td>Spotify 추천</td></tr>
</table>

<h3>제5장 대표 벡터 DB 제품 비교</h3>
<table>
<tr><th>제품</th><th>개발사</th><th>유형</th><th>주요 인덱스</th><th>특징</th></tr>
<tr><td>Pinecone</td><td>Pinecone</td><td>완전 관리형 SaaS</td><td>자체(독점)</td><td>가장 쉬운 사용성, 서버리스</td></tr>
<tr><td>Milvus</td><td>Zilliz</td><td>오픈소스</td><td>HNSW, IVF, PQ</td><td>가장 큰 오픈소스 벡터 DB</td></tr>
<tr><td>Qdrant</td><td>Qdrant</td><td>오픈소스</td><td>HNSW</td><td>Rust 기반 고성능</td></tr>
<tr><td>Weaviate</td><td>Weaviate</td><td>오픈소스</td><td>HNSW</td><td>GraphQL API, 모듈형</td></tr>
<tr><td>Chroma</td><td>Chroma</td><td>오픈소스</td><td>HNSW</td><td>경량, LangChain 통합</td></tr>
<tr><td>pgvector</td><td>PostgreSQL 확장</td><td>오픈소스</td><td>HNSW, IVFFlat</td><td>기존 PostgreSQL 활용 가능</td></tr>
</table>

<h3>제6장 적용 사례</h3>

<h4>6.1 ChatGPT + RAG 아키텍처</h4>
<p>OpenAI의 ChatGPT는 학습 데이터 컷오프로 인한 최신 정보 부재 문제를 해결하기 위해 RAG(Retrieval-Augmented Generation) 아키텍처를 활용한다. 사용자 질문을 벡터로 변환 → 벡터 DB에서 유사 문서 검색 → 검색된 문서를 컨텍스트로 LLM에 전달하는 구조이다. 2023년 기준 ChatGPT의 Browse with Bing, Retrieval Plugin 등이 이 구조를 활용하며, 벡터 DB 시장의 폭발적 성장(전년 대비 300%)을 견인하였다.</p>

<h4>6.2 쿠팡 상품 추천 시스템</h4>
<p>쿠팡은 약 5억 개의 상품 데이터에 대해 벡터 임베딩 기반 유사 상품 추천 시스템을 운영한다. 상품 이미지와 텍스트 설명을 CLIP 모델로 임베딩하여 벡터 DB에 저장하고, 사용자가 특정 상품을 조회할 때 HNSW 기반 ANN 검색으로 수 밀리초 내에 유사 상품 Top-10을 반환한다. 이를 통해 추천 클릭률(CTR)이 기존 협업 필터링 대비 약 23% 향상되었다.</p>

<h3>제7장 연관 이론 연결</h3>

<h4>7.1 CAP 이론과 벡터 DB</h4>
<p>벡터 DB도 분산 시스템이므로 CAP 이론이 적용된다. Milvus는 etcd 기반 CP 구조, Cassandra 기반 Weaviate는 AP 구조를 채택하고 있다. 앞서 학습한 CAP/PACELC 이론을 벡터 DB의 아키텍처 선택에 적용하면 분산 시스템에 대한 통합적 이해를 보여줄 수 있다.</p>

<h4>7.2 차원의 저주(Curse of Dimensionality)</h4>
<p>Richard Bellman(1961)이 명명한 차원의 저주는 차원이 증가할수록 데이터 간 거리가 균일해져 유의미한 유사도 계산이 어려워지는 현상이다. 벡터 DB에서 ANN 알고리즘이 필수적인 이유이며, HNSW의 계층적 탐색이 이 문제를 완화하는 메커니즘이다.</p>

<h4>7.3 정보 검색(IR)과 역인덱스</h4>
<p>전통적 정보 검색의 역인덱스(Inverted Index)가 키워드 매칭에 최적화되어 있다면, 벡터 DB의 ANN 인덱스는 의미 매칭(Semantic Search)에 최적화되어 있다. 현대 검색 시스템은 BM25(키워드) + 벡터 검색(의미)을 결합한 하이브리드 검색을 추구한다.</p>

<h3>제8장 시험 출제 관점</h3>

<h4>8.1 기출 연계 포인트</h4>
<ul>
<li><strong>1교시형</strong>: "벡터 DB의 개념과 HNSW의 인덱싱 구조를 설명하시오" → 제2~3장 중심</li>
<li><strong>1교시형</strong>: "ANN 알고리즘의 유형과 비교" → 제4장 비교표 활용</li>
<li><strong>2교시형 연계</strong>: "RAG 아키텍처의 구성요소와 구현 전략" → 벡터 DB + LLM 연계</li>
</ul>

<h4>8.2 답안 구성 전략</h4>
<p><strong>서론 (15%)</strong>: AI 시대 비정형 데이터 검색 수요 + 벡터 DB 정의</p>
<p><strong>본론 (75%)</strong>:</p>
<ul>
<li>벡터 DB 아키텍처 및 임베딩 개념 (20%)</li>
<li>HNSW 계층 구조 및 검색 과정 (25%)</li>
<li>ANN 알고리즘 비교(HNSW/IVF/PQ) (15%)</li>
<li>RAG 연계 적용 사례 (15%)</li>
</ul>
<p><strong>결론 (10%)</strong>: 하이브리드 검색 추세 + AI 인프라의 핵심 요소로서의 발전 전망</p>

</div>
</div>
</section>

<section id="script" class="hidden">
<div class="bg-white rounded-xl shadow-sm p-6 sm:p-8 border-l-4 border-amber-500">
<div class="flex items-center gap-2 mb-4">
<h2 class="text-xl font-bold text-gray-900">🎬 강의 스크립트</h2>
<span class="bg-amber-100 text-amber-800 text-xs font-bold px-2 py-0.5 rounded-full">🔒 멘토 전용</span>
</div>
<div class="bg-amber-50 border border-amber-200 rounded-lg p-3 mb-6 text-sm text-amber-800">
이 탭은 멘토 전용 콘텐츠입니다. URL에 <code class="bg-amber-100 px-1 rounded">?mentor=true</code> 파라미터를 추가하면 접근할 수 있습니다.
</div>
<div class="textbook-content">

<h4>🎬 도입부 — 약 3분</h4>
<p>안녕하세요, ZIP-UP 멘토링 수강생 여러분. 오늘은 요즘 가장 핫한 토픽 중 하나인 벡터 데이터베이스와 HNSW에 대해 이야기해보겠습니다.</p>
<p>이 토픽이 왜 중요하냐면요, 2022년 ChatGPT가 나온 이후로 AI 관련 문제가 기술사 시험에서 크게 늘어나고 있잖아요? 그 AI의 핵심 인프라가 바로 벡터 데이터베이스예요. ChatGPT 같은 LLM이 최신 정보를 모를 때 어떻게 하냐면, 벡터 DB에서 관련 문서를 찾아서 참고하는 방식을 쓰거든요. 이걸 <span class="highlight">RAG(Retrieval-Augmented Generation)</span>라고 하는데, 이 RAG의 핵심이 벡터 DB예요. 2023년 벡터 DB 시장이 전년 대비 300% 성장해서 15억 달러를 돌파했는데, 이런 수치가 이 기술의 중요성을 말해줍니다.</p>

<h4>🎬 벡터 DB 기초 개념 — 약 4분</h4>
<p>먼저 벡터 DB가 뭔지부터 설명할게요. 여러분이 아는 일반 데이터베이스, 그러니까 MySQL이나 Oracle 같은 RDBMS는 정확한 매칭에 최적화되어 있어요. "이름이 '홍길동'인 사람을 찾아줘"처럼 정확히 일치하는 데이터를 찾는 거죠. 그런데 벡터 DB는 다릅니다. "이 문장과 의미가 가장 비슷한 문서를 찾아줘"라는 유사도 기반 검색에 최적화되어 있어요.</p>
<p>비유를 하나 들어볼게요. 도서관에서 책을 찾는다고 생각해 보세요. 전통 DB는 "청구번호 123.45인 책을 찾아줘"처럼 정확한 번호로 찾는 거예요. 벡터 DB는 "머신러닝에 대한 입문서 수준의 책"이라고 말하면, 의미적으로 가장 비슷한 책들을 추천해 주는 거예요. 완전히 다른 검색 패러다임이죠.</p>
<p>이게 어떻게 가능하냐면, <span class="highlight">임베딩(Embedding)</span>이라는 기술 때문이에요. 텍스트든 이미지든 비정형 데이터를 고차원 벡터, 쉽게 말해서 숫자 배열로 변환하는 거예요. "고양이"라는 단어를 768개의 실수로 이루어진 벡터로 변환하면, "강아지"의 벡터와는 가까운 위치에, "자동차"의 벡터와는 먼 위치에 배치되는 거예요.</p>

<h4>🎬 HNSW 핵심 구조 — 약 5분</h4>
<p>자, 이제 핵심으로 들어갈게요. HNSW예요. Hierarchical Navigable Small World의 약자인데, 2016년에 Malkov와 Yashunin이 발표한 ANN 알고리즘이에요. ANN이 뭐냐면 Approximate Nearest Neighbor, 근사 최근접 이웃 검색이에요.</p>
<p>여기서 중요한 개념이 있어요. <span class="highlight">"차원의 저주(Curse of Dimensionality)"</span>라는 건데, Richard Bellman이 1961년에 명명한 현상이에요. 차원이 높아질수록 모든 점 사이의 거리가 비슷해져서 유의미한 "가장 가까운 이웃"을 찾기 어려워지는 거예요. 768차원에서 수억 개 벡터를 다루니까 이 문제가 심각하죠. 그래서 "근사"가 필요한 거예요.</p>
<p>HNSW의 구조를 비유로 설명해 드릴게요. 고속도로 시스템을 생각해 보세요. Layer 2(최상위)는 고속도로예요. 노드가 적지만 서로 멀리 떨어진 노드끼리 직접 연결되어 있어서, 한 번에 먼 거리를 이동할 수 있어요. Layer 1은 국도예요. 더 많은 노드가 있고 중거리를 커버하죠. Layer 0(최하위)은 골목길이에요. 모든 노드가 있고 근거리만 연결됩니다.</p>
<p>검색할 때는 이렇게 진행돼요. 먼저 Layer 2의 진입점(Entry Point)에서 시작합니다. 쿼리 벡터에 가장 가까운 노드로 이동하는 "탐욕 탐색(Greedy Search)"을 수행하고, 더 가까운 이웃이 없으면 Layer 1로 내려갑니다. 다시 Layer 0으로 내려가서 최종 목적지를 찾는 거예요. 이 과정의 시간 복잡도가 O(log N)이에요. 이 <span class="highlight">"계탐하"</span> — 계층 진입, 탐욕 탐색, 하강 반복을 답안에 단계별로 쓰면 구조를 이해하고 있다는 걸 증명할 수 있어요.</p>

<h4>🎬 ANN 비교 & 사례 — 약 4분</h4>
<p>다른 ANN 알고리즘과의 비교도 해 드릴게요. IVF(Inverted File)는 데이터를 클러스터로 나눠서 해당 클러스터만 검색하는 방식이에요. PQ(Product Quantization)는 벡터를 압축해서 메모리를 줄이는 방식이고요. HNSW가 이들보다 좋은 점은 검색 정확도(Recall)가 가장 높고, 동적으로 새 데이터를 삽입/삭제할 수 있다는 거예요. 대신 메모리를 많이 쓴다는 단점이 있죠.</p>
<p>국내 사례도 하나 알려드릴게요. 쿠팡이 약 5억 개 상품에 대해 벡터 임베딩 기반 유사 상품 추천을 운영하고 있어요. CLIP 모델로 임베딩해서 HNSW로 수 밀리초 안에 유사 상품 Top-10을 찾아주는 거예요. 기존 협업 필터링 대비 추천 클릭률이 약 23% 향상됐다고 합니다.</p>
<p>적용 사례 중에서도 가장 중요한 <span class="highlight">RAG 아키텍처</span>를 설명해 드릴게요. 사용자가 ChatGPT에 질문하면, 먼저 이 질문을 벡터로 변환합니다. 그 벡터로 벡터 DB에서 유사한 문서를 검색해요. 검색된 문서를 LLM에 전달하면, LLM이 최신 정보를 반영한 답변을 생성하는 거예요. 이 구조가 지금 AI 서비스의 표준이 되어 가고 있어요.</p>

<h4>🎬 답안 작성 전략 & 마무리 — 약 4분</h4>
<p>답안 작성 팁 정리해 드릴게요. 서론에서 AI 시대 의미 기반 검색의 필요성을 짧게 쓰고, 본론에서 제일 중요한 건 HNSW 계층 구조 도식이에요. Layer 0~2를 그리고 검색 경로를 화살표로 표시하세요. 그 다음 ANN 비교표, 유사도 함수 비교표를 넣으면 좋고요. 결론에서는 하이브리드 검색(키워드 BM25 + 벡터 검색)이 현대 검색의 표준이라는 트렌드를 언급하면 깔끔합니다.</p>
<p>분량 배분은 서론 15%, 아키텍처 20%, HNSW 25%, ANN 비교 15%, 사례 15%, 결론 10%입니다. 이 중에서 HNSW 계층 구조 도식이 가장 중요한데요, 답안지에 Layer 0, 1, 2를 수직으로 쌓고, 상위 레이어는 노드가 적고 장거리 연결, 하위 레이어는 노드가 많고 근거리 연결이라는 걸 시각적으로 표현해 주세요.</p>
<p>정리할게요. <span class="highlight">"임유인"</span> — 임베딩, 유사도 함수, 인덱스(ANN). 벡터 DB의 3대 핵심. <span class="highlight">"계탐하"</span> — 계층 진입, 탐욕 탐색, 하강 반복. HNSW 검색 과정. HNSW는 O(log N), 정확도 95~99%. 이 포인트만 잡으시면 됩니다. 다음 시간에는 암달의 법칙에 대해 다뤄볼 건데요, 병렬 처리의 한계를 수식으로 증명하는 토픽이니까 오늘 배운 벡터 DB의 분산 처리와도 연결됩니다. 화이팅 하시고, 수고하셨습니다!</p>

</div>
</div>
</section>

<section id="quiz" class="hidden">
<div class="bg-white rounded-xl shadow-sm p-6 sm:p-8">
<h2 class="text-xl font-bold text-gray-900 mb-6">🧠 퀴즈 & 암기</h2>

            <!-- AI 실전 퀴즈 영역 -->
            <div class="bg-indigo-50 rounded-xl p-6 border border-indigo-100 mb-8">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="font-bold text-indigo-900 text-lg flex items-center"><span class="mr-2">🧠</span> AI 실전 문제 생성</h3>
                    <button onclick="generateQuiz()" id="btn-quiz-gen" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm font-medium shadow-sm transition-colors flex items-center gap-2"><span>✨ 새로운 문제 생성</span></button>
                </div>
                <div id="quiz-loading" class="hidden py-8 text-center">
                    <div class="typing-indicator flex justify-center mb-2"><span></span><span></span><span></span></div>
                    <p class="text-indigo-600 text-sm">AI가 문제를 출제하고 있습니다...</p>
                </div>
                <div id="quiz-container" class="hidden space-y-4">
                    <div class="bg-white p-5 rounded-lg shadow-sm border border-indigo-100">
                        <div class="flex items-start gap-2 mb-4">
                            <span id="quiz-type-badge" class="bg-indigo-100 text-indigo-800 text-xs font-bold px-2 py-1 rounded whitespace-nowrap mt-1">객관식</span>
                            <p id="quiz-question" class="font-bold text-gray-800 text-lg"></p>
                        </div>
                        <div id="quiz-options" class="space-y-2"></div>
                        <div id="quiz-input-area" class="hidden mt-4">
                            <div class="flex gap-2">
                                <input type="text" id="quiz-answer-input" placeholder="정답을 입력하세요" class="flex-grow border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                <button onclick="checkShortAnswer()" id="btn-short-submit" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-bold">제출</button>
                            </div>
                        </div>
                    </div>
                    <div id="quiz-feedback" class="hidden bg-white p-5 rounded-lg border-l-4"></div>
                </div>
                <div id="quiz-placeholder" class="text-center py-8 text-gray-500 border-2 border-dashed border-indigo-200 rounded-lg">
                    <p>'새로운 문제 생성' 버튼을 눌러 실력을 점검해보세요.</p>
                </div>
            </div>

<!-- 암기 노트 ① 두문자어 -->
<h3 class="text-lg font-bold text-gray-900 mb-4">📝 암기 노트 ① — 두문자어</h3>
<div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
<div class="bg-indigo-50 rounded-xl p-5 border border-indigo-200 text-center">
<div class="text-3xl font-black text-indigo-600 mb-2">"임유인"</div>
<div class="text-sm text-indigo-800 font-medium">벡터 DB 3대 구성</div>
<div class="mt-2 text-xs text-indigo-600"><strong>임</strong>베딩 모델 + <strong>유</strong>사도 함수 + <strong>인</strong>덱스(ANN)</div>
</div>
<div class="bg-green-50 rounded-xl p-5 border border-green-200 text-center">
<div class="text-3xl font-black text-green-600 mb-2">"계탐하"</div>
<div class="text-sm text-green-800 font-medium">HNSW 검색 3단계</div>
<div class="mt-2 text-xs text-green-600"><strong>계</strong>층 진입 + <strong>탐</strong>욕 탐색 + <strong>하</strong>강 반복</div>
</div>
<div class="bg-purple-50 rounded-xl p-5 border border-purple-200 text-center">
<div class="text-3xl font-black text-purple-600 mb-2">"에이치아피"</div>
<div class="text-sm text-purple-800 font-medium">HNSW 핵심 파라미터</div>
<div class="mt-2 text-xs text-purple-600"><strong>M</strong>(이웃 수) + <strong>ef</strong>(후보 크기)</div>
</div>
</div>

<!-- 암기 노트 ② 골격 답안 -->
<h3 class="text-lg font-bold text-gray-900 mb-4">📝 암기 노트 ② — 골격 답안</h3>
<div class="overflow-x-auto mb-8">
<table class="w-full text-sm border-collapse">
<thead><tr class="bg-gray-50">
<th class="border p-3 text-left">단락</th><th class="border p-3 text-left">비율</th><th class="border p-3 text-left">핵심 내용</th>
</tr></thead>
<tbody>
<tr><td class="border p-3 font-medium">서론</td><td class="border p-3">15%</td><td class="border p-3">AI 시대 의미 기반 검색 수요 → 벡터 DB 정의 → 임베딩 개념</td></tr>
<tr><td class="border p-3 font-medium" rowspan="4">본론</td><td class="border p-3">20%</td><td class="border p-3">벡터 DB 아키텍처 (임베딩→벡터 저장→ANN 검색 구조도)</td></tr>
<tr><td class="border p-3">25%</td><td class="border p-3">HNSW 계층 구조 도식 + 검색 과정(계탐하) + 파라미터</td></tr>
<tr><td class="border p-3">15%</td><td class="border p-3">ANN 비교표 (HNSW/IVF/PQ: 속도/메모리/정확도)</td></tr>
<tr><td class="border p-3">15%</td><td class="border p-3">RAG 아키텍처 + 추천 시스템 적용 사례</td></tr>
<tr><td class="border p-3 font-medium">결론</td><td class="border p-3">10%</td><td class="border p-3">하이브리드 검색(BM25+벡터) 추세 + AI 인프라 핵심 전망</td></tr>
</tbody>
</table>
</div>

<!-- 암기 노트 ③ 필수 도식 + 차별화 포인트 -->
<h3 class="text-lg font-bold text-gray-900 mb-4">📝 암기 노트 ③ — 필수 도식 & 차별화</h3>
<div class="space-y-4 mb-8">
<div class="bg-amber-50 rounded-lg border border-amber-200 p-4">
<h4 class="font-bold text-amber-800 mb-2">📊 필수 도식 4가지</h4>
<ol class="list-decimal pl-5 text-sm text-amber-900 space-y-1">
<li><strong>HNSW 계층 구조도</strong>: Layer 0~2 + 검색 경로 표시 (가장 중요!)</li>
<li><strong>벡터 DB 아키텍처</strong>: 임베딩 모델 → 벡터 DB → 애플리케이션</li>
<li><strong>ANN 알고리즘 비교표</strong>: 4~5개 알고리즘 비교 (5개 기준)</li>
<li><strong>유사도 함수 비교표</strong>: 코사인/유클리드/내적</li>
</ol>
</div>
<div class="bg-teal-50 rounded-lg border border-teal-200 p-4">
<h4 class="font-bold text-teal-800 mb-2">💎 차별화 포인트</h4>
<ul class="list-disc pl-5 text-sm text-teal-900 space-y-1">
<li>HNSW 검색 과정을 시각적 도식으로 → 구조 이해도 증명</li>
<li>O(log N) vs Brute Force O(N×d) 비교로 성능 우위 설명</li>
<li>RAG 아키텍처 연결로 LLM 시대 실무 활용도 증명</li>
<li>pgvector 언급 (기존 RDBMS 확장)으로 실용적 접근 제시</li>
</ul>
</div>
</div>

<!-- 제2부 전체 — 암기 요약 자료 -->
<h3 class="text-lg font-bold text-indigo-800 mt-10 mb-4 border-l-4 border-indigo-500 pl-3">제2부 — 서술형 답안 암기 요약</h3>
<div class="textbook-content">

<h4>한 줄 정의</h4>
<div class="def-box">
<p>벡터 데이터베이스는 고차원 임베딩 벡터를 저장하고 ANN(근사 최근접 이웃) 검색을 수행하는 DB이며, HNSW는 계층적 그래프 기반의 가장 대표적인 ANN 알고리즘이다.</p>
</div>

<h4>핵심 키워드 맵</h4>
<div class="bg-slate-50 rounded-lg border p-4 mb-4">
<div class="space-y-1 text-sm">
<div class="font-bold text-gray-800">벡터 DB / HNSW</div>
<div class="pl-4 border-l-2 border-gray-300 ml-2 space-y-1">
<div><strong>벡터 DB</strong></div>
<div class="pl-4 text-gray-600">├ 임베딩: 비정형→고차원 벡터 변환</div>
<div class="pl-4 text-gray-600">├ 유사도 함수: 코사인, 유클리드, 내적</div>
<div class="pl-4 text-gray-600">├ 아키텍처: 쿼리엔진+인덱스엔진+스토리지</div>
<div class="pl-4 text-gray-600">└ 제품: Pinecone, Milvus, Qdrant, pgvector</div>
<div><strong>HNSW</strong> (Malkov &amp; Yashunin, 2016)</div>
<div class="pl-4 text-gray-600">├ 구조: 계층적 Small World 그래프</div>
<div class="pl-4 text-gray-600">├ 검색: 상위→하위 탐욕 탐색, O(log N)</div>
<div class="pl-4 text-gray-600">├ 파라미터: M, ef_construction, ef_search</div>
<div class="pl-4 text-gray-600">└ 장점: 높은 Recall, 동적 삽입 지원</div>
<div><strong>ANN 비교</strong>: HNSW, IVF, PQ, Annoy</div>
<div><strong>연관</strong>: RAG, CAP이론, 차원의 저주</div>
</div>
</div>
</div>

<h4>두문자어 암기법</h4>
<p><strong>"임유인"</strong> = 벡터 DB 3대 구성: <span class="highlight">임</span>베딩 모델, <span class="highlight">유</span>사도 함수, <span class="highlight">인</span>덱스(ANN)</p>
<p><strong>"계탐하"</strong> = HNSW 검색 3단계: <span class="highlight">계</span>층 진입, <span class="highlight">탐</span>욕 탐색, <span class="highlight">하</span>강 반복</p>
<p><strong>"에이치아피"</strong> = HNSW 핵심 파라미터: M(이웃 수), ef(후보 크기)</p>

<h4>골격 답안 구조</h4>
<p><strong>[서론 15%]</strong> — AI 시대 의미 기반 검색 수요 → 벡터 DB 정의 → 임베딩 개념</p>
<p><strong>[본론 75%]</strong></p>
<ul>
<li>벡터 DB 아키텍처 (20%) — 임베딩 생성 → 벡터 저장 → ANN 검색 구조도</li>
<li>HNSW 인덱싱 구조 (25%) — 계층적 그래프 도식 + 검색 과정(진입→탐색→하강) + 파라미터</li>
<li>ANN 알고리즘 비교 (15%) — HNSW vs IVF vs PQ 비교표 (속도/메모리/정확도)</li>
<li>적용 사례 (15%) — RAG 아키텍처 + 추천 시스템 사례</li>
</ul>
<p><strong>[결론 10%]</strong> — 하이브리드 검색(BM25+벡터) 추세 + AI 인프라 핵심 전망</p>

<h4>필수 도식/표</h4>
<ol class="list-decimal pl-5">
<li><strong>HNSW 계층 구조도</strong>: Layer 0~2 + 검색 경로 표시 (가장 중요!)</li>
<li><strong>벡터 DB 아키텍처</strong>: 임베딩 모델→벡터 DB→애플리케이션</li>
<li><strong>ANN 알고리즘 비교표</strong>: 4~5개 알고리즘 비교 (5개 기준)</li>
<li><strong>유사도 함수 비교표</strong>: 코사인/유클리드/내적</li>
</ol>

<h4>차별화 포인트</h4>
<ul>
<li>HNSW의 검색 과정을 시각적 도식으로 표현하면 구조 이해도 증명</li>
<li>O(log N) 시간 복잡도와 Brute Force의 O(N×d) 비교로 성능 우위 설명</li>
<li>RAG 아키텍처와의 연결로 LLM 시대의 실무 활용도 증명</li>
<li>pgvector 언급(기존 RDBMS 확장)으로 실용적 접근 제시</li>
</ul>

</div>
</div>
</section>

<div id="chat-sidebar" class="closed fixed top-0 right-0 w-80 sm:w-96 h-full bg-white shadow-2xl z-50 flex flex-col">
<div class="flex items-center justify-between p-4 border-b bg-indigo-600 text-white">
<span class="font-bold">💬 AI 튜터</span>
<button onclick="toggleChat()" class="text-white hover:text-indigo-200 text-xl">&times;</button>
</div>
<div id="chat-messages" class="flex-grow overflow-y-auto p-4 flex flex-col space-y-2" style="max-height:calc(100vh - 140px)">
<div class="chat-msg ai">안녕하세요! 벡터 데이터베이스와 HNSW에 대해 궁금한 점을 질문해주세요.</div>
</div>
<div class="p-3 border-t flex gap-2">
<input type="text" id="chat-input" placeholder="질문을 입력하세요..." class="flex-grow border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400" onkeypress="if(event.key==='Enter')sendChat()">
<button onclick="sendChat()" class="bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-indigo-700">전송</button>
</div>
</div>
<button onclick="toggleChat()" class="fixed bottom-6 right-6 bg-indigo-600 text-white w-14 h-14 rounded-full shadow-lg hover:bg-indigo-700 transition-all z-40 flex items-center justify-center text-2xl">💬</button>
<div id="settings-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
<div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-6">
<div class="flex justify-between items-center mb-4"><h3 class="text-lg font-bold text-gray-900">🔑 API Key 설정</h3><button onclick="toggleSettings()" class="text-gray-400 hover:text-gray-600 text-xl">&times;</button></div>
<p class="text-sm text-gray-600 mb-4">Gemini API Key를 입력하면 AI 튜터 채팅과 퀴즈 생성 기능을 사용할 수 있습니다.</p>
<input type="password" id="api-key-input" placeholder="Gemini API Key 입력..." class="w-full border rounded-lg px-4 py-2 mb-4 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400">
<div class="flex gap-2"><button onclick="saveApiKey()" class="flex-grow bg-indigo-600 text-white py-2 rounded-lg text-sm font-medium hover:bg-indigo-700">저장</button><button onclick="toggleSettings()" class="px-4 py-2 border rounded-lg text-sm text-gray-600 hover:bg-gray-50">취소</button></div>
<p class="text-xs text-gray-400 mt-3">💡 URL에 ?key=YOUR_KEY 파라미터로도 설정 가능합니다.</p>
</div>
</div>

</main>
<footer class="bg-white mt-12 py-8 border-t border-gray-200">
<div class="max-w-6xl mx-auto px-4 text-center">
<div class="flex flex-col md:flex-row justify-center items-center gap-2 md:gap-6 text-sm text-gray-600 mb-3 font-medium">
<div class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-indigo-500"></span><span>박교익PE (132회 정보관리기술사, dr.code92@gmail.com)</span></div>
</div>
<p class="text-xs text-gray-400">Copyright © KPC 정보관리기술사 ZIP-UP 심화반. All rights reserved.</p>
</div>
</footer>
<script>
var isMentorMode = new URLSearchParams(window.location.search).get('mentor') === 'true';
if (isMentorMode) { document.getElementById('nav-script').classList.remove('hidden'); }
var sections = isMentorMode
    ? ['overview','hnsw','comparison','cases','textbook','script','quiz']
    : ['overview','hnsw','comparison','cases','textbook','quiz'];

function navTo(id) {
    document.querySelectorAll('.nav-item').forEach(function(el){ el.classList.remove('active','text-indigo-600'); });
    document.getElementById('nav-'+id).classList.add('active','text-indigo-600');
    sections.forEach(function(s){ document.getElementById(s).classList.add('hidden'); });
    document.getElementById(id).classList.remove('hidden');
    window.scrollTo({top:0,behavior:'smooth'});
}

function getApiKey() {
    var urlKey = new URLSearchParams(window.location.search).get('key');
    return urlKey || localStorage.getItem('geminiKey') || localStorage.getItem('gemini_api_key') || '';
}
function saveApiKey() {
    var k = document.getElementById('api-key-input').value.trim();
    if(k){ localStorage.setItem('geminiKey',k); localStorage.setItem('gemini_api_key',k); alert('API Key가 저장되었습니다.'); toggleSettings(); }
    else { alert('API Key를 입력해주세요.'); }
}
function toggleSettings() {
    var m = document.getElementById('settings-modal');
    m.classList.toggle('hidden');
    if(!m.classList.contains('hidden')){ document.getElementById('api-key-input').value = getApiKey(); }
}

function toggleChat() {
    var sb = document.getElementById('chat-sidebar');
    sb.classList.toggle('closed'); sb.classList.toggle('open');
}
async function sendChat() {
    var input = document.getElementById('chat-input');
    var msg = input.value.trim(); if(!msg) return; input.value = '';
    var k = getApiKey();
    if(!k){ alert('API Key를 먼저 설정해주세요.'); toggleSettings(); return; }
    var mc = document.getElementById('chat-messages');
    mc.innerHTML += '<div class="chat-msg user">'+msg+'</div>';
    mc.innerHTML += '<div id="chat-typing" class="chat-msg ai"><div class="typing-indicator"><span></span><span></span><span></span></div></div>';
    mc.scrollTop = mc.scrollHeight;
    try {
        var r = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-3-pro-preview:generateContent?key='+k, {
            method:'POST', headers:{'Content-Type':'application/json'},
            body:JSON.stringify({contents:[{parts:[{text:"당신은 정보관리기술사 시험 멘토입니다. '벡터 데이터베이스와 HNSW' 관련 질문에 전문적이고 명쾌하게 답변해주세요. 300자 이내로 핵심만 요약.\n\n질문: "+msg}]}]})
        });
        var d = await r.json();
        var reply = d.candidates[0].content.parts[0].text;
        document.getElementById('chat-typing').remove();
        mc.innerHTML += '<div class="chat-msg ai">'+marked.parse(reply)+'</div>';
    } catch(e) {
        document.getElementById('chat-typing').remove();
        mc.innerHTML += '<div class="chat-msg ai">⚠️ 응답 생성 중 오류가 발생했습니다.</div>';
    }
    mc.scrollTop = mc.scrollHeight;
}

var geminiKey = (typeof getApiKey === 'function') ? (getApiKey() || '') : (localStorage.getItem('geminiKey') || localStorage.getItem('gemini_api_key') || '');
var quizTypeHistory = [];
var currentQuizData = null;
var quizTopics = [
    { category: "벡터 DB 기초", keywords: "정의, 임베딩, 고차원 벡터, 유사도 검색, ANN, RDBMS 비교" },
    { category: "임베딩과 유사도", keywords: "Word2Vec, BERT, Ada-002, 코사인 유사도, 유클리드 거리, 내적" },
    { category: "HNSW 구조", keywords: "Malkov Yashunin 2016, 계층적 그래프, Small World, Layer, Entry Point" },
    { category: "HNSW 검색과정", keywords: "탐욕 탐색, 하강, O(log N), 계탐하, M, ef_construction, ef_search" },
    { category: "ANN 알고리즘 비교", keywords: "HNSW, IVF, PQ, Annoy, Brute Force, 차원의 저주" },
    { category: "벡터 DB 제품", keywords: "Pinecone, Milvus, Qdrant, Weaviate, Chroma, pgvector, FAISS" },
    { category: "적용 사례", keywords: "RAG, ChatGPT, 쿠팡 추천, CLIP, 하이브리드 검색, BM25" },
    { category: "연관 이론", keywords: "CAP 이론, 차원의 저주 Bellman 1961, 역인덱스, Semantic Search" }
];

async function generateQuiz() {
    geminiKey = (typeof getApiKey === 'function') ? (getApiKey() || '') : geminiKey;
    if (!geminiKey) { alert('API Key를 먼저 설정해주세요.'); toggleSettings(); return; }
    document.getElementById('btn-quiz-gen').disabled = true;
    document.getElementById('btn-quiz-gen').innerHTML = '<span>⏳ 생성 중...</span>';
    document.getElementById('quiz-loading').classList.remove('hidden');
    document.getElementById('quiz-container').classList.add('hidden');
    document.getElementById('quiz-placeholder').classList.add('hidden');
    document.getElementById('quiz-feedback').classList.add('hidden');
    var isMC;
    var recent = quizTypeHistory.slice(-2);
    if (recent.length >= 2 && recent[0] === recent[1]) { isMC = !recent[1]; }
    else { isMC = Math.random() > 0.5; }
    quizTypeHistory.push(isMC);
    var selected = quizTopics[Math.floor(Math.random() * quizTopics.length)];
    var prompt;
    if (isMC) {
        prompt = "다음 카테고리에 대한 객관식 퀴즈 1문제를 만드세요.\n카테고리: " + selected.category + "\n관련 키워드: " + selected.keywords + "\n규칙: 반드시 위 카테고리와 키워드에 직접 관련된 문제를 출제하세요.\n4개의 선택지를 제공하고, 정답과 해설을 포함하세요.\nOutput JSON: {\"question\":\"문제\",\"options\":[\"A\",\"B\",\"C\",\"D\"],\"correctIndex\":0,\"explanation\":\"해설\"}";
    } else {
        prompt = "다음 카테고리에 대한 단답형 퀴즈 1문제를 만드세요.\n카테고리: " + selected.category + "\n관련 키워드: " + selected.keywords + "\n규칙: 반드시 위 카테고리와 키워드에 직접 관련된 문제를 출제하세요.\n정답은 1~3단어로 답할 수 있는 문제여야 합니다.\nOutput JSON: {\"question\":\"문제\",\"correctAnswer\":\"정답\",\"explanation\":\"해설\"}";
    }
    try {
        var r = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-3-pro-preview:generateContent?key=' + geminiKey, {
            method: 'POST', headers: {'Content-Type':'application/json'},
            body: JSON.stringify({ contents: [{parts:[{text: prompt}]}], generationConfig: { responseMimeType: "application/json" } })
        });
        var d = await r.json();
        var t = d.candidates[0].content.parts[0].text;
        t = t.replace(/```json\s*/gi,"").replace(/```\s*/g,"").trim();
        var depth=0, start=-1, end=-1;
        for(var i=0;i<t.length;i++){if(t[i]==='{'){if(depth===0)start=i;depth++;}else if(t[i]==='}'){depth--;if(depth===0&&start!==-1){end=i;break;}}}
        if(start===-1||end===-1) throw new Error("No JSON found");
        t=t.substring(start,end+1);
        t=t.replace(/[\x00-\x1F\x7F]/g,function(c){return c==='\n'||c==='\r'||c==='\t'?' ':'';});
        currentQuizData = JSON.parse(t);
        renderQuiz(isMC);
    } catch(e) {
        alert('퀴즈 생성 중 오류: ' + e.message);
        document.getElementById('quiz-placeholder').classList.remove('hidden');
    }
    document.getElementById('quiz-loading').classList.add('hidden');
    document.getElementById('btn-quiz-gen').disabled = false;
    document.getElementById('btn-quiz-gen').innerHTML = '<span>✨ 새로운 문제 생성</span>';
}

function renderQuiz(isMC) {
    document.getElementById('quiz-container').classList.remove('hidden');
    document.getElementById('quiz-question').textContent = currentQuizData.question;
    document.getElementById('quiz-feedback').classList.add('hidden');
    if (isMC) {
        document.getElementById('quiz-type-badge').textContent = '객관식';
        document.getElementById('quiz-type-badge').className = 'bg-indigo-100 text-indigo-800 text-xs font-bold px-2 py-1 rounded whitespace-nowrap mt-1';
        document.getElementById('quiz-options').classList.remove('hidden');
        document.getElementById('quiz-input-area').classList.add('hidden');
        var optHtml = '';
        currentQuizData.options.forEach(function(opt, idx) {
            optHtml += '<button onclick="checkMultipleChoice('+idx+',this)" class="w-full text-left p-3 rounded-lg border border-gray-200 hover:border-indigo-400 hover:bg-indigo-50 transition-colors text-sm font-medium">'+String.fromCharCode(65+idx)+'. '+opt+'</button>';
        });
        document.getElementById('quiz-options').innerHTML = optHtml;
    } else {
        document.getElementById('quiz-type-badge').textContent = '단답형';
        document.getElementById('quiz-type-badge').className = 'bg-green-100 text-green-800 text-xs font-bold px-2 py-1 rounded whitespace-nowrap mt-1';
        document.getElementById('quiz-options').classList.add('hidden');
        document.getElementById('quiz-input-area').classList.remove('hidden');
        document.getElementById('quiz-answer-input').value = '';
        document.getElementById('quiz-answer-input').focus();
    }
}

function checkMultipleChoice(idx, btnEl) {
    var correct = idx === currentQuizData.correctIndex;
    document.querySelectorAll('#quiz-options button').forEach(function(b,i){
        b.disabled = true; b.classList.remove('hover:border-indigo-400','hover:bg-indigo-50');
        if(i===currentQuizData.correctIndex) b.classList.add('bg-green-100','border-green-500','text-green-800');
        else if(i===idx&&!correct) b.classList.add('bg-red-100','border-red-500','text-red-800');
    });
    showQuizFeedback(correct, currentQuizData.options[currentQuizData.correctIndex], currentQuizData.explanation);
}

async function checkShortAnswer() {
    geminiKey = (typeof getApiKey === 'function') ? (getApiKey() || '') : geminiKey;
    var userAnswer = document.getElementById('quiz-answer-input').value.trim();
    if (!userAnswer) { alert('정답을 입력해주세요.'); return; }
    document.getElementById('btn-short-submit').textContent = '채점 중...';
    document.getElementById('btn-short-submit').disabled = true;
    try {
        var gradingPrompt = "당신은 정보관리기술사 시험 채점관입니다. 아래 문제에 대해 사용자의 답안이 정답으로 인정될 수 있는지 판정하세요.\n\n문제: "+currentQuizData.question+"\n모범 정답: "+currentQuizData.correctAnswer+"\n사용자 답안: "+userAnswer+"\n\n판정 기준:\n- 핵심 의미가 동일하면 정답\n- 약어/풀네임 모두 인정\n- 영어/한글 혼용 인정\n- 띄어쓰기/조사 차이는 무시\n- 의미가 명확히 다르면 오답\n\nOutput JSON: {\"correct\":true,\"reason\":\"판정 이유\"}";
        var r = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-3-pro-preview:generateContent?key='+geminiKey,{
            method:'POST',headers:{'Content-Type':'application/json'},
            body:JSON.stringify({contents:[{parts:[{text:gradingPrompt}]}],generationConfig:{responseMimeType:"application/json"}})
        });
        var d = await r.json();
        var t = d.candidates[0].content.parts[0].text;
        t = t.replace(/```json\s*/gi,"").replace(/```\s*/g,"").trim();
        var depth2=0,start2=-1,end2=-1;
        for(var i2=0;i2<t.length;i2++){if(t[i2]==='{'){if(depth2===0)start2=i2;depth2++;}else if(t[i2]==='}'){depth2--;if(depth2===0&&start2!==-1){end2=i2;break;}}}
        if(start2===-1||end2===-1) throw new Error("No JSON");
        t=t.substring(start2,end2+1);
        t=t.replace(/[\x00-\x1F\x7F]/g,function(c){return c==='\n'||c==='\r'||c==='\t'?' ':'';});
        var result = JSON.parse(t);
        showQuizFeedback(result.correct, currentQuizData.correctAnswer, currentQuizData.explanation + (result.reason ? '\n\nAI 채점: '+result.reason : ''));
    } catch(e) {
        var ua = userAnswer.replace(/\s/g,'').toLowerCase();
        var ca = currentQuizData.correctAnswer.replace(/\s/g,'').toLowerCase();
        var correct = ua===ca||ca.includes(ua)||ua.includes(ca);
        showQuizFeedback(correct, currentQuizData.correctAnswer, currentQuizData.explanation);
    }
    document.getElementById('btn-short-submit').textContent = '제출';
    document.getElementById('btn-short-submit').disabled = false;
}

function showQuizFeedback(correct, answer, explanation) {
    var fb = document.getElementById('quiz-feedback');
    fb.classList.remove('hidden','border-green-500','border-red-500');
    fb.classList.add(correct?'border-green-500':'border-red-500');
    fb.innerHTML = '<div class="flex items-center gap-2 mb-2"><span class="text-lg">'+(correct?'🎉':'😅')+'</span><span class="font-bold '+(correct?'text-green-700':'text-red-700')+'">'+(correct?'정답입니다!':'아쉽습니다!')+'</span></div>'+'<p class="text-sm text-gray-700 mb-1"><strong>정답:</strong> '+answer+'</p>'+'<p class="text-sm text-gray-600">'+explanation+'</p>';
}

function toggleStrategy(el) {
    var d = el.querySelector('.strategy-detail');
    var s = el.querySelector('.strategy-summary');
    if(d.classList.contains('hidden')) {
        document.querySelectorAll('.strategy-card .strategy-detail').forEach(function(x){ x.classList.add('hidden'); });
        document.querySelectorAll('.strategy-card .strategy-summary').forEach(function(x){ x.classList.remove('hidden'); });
        d.classList.remove('hidden'); s.classList.add('hidden');
    } else { d.classList.add('hidden'); s.classList.remove('hidden'); }
}

document.addEventListener('DOMContentLoaded', function() {
    var ctx = document.getElementById('annCompareChart');
    if (ctx) {
        new Chart(ctx.getContext('2d'), {
            type: 'radar',
            data: {
                labels: ['검색 속도','정확도(Recall)','메모리 효율','동적 삽입','구축 속도'],
                datasets: [{
                    label: 'HNSW',
                    data: [9, 9, 4, 9, 4],
                    backgroundColor: 'rgba(79,70,229,0.15)',
                    borderColor: '#4f46e5',
                    borderWidth: 2,
                    pointBackgroundColor: '#4f46e5'
                },{
                    label: 'IVF',
                    data: [7, 7, 7, 4, 7],
                    backgroundColor: 'rgba(16,185,129,0.15)',
                    borderColor: '#10b981',
                    borderWidth: 2,
                    pointBackgroundColor: '#10b981'
                },{
                    label: 'PQ',
                    data: [5, 6, 10, 2, 8],
                    backgroundColor: 'rgba(245,158,11,0.15)',
                    borderColor: '#f59e0b',
                    borderWidth: 2,
                    pointBackgroundColor: '#f59e0b'
                }]
            },
            options: { responsive:true, maintainAspectRatio:false, scales:{ r:{ min:0, max:10, ticks:{stepSize:2} } }, plugins:{ legend:{position:'bottom'} } }
        });
    }
});
</script>
</body>
</html>
